import{r as a,a as N,j as e}from"./index-o8LTlsr2.js";import{a as C}from"./imageUrl-BzcOWJ-M.js";const y=()=>{const[u,i]=a.useState([]),[o,h]=a.useState(!0),[c,m]=a.useState(null);return a.useEffect(()=>{(async()=>{try{h(!0);const s=await N.get("/testimonials");s.success&&s.data&&i(s.data)}catch(s){m(s.message||"Failed to fetch testimonials"),console.error("Error fetching testimonials:",s)}finally{h(!1)}})()},[]),{testimonials:u,loading:o,error:c}},T=()=>{const{testimonials:u,loading:i,error:o}=y(),[h,c]=a.useState(0),[m,n]=a.useState(!1),[s,p]=a.useState(2),v=a.useRef(null);a.useEffect(()=>{const t=()=>{p(window.innerWidth<768?1:2)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const r=u.filter(t=>t&&t.testimonialText&&t.clientName&&t.isActive!==!1),f=r.length>0?[...r,...r,...r]:[],g=s>0?100/s:100;a.useEffect(()=>{if(i||o||r.length===0||m||s===0)return;const t=setInterval(()=>{c(d=>{const l=Math.max(0,r.length-s),x=d+1;return x>l?0:x})},4e3);return()=>clearInterval(t)},[r.length,i,o,m,s]);const j=()=>{c(t=>r.length===0?0:t===0?Math.max(0,r.length-s):t-1)},b=()=>{c(t=>{if(r.length===0)return 0;const d=Math.max(0,r.length-s),l=t+1;return l>d?0:l})};return i?e.jsx("section",{className:"py-20 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF6B35]"})})})}):o?e.jsx("section",{className:"py-20 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:e.jsx("div",{className:"text-red-600 text-center p-4",children:e.jsx("p",{children:"Failed to load testimonials. Please try again later."})})})}):r.length===0?null:e.jsx("section",{className:"py-20 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:[e.jsxs("div",{className:"mb-12 relative","data-aos":"fade-up",children:[e.jsx("p",{className:"text-[#7ED957] font-medium mb-2 uppercase text-sm",children:"Testimonial"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Client Stories & Experiences"}),r.length>s&&e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2",children:[e.jsx("button",{onClick:j,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"w-10 h-10 rounded-full border-2 border-[#0066CC] bg-white hover:bg-[#0066CC] text-[#0066CC] hover:text-white transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg","aria-label":"Previous testimonials",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("button",{onClick:b,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),className:"w-10 h-10 rounded-full border-2 border-[#0066CC] bg-white hover:bg-[#0066CC] text-[#0066CC] hover:text-white transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg","aria-label":"Next testimonials",children:e.jsx("i",{className:"ri-arrow-right-line text-xl"})})]})]}),e.jsx("div",{ref:v,className:"overflow-hidden relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:e.jsx("div",{className:"flex transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${h*g}%)`,width:`${f.length*100/s}%`},children:f.map((t,d)=>e.jsx("div",{className:"flex-shrink-0 px-2 md:px-4",style:{width:`${g}%`},children:e.jsxs("div",{className:"bg-[#FF6B35] p-6 md:p-8 rounded-lg text-white h-full hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:[e.jsx("div",{className:"mb-6",children:e.jsx("i",{className:"ri-double-quotes-l text-5xl text-white/50"})}),e.jsxs("p",{className:"text-white leading-relaxed mb-6 text-base md:text-lg italic",children:['"',t?.testimonialText||"",'"']}),e.jsx("div",{className:"border-t border-white/30 pt-6 mt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0 overflow-hidden relative border-2 border-white/30",children:t?.clientImage?.filePath?e.jsx("img",{src:C(t.clientImage),alt:t?.clientName||"Client",className:"w-full h-full object-cover",onError:l=>{const x=l.target;x.style.display="none";const w=x.parentElement;w&&(w.innerHTML=`
                                  <div class="w-full h-full bg-white/30 flex items-center justify-center">
                                    <span class="text-white font-bold text-lg">
                                      ${(t?.clientName||"C").charAt(0).toUpperCase()}
                                    </span>
                                  </div>
                                `)}}):e.jsx("div",{className:"w-full h-full bg-white/30 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:(t?.clientName||"C").charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base md:text-lg font-bold text-white mb-1",children:t?.clientName||"Client"}),t?.clientPosition&&t?.clientCompany?e.jsxs("p",{className:"text-sm text-white/90",children:[t.clientPosition,", ",t.clientCompany]}):t?.clientCompany?e.jsx("p",{className:"text-sm text-white/90",children:t.clientCompany}):t?.clientPosition?e.jsx("p",{className:"text-sm text-white/90",children:t.clientPosition}):null]})]})})]})},`${t.id}-${d}`))})})]})})};export{T};
//# sourceMappingURL=TestimonialsSection-MpSCh3Mp.js.map
