{"version":3,"file":"imageUrl-BzcOWJ-M.js","sources":["../../src/utils/imageUrl.ts"],"sourcesContent":["/**\r\n * Image URL Utility\r\n * Converts old WordPress URLs to new local paths\r\n * Handles both old URLs (https://adonismedical.com/wp-content/uploads/...) \r\n * and new paths (/uploads/YYYY/MM/filename)\r\n */\r\n\r\n/**\r\n * Convert image path/URL to the correct local path\r\n * - Removes https://www.adonismedical.com/wp-content/ prefix\r\n * - Handles paths already starting with /uploads/\r\n * - Returns full URL with base API URL\r\n */\r\nexport const getImageUrl = (image: any): string => {\r\n  if (!image) return '';\r\n  \r\n  let imagePath = '';\r\n  \r\n  // Handle different image formats\r\n  if (typeof image === 'string') {\r\n    imagePath = image;\r\n  } else if (image?.filePath) {\r\n    imagePath = image.filePath;\r\n  } else if (image?.image) {\r\n    imagePath = image.image;\r\n  } else if (image?.url) {\r\n    imagePath = image.url;\r\n  }\r\n  \r\n  if (!imagePath) return '';\r\n  \r\n  // Get base URL (remove /api/v1 if present)\r\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n  \r\n  // If it's already a full URL starting with http:// or https://\r\n  if (imagePath.startsWith('http://') || imagePath.startsWith('https://')) {\r\n    // Check if it's the old WordPress URL structure\r\n    if (imagePath.includes('adonismedical.com/wp-content/uploads/')) {\r\n      // Extract the path after wp-content/uploads/\r\n      // Example: https://www.adonismedical.com/wp-content/uploads/2025/05/filename.jpg\r\n      // Becomes: /uploads/2025/05/filename.jpg\r\n      const match = imagePath.match(/wp-content\\/uploads\\/(.+)$/);\r\n      if (match && match[1]) {\r\n        return `${baseUrl}/uploads/${match[1]}`;\r\n      }\r\n    }\r\n    // If it's already a full URL and not WordPress, return as is\r\n    return imagePath;\r\n  }\r\n  \r\n  // If it already starts with /uploads/, just prepend base URL\r\n  if (imagePath.startsWith('/uploads/')) {\r\n    return `${baseUrl}${imagePath}`;\r\n  }\r\n  \r\n  // If it's a relative path without /uploads/, add it\r\n  // This handles cases where the path might be just \"2025/05/filename.jpg\"\r\n  if (imagePath.match(/^\\d{4}\\/\\d{2}\\//)) {\r\n    return `${baseUrl}/uploads/${imagePath}`;\r\n  }\r\n  \r\n  // Default: treat as relative to uploads root\r\n  return `${baseUrl}/uploads/${imagePath}`;\r\n};\r\n\r\n/**\r\n * Get fallback/default image URL\r\n * Converts old WordPress URLs to new local paths\r\n */\r\nexport const getDefaultImageUrl = (defaultPath: string): string => {\r\n  if (!defaultPath) return '';\r\n  \r\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n  \r\n  // Convert old WordPress URLs to new paths\r\n  if (defaultPath.includes('adonismedical.com/wp-content/uploads/')) {\r\n    const match = defaultPath.match(/wp-content\\/uploads\\/(.+)$/);\r\n    if (match && match[1]) {\r\n      return `${baseUrl}/uploads/${match[1]}`;\r\n    }\r\n  }\r\n  \r\n  // If already a local path, use as is\r\n  if (defaultPath.startsWith('/uploads/')) {\r\n    return `${baseUrl}${defaultPath}`;\r\n  }\r\n  \r\n  // If it's already a full URL, return as is\r\n  if (defaultPath.startsWith('http://') || defaultPath.startsWith('https://')) {\r\n    return defaultPath;\r\n  }\r\n  \r\n  // Default: treat as relative to uploads\r\n  return `${baseUrl}/uploads/${defaultPath}`;\r\n};\r\n\r\n"],"names":["getImageUrl","image","imagePath","baseUrl","match","getDefaultImageUrl","defaultPath"],"mappings":"AAaO,MAAMA,EAAeC,GAAuB,CACjD,GAAI,CAACA,EAAO,MAAO,GAEnB,IAAIC,EAAY,GAahB,GAVI,OAAOD,GAAU,SACnBC,EAAYD,EACHA,GAAO,SAChBC,EAAYD,EAAM,SACTA,GAAO,MAChBC,EAAYD,EAAM,MACTA,GAAO,MAChBC,EAAYD,EAAM,KAGhB,CAACC,EAAW,MAAO,GAGvB,MAAMC,EAAU,+BAA8B,QAAQ,UAAW,EAAE,GAAK,wBAGxE,GAAID,EAAU,WAAW,SAAS,GAAKA,EAAU,WAAW,UAAU,EAAG,CAEvE,GAAIA,EAAU,SAAS,uCAAuC,EAAG,CAI/D,MAAME,EAAQF,EAAU,MAAM,4BAA4B,EAC1D,GAAIE,GAASA,EAAM,CAAC,EAClB,MAAO,GAAGD,CAAO,YAAYC,EAAM,CAAC,CAAC,EAEzC,CAEA,OAAOF,CACT,CAGA,OAAIA,EAAU,WAAW,WAAW,EAC3B,GAAGC,CAAO,GAAGD,CAAS,GAK3BA,EAAU,MAAM,iBAAiB,EAC5B,GAAGC,CAAO,YAAYD,CAAS,GAIjC,GAAGC,CAAO,YAAYD,CAAS,EACxC,EAMaG,EAAsBC,GAAgC,CACjE,GAAI,CAACA,EAAa,MAAO,GAEzB,MAAMH,EAAU,+BAA8B,QAAQ,UAAW,EAAE,GAAK,wBAGxE,GAAIG,EAAY,SAAS,uCAAuC,EAAG,CACjE,MAAMF,EAAQE,EAAY,MAAM,4BAA4B,EAC5D,GAAIF,GAASA,EAAM,CAAC,EAClB,MAAO,GAAGD,CAAO,YAAYC,EAAM,CAAC,CAAC,EAEzC,CAGA,OAAIE,EAAY,WAAW,WAAW,EAC7B,GAAGH,CAAO,GAAGG,CAAW,GAI7BA,EAAY,WAAW,SAAS,GAAKA,EAAY,WAAW,UAAU,EACjEA,EAIF,GAAGH,CAAO,YAAYG,CAAW,EAC1C"}