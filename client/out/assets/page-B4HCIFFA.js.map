{"version":3,"file":"page-B4HCIFFA.js","sources":["../../src/hooks/useClients.ts","../../src/hooks/useClientsPage.ts","../../src/pages/clients/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { api } from '../utils/api';\r\n\r\ninterface Client {\r\n  id: number;\r\n  name: string;\r\n  logoId: number | null;\r\n  websiteUrl: string | null;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n  logo: any | null;\r\n}\r\n\r\nexport const useClients = () => {\r\n  const [clients, setClients] = useState<Client[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchClients = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await api.get<Client[]>('/clients');\r\n        if (response.success && response.data) {\r\n          setClients(response.data);\r\n        }\r\n      } catch (err: any) {\r\n        setError(err.message || 'Failed to fetch clients');\r\n        console.error('Error fetching clients:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchClients();\r\n  }, []);\r\n\r\n  return { clients, loading, error };\r\n};\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../utils/api';\r\n\r\ninterface ClientsPageContent {\r\n  id?: number;\r\n  heroTitle: string | null;\r\n  heroSubtitle: string | null;\r\n  heroImageId: number | null;\r\n  introText: string | null;\r\n  heroImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\nexport const useClientsPage = () => {\r\n  const [content, setContent] = useState<ClientsPageContent | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchClientsPage = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const response = await api.get<ClientsPageContent>('/clients/page-content');\r\n        if (response.success && response.data) {\r\n          setContent(response.data as ClientsPageContent);\r\n        } else {\r\n          // Page content doesn't exist yet, use defaults\r\n          setContent({\r\n            heroTitle: null,\r\n            heroSubtitle: null,\r\n            heroImageId: null,\r\n            introText: null\r\n          });\r\n        }\r\n      } catch (err: any) {\r\n        // If it's a \"not found\" error, that's okay - use defaults\r\n        if (err.message && err.message.includes('not found')) {\r\n          setContent({\r\n            heroTitle: null,\r\n            heroSubtitle: null,\r\n            heroImageId: null,\r\n            introText: null\r\n          });\r\n          setError(null); // Don't treat \"not found\" as an error\r\n        } else {\r\n          setError(err.message || 'Failed to fetch clients page data');\r\n          console.error('Error fetching clients page:', err);\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchClientsPage();\r\n  }, []);\r\n\r\n  return { content, loading, error };\r\n};\r\n\r\n","import { useEffect } from 'react';\nimport Header from '../../components/feature/Header';\nimport Footer from '../../components/feature/Footer';\nimport AOS from 'aos';\nimport 'aos/dist/aos.css';\nimport { useClients, useClientsPage } from '../../hooks';\nimport { getDefaultImageUrl, getImageUrl } from '../../utils/imageUrl';\n\nexport default function ClientsPage() {\n  const { clients, loading, error } = useClients();\n  const { content: pageContent, loading: contentLoading } = useClientsPage();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    AOS.init({\n      duration: 800,\n      once: true,\n      easing: 'ease-out-cubic'\n    });\n  }, []);\n\n  // Fallback placeholder image - only used when image fails to load (server error)\n  const placeholderImage = getDefaultImageUrl('2025/03/logo01.jpg');\n\n  return (\n    <div className=\"min-h-screen\">\n      <div className=\"pt-20\">\n        <Header />\n      </div>\n      {/* Hero Section */}\n      <div \n        className=\"relative h-[500px] bg-cover bg-center flex items-center\"\n        style={{\n          backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${\n            pageContent?.heroImage \n              ? getImageUrl(pageContent.heroImage) \n              : getDefaultImageUrl('2024/10/image-51-2-1.jpg')\n          })`,\n        }}\n      >\n        <div className=\"max-w-7xl mx-auto px-4 w-full\">\n          <h1 className=\"text-5xl md:text-6xl font-bold text-white mb-4\" style={{ color: '#7DC244' }} data-aos=\"fade-down\">\n            {pageContent?.heroTitle || 'Clients'}\n          </h1>\n          {pageContent?.heroSubtitle && (\n            <p className=\"text-xl text-white font-light\" data-aos=\"fade-up\" data-aos-delay=\"100\">\n              {pageContent.heroSubtitle}\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Clients Grid Section */}\n      <div className=\"py-16 px-4\" style={{ backgroundColor: '#cccccc' }}>\n        <div className=\"max-w-full mx-auto px-8\">\n          {loading ? (\n            <div className=\"flex items-center justify-center h-64\">\n              <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-[#7DC244]\"></div>\n            </div>\n          ) : error ? (\n            <div className=\"text-red-600 text-center p-8 bg-red-50 rounded-lg\">\n              <i className=\"ri-error-warning-line text-4xl mb-4\"></i>\n              <p className=\"text-lg\">Failed to load clients. Please try again later.</p>\n            </div>\n          ) : clients.filter(client => client.isActive).length === 0 ? (\n            <div className=\"text-gray-500 text-center p-8\">\n              <p className=\"text-lg\">No active clients found.</p>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n              {clients.filter(client => client.isActive).map((client, index) => {\n                // Only show clients that have logos OR allow showing placeholder if logo fails\n                const imageUrl = client.logo ? getImageUrl(client.logo) : null;\n                \n                return (\n                  <div\n                    key={client.id}\n                    className=\"bg-white border border-gray-300 p-8 flex items-center justify-center hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 hover:scale-105 aspect-[3/2]\"\n                    data-aos=\"zoom-in\"\n                    data-aos-delay={index * 30}\n                    title={client.name}\n                  >\n                    {client.websiteUrl ? (\n                      <a href={client.websiteUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"w-full h-full flex items-center justify-center\">\n                        {imageUrl ? (\n                          <img\n                            src={imageUrl}\n                            alt={client.name}\n                            className=\"w-full h-full object-contain transition-transform duration-500 hover:scale-110\"\n                            loading={index < 10 ? 'eager' : 'lazy'}\n                            onError={(e) => {\n                              // Only fallback if image fails to load (server error)\n                              const target = e.target as HTMLImageElement;\n                              if (target.src !== placeholderImage) {\n                                target.src = placeholderImage;\n                              }\n                            }}\n                          />\n                        ) : (\n                          <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                            <i className=\"ri-image-line text-4xl\"></i>\n                          </div>\n                        )}\n                      </a>\n                    ) : (\n                      <>\n                        {imageUrl ? (\n                          <img\n                            src={imageUrl}\n                            alt={client.name}\n                            className=\"w-full h-full object-contain transition-transform duration-500 hover:scale-110\"\n                            loading={index < 10 ? 'eager' : 'lazy'}\n                            onError={(e) => {\n                              // Only fallback if image fails to load (server error)\n                              const target = e.target as HTMLImageElement;\n                              if (target.src !== placeholderImage) {\n                                target.src = placeholderImage;\n                              }\n                            }}\n                          />\n                        ) : (\n                          <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                            <i className=\"ri-image-line text-4xl\"></i>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n"],"names":["useClients","clients","setClients","useState","loading","setLoading","error","setError","useEffect","response","api","err","useClientsPage","content","setContent","ClientsPage","pageContent","AOS","placeholderImage","getDefaultImageUrl","jsxs","jsx","Header","getImageUrl","client","index","imageUrl","e","target","Footer"],"mappings":"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"}