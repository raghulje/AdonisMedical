{"version":3,"mappings":"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","names":["Modal","isOpen","onClose","title","children","size","showCloseButton","useEffect","sizeClasses","jsx","e","jsxs","FormField","label","required","error","hint","DragDropList","items","onReorder","renderItem","keyExtractor","emptyMessage","draggedIndex","setDraggedIndex","useState","dragOverIndex","setDragOverIndex","handleDragStart","index","handleDragOver","handleDrop","dropIndex","newItems","draggedItem","reorderedItems","item","handleDragEnd","ImageSelector","value","onChange","aspectRatio","currentImage","uploading","setUploading","preview","setPreview","inputMode","setInputMode","urlInput","setUrlInput","gallery","setGallery","loadingGallery","setLoadingGallery","galleryPage","setGalleryPage","selectedMedia","setSelectedMedia","isMediaId","isUrl","fetchGallery","baseUrl","fetchMediaPreview","getDefaultImageUrl","mediaId","response","api","handleFileUpload","file","formData","token","data","handleSelectFromGallery","media","handleUrlSubmit","handleRemove","getPreviewUrl","mediaUrl","HomePageManagement","activeSection","setActiveSection","loading","setLoading","saving","setSaving","heroData","setHeroData","aboutData","setAboutData","aboutParagraphs","setAboutParagraphs","showParagraphModal","setShowParagraphModal","editingParagraph","setEditingParagraph","stats","setStats","showStatModal","setShowStatModal","editingStat","setEditingStat","qualityData","setQualityData","productsData","setProductsData","productsCards","setProductsCards","showProductCardModal","setShowProductCardModal","editingProductCard","setEditingProductCard","specialtiesData","setSpecialtiesData","testimonialsData","setTestimonialsData","contactData","setContactData","sectionTabs","fetchSectionData","heroRes","aboutRes","statsRes","a","b","productsRes","productsCardsRes","qualityRes","specialtiesRes","testimonialsRes","contactRes","handleSaveHero","handleSaveAbout","handleSaveParagraph","paragraph","handleDeleteParagraph","id","p","handleReorderParagraphs","reorderedParagraphs","i","handleSaveStats","reorderedStats","handleSaveStat","stat","handleDeleteStat","s","handleSaveQuality","handleSaveProducts","handleSaveProductCard","card","handleDeleteProductCard","c","handleReorderProductCards","reorderedCards","handleSaveSpecialties","handleSaveTestimonials","handleSaveContact","getImageUrl","image","tab","Fragment","HeroSectionEditor","AboutSectionEditor","StatsSectionEditor","ProductsSectionEditor","QualitySectionEditor","SpecialtiesSectionEditor","TestimonialsSectionEditor","ContactSectionEditor","StatModal","ParagraphModal","ProductCardModal","onSave","paragraphs","onAddParagraph","onEditParagraph","onDeleteParagraph","onReorderParagraphs","safeData","safeParagraphs","setFormData","onEdit","onDelete","onAdd","cards","onAddCard","onEditCard","onDeleteCard","onReorderCards","getCardImageUrl","safeCards","isValid","HeaderFooterManagement","navItems","setNavItems","showNavModal","setShowNavModal","editingNavItem","setEditingNavItem","footerSections","setFooterSections","showSectionModal","setShowSectionModal","showLinkModal","setShowLinkModal","editingSection","setEditingSection","editingLink","setEditingLink","selectedSectionId","setSelectedSectionId","footerLogos","setFooterLogos","showLogoModal","setShowLogoModal","editingLogo","setEditingLogo","socialLinks","setSocialLinks","showSocialModal","setShowSocialModal","editingSocial","setEditingSocial","fetchNavItems","fetchFooterSections","fetchFooterLogos","fetchSocialLinks","allItems","itemsWithChildren","child","sections","handleSaveNavItem","handleDeleteNavItem","n","handleSaveFooterSection","section","handleDeleteFooterSection","handleSaveFooterLink","link","handleDeleteFooterLink","handleSaveLogo","logo","handleSaveSocial","social","existingRefex","l","existingAdonis","getLogoImageUrl","getLinkIconImageUrl","NavItemModal","SectionModal","LinkModal","LogoModal","SocialModal","isSubMenu","AboutPageManagement","content","setContent","fetchContent","handleSave","SectionEditor","val","fields","imageSelector","previewImage","field","defaultPermissions","pageLabels","UserManagement","view","setView","selectedUser","setSelectedUser","users","setUsers","customPermissions","setCustomPermissions","fetchUsers","mappedUsers","user","handleCreateUser","handleEditUser","fullUser","payload","handleCancel","handleRoleChange","role","getCurrentPermissions","handlePermissionChange","page","permission","current","updated","resetToRoleDefaults","handleDeleteUser","userId","getRoleBadgeColor","getStatusBadgeColor","status","permissions","perms","pageInfo","HfMobilePageManagement","activeTab","setActiveTab","pageContent","setPageContent","images","setImages","features","setFeatures","variants","setVariants","showImageModal","setShowImageModal","showFeatureModal","setShowFeatureModal","showVariantModal","setShowVariantModal","editingImage","setEditingImage","editingFeature","setEditingFeature","editingVariant","setEditingVariant","fetchPageContent","fetchImages","fetchFeatures","fetchVariants","handleSavePageContent","handleReorderImages","reordered","handleSaveImage","handleDeleteImage","handleReorderFeatures","handleSaveFeature","feature","handleDeleteFeature","f","handleReorderVariants","handleSaveVariant","variant","handleDeleteVariant","v","img","ImageModal","FeatureModal","VariantModal","HfFixedPageManagement","FpdCArmPageManagement","HfCArm1kPageManagement","LineFrequencyPageManagement","DigitalRadiographyPageManagement","DreamSeriesPageManagement","ProductsPageManagement","AwardsPageManagement","awards","setAwards","showAwardModal","setShowAwardModal","editingAward","setEditingAward","viewingAward","setViewingAward","fetchAwards","handleReorder","reorderedAwards","handleSaveAward","award","handleDeleteAward","PageContentEditor","AwardModal","AwardViewModal","CareersPageManagement","jobs","setJobs","showJobModal","setShowJobModal","editingJob","setEditingJob","viewingJob","setViewingJob","fetchJobs","handleSaveJob","job","handleDeleteJob","j","JobsListEditor","JobModal","JobViewModal","onView","ContactPageManagement","SMTPConfiguration","isEditing","setIsEditing","isTesting","setIsTesting","testResult","setTestResult","smtpConfig","setSmtpConfig","testEmail","setTestEmail","handleTestConnection","commonSMTPProviders","applyProvider","provider","SpecialtiesPageManagement","specialties","setSpecialties","showSpecialtyModal","setShowSpecialtyModal","editingSpecialty","setEditingSpecialty","viewingSpecialty","setViewingSpecialty","pageCards","setPageCards","showCardModal","setShowCardModal","editingCard","setEditingCard","fetchPageCards","fetchSpecialties","handleSaveCard","handleDeleteCard","handleReorderCards","reorderedSpecialties","handleSaveSpecialty","specialty","handleDeleteSpecialty","CardsEditor","CardModal","SpecialtyModal","SpecialtyViewModal","name","InvestorRelationsPageManagement","documents","setDocuments","showDocumentModal","setShowDocumentModal","editingDocument","setEditingDocument","fetchDocuments","reorderedDocs","handleSaveDocument","doc","handleDeleteDocument","d","DocumentModal","document","formDataObj","ClientsPageManagement","clients","setClients","showClientModal","setShowClientModal","editingClient","setEditingClient","viewingClient","setViewingClient","fetchClients","getClientDisplayName","client","reorderedClients","handleSaveClient","errorMessage","handleDeleteClient","ClientModal","ClientViewModal","ManagementPageManagement","leaders","setLeaders","showLeaderModal","setShowLeaderModal","editingLeader","setEditingLeader","viewingLeader","setViewingLeader","fetchLeaders","reorderedLeaders","handleSaveLeader","leader","handleDeleteLeader","LeaderModal","LeaderViewModal","OurPresencePageManagement","locations","setLocations","showLocationModal","setShowLocationModal","editingLocation","setEditingLocation","fetchLocations","handleSaveLocation","loc","handleDeleteLocation","LocationModal","location","ProductionFacilityPageManagement","reorderedFeatures","QualityAssurancePageManagement","certifications","setCertifications","showCertModal","setShowCertModal","editingCert","setEditingCert","fetchCertifications","reorderedCerts","handleSaveCert","cert","handleDeleteCert","CertModal","RequestDemoPageManagement","setParagraphs","getFeatureIconUrl","OurProductsPageManagement","ErrorBoundary","Component","props","errorInfo","ReactQuillComponent","QuillStylesLoaded","loadQuill","ReactQuill","__vite_default__","__vitePreload","FallbackEditor","placeholder","height","QuillEditor","modules","formats","onError","errorHandler","event","Quill","RichTextEditor","editorValue","isMounted","setIsMounted","quillReady","setQuillReady","useFallback","setUseFallback","handleChange","useMemo","node","delta","TermsAndConditionsManagement","PrivacyPolicyManagement","FaqsManagement","setPage","setItems","showItemModal","setShowItemModal","editingItem","setEditingItem","fetchData","pageRes","itemsRes","handleSavePage","handleSaveItem","itemData","handleDeleteItem","handleReorderItems","itemsToUpdate","FaqItemModal","ContactInfoManagement","contactInfo","setContactInfo","fetchContactInfo","GlobalSettingsManagement","settings","setSettings","showModal","setShowModal","editingSetting","setEditingSetting","fetchSettings","setting","handleDelete","SettingModal","SocialLinksManagement","links","setLinks","fetchLinks","reorderedLinks","TestimonialsManagement","testimonials","setTestimonials","editingTestimonial","setEditingTestimonial","viewingTestimonial","setViewingTestimonial","fetchTestimonials","allTestimonials","testimonial","t","TestimonialModal","TestimonialViewModal","_","ReusableContactManagement","ActivityLogsPage","filterAction","setFilterAction","filterPage","setFilterPage","searchQuery","setSearchQuery","dateRange","setDateRange","logs","actionColors","actionIcons","filteredLogs","log","matchesAction","matchesPage","matchesSearch","exportLogs","csv","row","blob","url","RecycleBinPage","selectedItems","setSelectedItems","filterType","setFilterType","deletedItems","setDeletedItems","typeIcons","typeColors","filteredItems","handleSelectAll","handleSelectItem","prev","itemId","handleRestore","handleRestoreSelected","handlePermanentDelete","handleEmptyBin","getDaysAgo","date","days","VersionHistoryPage","selectedPage","setSelectedPage","selectedSection","setSelectedSection","compareMode","setCompareMode","compareVersions","setCompareVersions","versions","pages","filteredVersions","matchesSection","handleCompareToggle","versionId","version","handleCompare","change","idx","AdminDashboardPage","useNavigate","logout","useAuth","activeMainTab","setActiveMainTab","AOS","handleLogout","mainTabs"],"ignoreList":[],"sources":["../../src/components/cms/Modal.tsx","../../src/components/cms/FormField.tsx","../../src/components/cms/DragDropList.tsx","../../src/components/cms/ImageSelector.tsx","../../src/pages/admin/dashboard/components/HomePageManagement.tsx","../../src/pages/admin/dashboard/components/HeaderFooterManagement.tsx","../../src/pages/admin/dashboard/components/AboutPageManagement.tsx","../../src/pages/admin/dashboard/components/UserManagement.tsx","../../src/pages/admin/dashboard/components/products/HfMobilePageManagement.tsx","../../src/pages/admin/dashboard/components/products/HfFixedPageManagement.tsx","../../src/pages/admin/dashboard/components/products/FpdCArmPageManagement.tsx","../../src/pages/admin/dashboard/components/products/HfCArm1kPageManagement.tsx","../../src/pages/admin/dashboard/components/products/LineFrequencyPageManagement.tsx","../../src/pages/admin/dashboard/components/products/DigitalRadiographyPageManagement.tsx","../../src/pages/admin/dashboard/components/products/DreamSeriesPageManagement.tsx","../../src/pages/admin/dashboard/components/ProductsPageManagement.tsx","../../src/pages/admin/dashboard/components/AwardsPageManagement.tsx","../../src/pages/admin/dashboard/components/CareersPageManagement.tsx","../../src/pages/admin/dashboard/components/ContactPageManagement.tsx","../../src/pages/admin/dashboard/components/SMTPConfiguration.tsx","../../src/pages/admin/dashboard/components/SpecialtiesPageManagement.tsx","../../src/pages/admin/dashboard/components/InvestorRelationsPageManagement.tsx","../../src/pages/admin/dashboard/components/ClientsPageManagement.tsx","../../src/pages/admin/dashboard/components/ManagementPageManagement.tsx","../../src/pages/admin/dashboard/components/OurPresencePageManagement.tsx","../../src/pages/admin/dashboard/components/ProductionFacilityPageManagement.tsx","../../src/pages/admin/dashboard/components/QualityAssurancePageManagement.tsx","../../src/pages/admin/dashboard/components/RequestDemoPageManagement.tsx","../../src/pages/admin/dashboard/components/OurProductsPageManagement.tsx","../../src/components/cms/ErrorBoundary.tsx","../../src/components/cms/RichTextEditor.tsx","../../src/pages/admin/dashboard/components/TermsAndConditionsManagement.tsx","../../src/pages/admin/dashboard/components/PrivacyPolicyManagement.tsx","../../src/pages/admin/dashboard/components/FaqsManagement.tsx","../../src/pages/admin/dashboard/components/ContactInfoManagement.tsx","../../src/pages/admin/dashboard/components/GlobalSettingsManagement.tsx","../../src/pages/admin/dashboard/components/SocialLinksManagement.tsx","../../src/pages/admin/dashboard/components/TestimonialsManagement.tsx","../../src/pages/admin/dashboard/components/ReusableContactManagement.tsx","../../src/pages/admin/dashboard/components/ActivityLogsPage.tsx","../../src/pages/admin/dashboard/components/RecycleBinPage.tsx","../../src/pages/admin/dashboard/components/VersionHistoryPage.tsx","../../src/pages/admin/dashboard/page.tsx"],"sourcesContent":["import { ReactNode, useEffect } from 'react';\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: ReactNode;\r\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\r\n  showCloseButton?: boolean;\r\n}\r\n\r\nexport default function Modal({ \r\n  isOpen, \r\n  onClose, \r\n  title, \r\n  children, \r\n  size = 'lg',\r\n  showCloseButton = true \r\n}: ModalProps) {\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const sizeClasses = {\r\n    sm: 'max-w-md',\r\n    md: 'max-w-lg',\r\n    lg: 'max-w-2xl',\r\n    xl: 'max-w-4xl',\r\n    full: 'max-w-7xl'\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 z-50 overflow-y-auto\"\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) onClose();\r\n      }}\r\n    >\r\n      <div className=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0\">\r\n        <div className=\"fixed inset-0 transition-opacity bg-black bg-opacity-50\" aria-hidden=\"true\"></div>\r\n\r\n        <div className={`inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full ${sizeClasses[size]}`}>\r\n          {/* Header */}\r\n          <div className=\"bg-white px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\r\n            <h3 className=\"text-xl font-semibold text-gray-900\">{title}</h3>\r\n            {showCloseButton && (\r\n              <button\r\n                onClick={onClose}\r\n                className=\"text-gray-400 hover:text-gray-500 transition-colors cursor-pointer\"\r\n              >\r\n                <i className=\"ri-close-line text-2xl\"></i>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"bg-white px-6 py-6 max-h-[calc(100vh-200px)] overflow-y-auto\">\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { ReactNode } from 'react';\r\n\r\ninterface FormFieldProps {\r\n  label: string;\r\n  required?: boolean;\r\n  error?: string;\r\n  hint?: string;\r\n  children: ReactNode;\r\n}\r\n\r\nexport default function FormField({ label, required = false, error, hint, children }: FormFieldProps) {\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label className=\"block text-sm font-medium text-gray-700\">\r\n        {label}\r\n        {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n      </label>\r\n      {children}\r\n      {hint && <p className=\"text-xs text-gray-500\">{hint}</p>}\r\n      {error && <p className=\"text-xs text-red-500\">{error}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState } from 'react';\r\n\r\ninterface DragDropListProps<T> {\r\n  items: T[];\r\n  onReorder: (reorderedItems: T[]) => void;\r\n  renderItem: (item: T, index: number) => React.ReactNode;\r\n  keyExtractor: (item: T) => string | number;\r\n  emptyMessage?: string;\r\n}\r\n\r\nexport default function DragDropList<T>({ \r\n  items, \r\n  onReorder, \r\n  renderItem, \r\n  keyExtractor,\r\n  emptyMessage = 'No items yet. Add your first item!'\r\n}: DragDropListProps<T>) {\r\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\r\n  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\r\n\r\n  const handleDragStart = (index: number) => {\r\n    setDraggedIndex(index);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, index: number) => {\r\n    e.preventDefault();\r\n    if (draggedIndex === null || draggedIndex === index) return;\r\n    setDragOverIndex(index);\r\n  };\r\n\r\n  const handleDrop = (e: React.DragEvent, dropIndex: number) => {\r\n    e.preventDefault();\r\n    if (draggedIndex === null) return;\r\n\r\n    const newItems = [...items];\r\n    const [draggedItem] = newItems.splice(draggedIndex, 1);\r\n    newItems.splice(dropIndex, 0, draggedItem);\r\n\r\n    // Update orderIndex for each item\r\n    const reorderedItems = newItems.map((item: any, index) => ({\r\n      ...item,\r\n      orderIndex: index\r\n    }));\r\n\r\n    onReorder(reorderedItems);\r\n    setDraggedIndex(null);\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggedIndex(null);\r\n    setDragOverIndex(null);\r\n  };\r\n\r\n  if (items.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n        <i className=\"ri-inbox-line text-4xl text-gray-400 mb-2\"></i>\r\n        <p className=\"text-gray-500\">{emptyMessage}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {items.map((item, index) => (\r\n        <div\r\n          key={keyExtractor(item)}\r\n          draggable\r\n          onDragStart={() => handleDragStart(index)}\r\n          onDragOver={(e) => handleDragOver(e, index)}\r\n          onDrop={(e) => handleDrop(e, index)}\r\n          onDragEnd={handleDragEnd}\r\n          className={`\r\n            transition-all duration-200 cursor-move\r\n            ${draggedIndex === index ? 'opacity-50' : ''}\r\n            ${dragOverIndex === index ? 'transform translate-y-2 border-blue-400' : ''}\r\n          `}\r\n        >\r\n          <div className=\"bg-white border border-gray-200 rounded-lg p-4 flex items-center space-x-4 hover:shadow-md\">\r\n            <div className=\"text-gray-400 cursor-grab active:cursor-grabbing\">\r\n              <i className=\"ri-drag-move-2-line text-2xl\"></i>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              {renderItem(item, index)}\r\n            </div>\r\n            <div className=\"text-xs text-gray-400 font-medium\">\r\n              #{index + 1}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../utils/api';\r\nimport { getImageUrl, getDefaultImageUrl } from '../../utils/imageUrl';\r\n\r\ninterface ImageSelectorProps {\r\n  value: number | string | null; // Can be mediaId (number) or URL (string)\r\n  onChange: (value: number | string | null) => void;\r\n  label?: string;\r\n  required?: boolean;\r\n  aspectRatio?: string;\r\n  currentImage?: { filePath: string; fileName?: string } | null; // Pre-loaded image data from backend\r\n}\r\n\r\ntype InputMode = 'upload' | 'gallery' | 'url' | null;\r\n\r\nexport default function ImageSelector({ \r\n  value, \r\n  onChange, \r\n  label = 'Image',\r\n  required = false,\r\n  aspectRatio = '16/9',\r\n  currentImage = null\r\n}: ImageSelectorProps) {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [preview, setPreview] = useState<string | null>(null);\r\n  const [inputMode, setInputMode] = useState<InputMode>(null);\r\n  const [urlInput, setUrlInput] = useState('');\r\n  const [gallery, setGallery] = useState<any[]>([]);\r\n  const [loadingGallery, setLoadingGallery] = useState(false);\r\n  const [galleryPage, setGalleryPage] = useState(1);\r\n  const [selectedMedia, setSelectedMedia] = useState<any | null>(null);\r\n\r\n  // Determine if value is a mediaId (number) or URL (string)\r\n  const isMediaId = typeof value === 'number';\r\n  const isUrl = typeof value === 'string' && (value.startsWith('http') || value.startsWith('/uploads'));\r\n\r\n  // Fetch gallery on mount and when page changes\r\n  useEffect(() => {\r\n    if (inputMode === 'gallery') {\r\n      fetchGallery();\r\n    }\r\n  }, [inputMode, galleryPage]);\r\n\r\n  // Update preview when value or currentImage changes\r\n  useEffect(() => {\r\n    // If we have pre-loaded image data, use it immediately\r\n    if (currentImage && currentImage.filePath && isMediaId && value) {\r\n      const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n      setPreview(`${baseUrl}${currentImage.filePath}`);\r\n      setSelectedMedia({\r\n        id: value,\r\n        fileName: currentImage.fileName || '',\r\n        filePath: currentImage.filePath\r\n      });\r\n    } else if (isMediaId && value) {\r\n      fetchMediaPreview(value);\r\n    } else if (isUrl && value) {\r\n      setPreview(value.startsWith('http') ? value : getDefaultImageUrl(value.replace('/uploads/', '')));\r\n    } else {\r\n      setPreview(null);\r\n      setSelectedMedia(null);\r\n    }\r\n  }, [value, currentImage]);\r\n\r\n  const fetchMediaPreview = async (mediaId: number) => {\r\n    try {\r\n      const response = await api.get(`/media/${mediaId}`);\r\n      if (response.success && response.data) {\r\n        const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n        setPreview(`${baseUrl}${response.data.filePath}`);\r\n        setSelectedMedia(response.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching media:', error);\r\n    }\r\n  };\r\n\r\n  const fetchGallery = async () => {\r\n    setLoadingGallery(true);\r\n    try {\r\n      const response = await api.get(`/media?fileType=image&page=${galleryPage}&limit=20`);\r\n      if (response.success && response.data) {\r\n        setGallery(response.data.media || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching gallery:', error);\r\n      alert('Failed to load gallery. Please try again.');\r\n    } finally {\r\n      setLoadingGallery(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setUploading(true);\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('image', file);\r\n      \r\n      const token = localStorage.getItem('auth_token');\r\n      const response = await fetch(`${import.meta.env.VITE_API_URL?.replace('/api/v1', '')}/api/v1/upload/image`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token || ''}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success && data.mediaId) {\r\n        onChange(data.mediaId);\r\n        const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n        setPreview(`${baseUrl}${data.imageUrl}`);\r\n        setInputMode(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n      alert('Failed to upload image. Please try again.');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectFromGallery = (media: any) => {\r\n    onChange(media.id);\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    setPreview(`${baseUrl}${media.filePath}`);\r\n    setSelectedMedia(media);\r\n    setInputMode(null);\r\n  };\r\n\r\n  const handleUrlSubmit = () => {\r\n    if (urlInput.trim()) {\r\n      // If it's a full URL, store as string\r\n      // If it's a relative path like /uploads/2025/05/file.jpg, store as string\r\n      onChange(urlInput.trim());\r\n      setPreview(urlInput.startsWith('http') ? urlInput : getDefaultImageUrl(urlInput.replace('/uploads/', '')));\r\n      setUrlInput('');\r\n      setInputMode(null);\r\n    }\r\n  };\r\n\r\n  const handleRemove = () => {\r\n    onChange(null);\r\n    setPreview(null);\r\n    setSelectedMedia(null);\r\n    setInputMode(null);\r\n  };\r\n\r\n  const getPreviewUrl = () => {\r\n    if (preview) return preview;\r\n    if (isMediaId && value) {\r\n      return `${import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002'}/placeholder`;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {label && (\r\n        <label className=\"block text-sm font-medium text-gray-700\">\r\n          {label}\r\n          {required && <span className=\"text-red-500 ml-1\">*</span>}\r\n        </label>\r\n      )}\r\n\r\n      {/* Preview */}\r\n      {getPreviewUrl() && (\r\n        <div className=\"border-2 border-gray-200 rounded-lg p-4 bg-gray-50\">\r\n          <div className=\"relative group\">\r\n            <img \r\n              src={getPreviewUrl() || ''}\r\n              alt=\"Preview\"\r\n              className={`w-full rounded-lg object-cover ${aspectRatio === '16/9' ? 'aspect-video' : aspectRatio === '1/1' ? 'aspect-square' : ''}`}\r\n              style={{ maxHeight: '300px' }}\r\n            />\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center\">\r\n              <div className=\"opacity-0 group-hover:opacity-100 flex space-x-2\">\r\n                <button\r\n                  onClick={() => setInputMode(null)}\r\n                  className=\"px-4 py-2 bg-white text-gray-700 rounded-lg hover:bg-gray-100 cursor-pointer\"\r\n                >\r\n                  <i className=\"ri-edit-line mr-2\"></i>Change\r\n                </button>\r\n                <button\r\n                  onClick={handleRemove}\r\n                  className=\"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 cursor-pointer\"\r\n                >\r\n                  <i className=\"ri-delete-bin-line mr-2\"></i>Remove\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {selectedMedia && (\r\n            <p className=\"mt-2 text-xs text-gray-500\">\r\n              {selectedMedia.fileName}\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Input Mode Selection */}\r\n      {!getPreviewUrl() || inputMode !== null ? (\r\n        <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4\">\r\n          {!inputMode ? (\r\n            <div className=\"text-center py-4\">\r\n              <p className=\"text-sm text-gray-500 mb-4\">Select image source:</p>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n                <button\r\n                  onClick={() => setInputMode('upload')}\r\n                  className=\"px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 cursor-pointer flex items-center justify-center\"\r\n                >\r\n                  <i className=\"ri-upload-2-line mr-2\"></i>Upload\r\n                </button>\r\n                <button\r\n                  onClick={() => setInputMode('gallery')}\r\n                  className=\"px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 cursor-pointer flex items-center justify-center\"\r\n                >\r\n                  <i className=\"ri-image-line mr-2\"></i>Gallery\r\n                </button>\r\n                <button\r\n                  onClick={() => setInputMode('url')}\r\n                  className=\"px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 cursor-pointer flex items-center justify-center\"\r\n                >\r\n                  <i className=\"ri-links-line mr-2\"></i>URL\r\n                </button>\r\n              </div>\r\n              <button\r\n                onClick={() => setInputMode(null)}\r\n                className=\"mt-4 text-sm text-gray-500 hover:text-gray-700 cursor-pointer\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          ) : inputMode === 'upload' ? (\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h4 className=\"text-sm font-medium text-gray-700\">Upload New Image</h4>\r\n                <button\r\n                  onClick={() => setInputMode(null)}\r\n                  className=\"text-sm text-gray-500 hover:text-gray-700 cursor-pointer\"\r\n                >\r\n                  <i className=\"ri-close-line\"></i>\r\n                </button>\r\n              </div>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileUpload}\r\n                disabled={uploading}\r\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer\"\r\n              />\r\n              {uploading && (\r\n                <div className=\"text-sm text-blue-600\">\r\n                  <i className=\"ri-loader-4-line animate-spin mr-2\"></i>Uploading...\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : inputMode === 'gallery' ? (\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h4 className=\"text-sm font-medium text-gray-700\">Choose from Gallery</h4>\r\n                <button\r\n                  onClick={() => setInputMode(null)}\r\n                  className=\"text-sm text-gray-500 hover:text-gray-700 cursor-pointer\"\r\n                >\r\n                  <i className=\"ri-close-line\"></i>\r\n                </button>\r\n              </div>\r\n              {loadingGallery ? (\r\n                <div className=\"text-center py-8\">\r\n                  <i className=\"ri-loader-4-line animate-spin text-2xl text-gray-400\"></i>\r\n                  <p className=\"text-sm text-gray-500 mt-2\">Loading gallery...</p>\r\n                </div>\r\n              ) : gallery.length === 0 ? (\r\n                <div className=\"text-center py-8 text-sm text-gray-500\">\r\n                  No images in gallery\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-4 gap-2 max-h-64 overflow-y-auto\">\r\n                  {gallery.map((media) => {\r\n                    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n                    const mediaUrl = `${baseUrl}${media.filePath}`;\r\n                    return (\r\n                      <div\r\n                        key={media.id}\r\n                        onClick={() => handleSelectFromGallery(media)}\r\n                        className={`relative aspect-square cursor-pointer rounded-lg overflow-hidden border-2 ${\r\n                          selectedMedia?.id === media.id ? 'border-blue-500' : 'border-gray-200'\r\n                        } hover:border-blue-300`}\r\n                      >\r\n                        <img\r\n                          src={mediaUrl}\r\n                          alt={media.fileName}\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : inputMode === 'url' ? (\r\n            <div className=\"space-y-3\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h4 className=\"text-sm font-medium text-gray-700\">Enter Image URL</h4>\r\n                <button\r\n                  onClick={() => setInputMode(null)}\r\n                  className=\"text-sm text-gray-500 hover:text-gray-700 cursor-pointer\"\r\n                >\r\n                  <i className=\"ri-close-line\"></i>\r\n                </button>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={urlInput}\r\n                  onChange={(e) => setUrlInput(e.target.value)}\r\n                  placeholder=\"https://example.com/image.jpg or /uploads/2025/05/image.jpg\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                  onKeyPress={(e) => e.key === 'Enter' && handleUrlSubmit()}\r\n                />\r\n                <div className=\"flex space-x-2\">\r\n                  <button\r\n                    onClick={handleUrlSubmit}\r\n                    className=\"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 cursor-pointer\"\r\n                  >\r\n                    Use URL\r\n                  </button>\r\n                  {urlInput && (\r\n                    <div className=\"flex-1 border border-gray-200 rounded-lg p-2\">\r\n                      <img\r\n                        src={urlInput.startsWith('http') ? urlInput : getDefaultImageUrl(urlInput.replace('/uploads/', ''))}\r\n                        alt=\"Preview\"\r\n                        className=\"w-full h-20 object-cover rounded\"\r\n                        onError={(e) => {\r\n                          (e.target as HTMLImageElement).style.display = 'none';\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Supports local paths (/uploads/YYYY/MM/filename.jpg) or external URLs (https://...)\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center\">\r\n          <button\r\n            onClick={() => setInputMode(null)}\r\n            className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 cursor-pointer\"\r\n          >\r\n            <i className=\"ri-edit-line mr-2\"></i>Change Image\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype SectionTab = 'hero' | 'about' | 'stats' | 'products' | 'quality' | 'specialties' | 'testimonials' | 'contact';\n\ninterface HeroSection {\n  id?: number;\n  title: string;\n  subtitle: string;\n  backgroundImageId: number | null;\n  titleColor: string;\n  subtitleColor: string;\n  overlayOpacity: number;\n  backgroundImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface AboutParagraph {\n  id: number;\n  content: string;\n  orderIndex: number;\n}\n\ninterface AboutSection {\n  id?: number;\n  title: string | null;\n  subtitle: string | null;\n  introText: string | null;\n  mainImageId: number | null;\n  ctaText: string | null;\n  ctaUrl: string | null;\n  mainImage?: {\n    filePath: string;\n    altText: string;\n  };\n  paragraphs?: AboutParagraph[];\n}\n\ninterface Stat {\n  id: number;\n  iconClass: string;\n  imageId: number | null;\n  number: string;\n  label: string;\n  orderIndex: number;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface QualitySection {\n  id?: number;\n  title: string;\n  content: string;\n  imageId: number | null;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface ProductsSection {\n  id?: number;\n  heading: string;\n  description: string;\n  ctaText: string;\n  ctaUrl: string;\n}\n\ninterface ProductsCard {\n  id: number;\n  name: string;\n  backgroundImageId: number | null;\n  cardImageId: number | null;\n  internalLink: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  backgroundImage?: {\n    filePath: string;\n    altText: string;\n  };\n  cardImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface SpecialtiesSection {\n  id?: number;\n  heading: string;\n  description: string;\n  imageId: number | null;\n  ctaText: string;\n  ctaUrl: string;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface TestimonialsSection {\n  id?: number;\n  subtitle: string;\n  heading: string;\n}\n\ninterface ContactSection {\n  id?: number;\n  heading: string;\n  companyName: string;\n  address: string;\n  phone: string;\n  email: string;\n  imageId: number | null;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function HomePageManagement() {\n  const [activeSection, setActiveSection] = useState<SectionTab>('hero');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  // Hero Section\n  const [heroData, setHeroData] = useState<HeroSection>({\n    title: '',\n    subtitle: '',\n    backgroundImageId: null,\n    titleColor: '#FFFFFF',\n    subtitleColor: '#FFFFFF',\n    overlayOpacity: 40\n  });\n\n  // About Section\n  const [aboutData, setAboutData] = useState<AboutSection>({\n    title: null,\n    subtitle: null,\n    introText: null,\n    mainImageId: null,\n    ctaText: null,\n    ctaUrl: null\n  });\n  const [aboutParagraphs, setAboutParagraphs] = useState<AboutParagraph[]>([]);\n  const [showParagraphModal, setShowParagraphModal] = useState(false);\n  const [editingParagraph, setEditingParagraph] = useState<AboutParagraph | null>(null);\n\n  // Stats\n  const [stats, setStats] = useState<Stat[]>([]);\n  const [showStatModal, setShowStatModal] = useState(false);\n  const [editingStat, setEditingStat] = useState<Stat | null>(null);\n\n  // Quality Section\n  const [qualityData, setQualityData] = useState<QualitySection>({\n    title: '',\n    content: '',\n    imageId: null\n  });\n\n  // Products Section\n  const [productsData, setProductsData] = useState<ProductsSection>({\n    heading: '',\n    description: '',\n    ctaText: '',\n    ctaUrl: ''\n  });\n  const [productsCards, setProductsCards] = useState<ProductsCard[]>([]);\n  const [showProductCardModal, setShowProductCardModal] = useState(false);\n  const [editingProductCard, setEditingProductCard] = useState<ProductsCard | null>(null);\n\n  // Specialties Section\n  const [specialtiesData, setSpecialtiesData] = useState<SpecialtiesSection>({\n    heading: '',\n    description: '',\n    imageId: null,\n    ctaText: '',\n    ctaUrl: ''\n  });\n\n  // Testimonials Section\n  const [testimonialsData, setTestimonialsData] = useState<TestimonialsSection>({\n    subtitle: '',\n    heading: ''\n  });\n\n  // Contact Section\n  const [contactData, setContactData] = useState<ContactSection>({\n    heading: '',\n    companyName: '',\n    address: '',\n    phone: '',\n    email: '',\n    imageId: null\n  });\n\n  const sectionTabs = [\n    { id: 'hero' as SectionTab, label: 'Hero Section', icon: 'ri-image-line' },\n    { id: 'about' as SectionTab, label: 'About Section', icon: 'ri-information-line' },\n    { id: 'stats' as SectionTab, label: 'Statistics', icon: 'ri-bar-chart-line' },\n    { id: 'products' as SectionTab, label: 'Products Section', icon: 'ri-shopping-bag-line' },\n    { id: 'quality' as SectionTab, label: 'Quality Section', icon: 'ri-shield-check-line' },\n    { id: 'specialties' as SectionTab, label: 'Specialties Section', icon: 'ri-medicine-bottle-line' },\n    { id: 'testimonials' as SectionTab, label: 'Testimonials Section', icon: 'ri-quote-text-line' },\n    { id: 'contact' as SectionTab, label: 'Contact Section', icon: 'ri-phone-line' }\n  ];\n\n  // Fetch data on mount and section change\n  useEffect(() => {\n    fetchSectionData();\n  }, [activeSection]);\n\n  const fetchSectionData = async () => {\n    setLoading(true);\n    try {\n      switch (activeSection) {\n        case 'hero':\n          const heroRes = await api.get<HeroSection>('/home-hero-section');\n          if (heroRes.success && heroRes.data) {\n            setHeroData(heroRes.data as HeroSection);\n          }\n          break;\n        case 'about':\n          const aboutRes = await api.get<AboutSection>('/home-about-section');\n          if (aboutRes.success && aboutRes.data) {\n            const data = aboutRes.data as AboutSection;\n            setAboutData({\n              id: data.id,\n              title: data.title || null,\n              subtitle: data.subtitle || null,\n              introText: data.introText || null,\n              mainImageId: data.mainImageId || null,\n              ctaText: data.ctaText || null,\n              ctaUrl: data.ctaUrl || null,\n              mainImage: data.mainImage\n            });\n            setAboutParagraphs(data.paragraphs || []);\n          } else {\n            // Initialize with empty values if no data exists\n            setAboutData({\n              title: null,\n              subtitle: null,\n              introText: null,\n              mainImageId: null,\n              ctaText: null,\n              ctaUrl: null\n            });\n            setAboutParagraphs([]);\n          }\n          break;\n        case 'stats':\n          const statsRes = await api.get<Stat[]>('/home-stats');\n          if (statsRes.success && statsRes.data) {\n            setStats((statsRes.data as Stat[]).sort((a, b) => a.orderIndex - b.orderIndex));\n          }\n          break;\n        case 'products':\n          const productsRes = await api.get<ProductsSection>('/home-products-section');\n          if (productsRes.success && productsRes.data) {\n            setProductsData(productsRes.data as ProductsSection);\n          } else {\n            setProductsData({\n              heading: '',\n              description: '',\n              ctaText: '',\n              ctaUrl: ''\n            });\n          }\n          const productsCardsRes = await api.get<ProductsCard[]>('/home-products-cards');\n          if (productsCardsRes.success && productsCardsRes.data) {\n            setProductsCards((productsCardsRes.data as ProductsCard[]).sort((a, b) => a.orderIndex - b.orderIndex));\n          } else {\n            setProductsCards([]);\n          }\n          break;\n        case 'quality':\n          const qualityRes = await api.get<QualitySection>('/home-quality-section');\n          if (qualityRes.success && qualityRes.data) {\n            setQualityData(qualityRes.data as QualitySection);\n          }\n          break;\n        case 'specialties':\n          const specialtiesRes = await api.get<SpecialtiesSection>('/home-specialties-section');\n          if (specialtiesRes.success && specialtiesRes.data) {\n            setSpecialtiesData(specialtiesRes.data as SpecialtiesSection);\n          }\n          break;\n        case 'testimonials':\n          const testimonialsRes = await api.get<TestimonialsSection>('/home-testimonials-section');\n          if (testimonialsRes.success && testimonialsRes.data) {\n            setTestimonialsData(testimonialsRes.data as TestimonialsSection);\n          }\n          break;\n        case 'contact':\n          const contactRes = await api.get<ContactSection>('/home-contact-section');\n          if (contactRes.success && contactRes.data) {\n            setContactData(contactRes.data as ContactSection);\n          }\n          break;\n      }\n    } catch (error: any) {\n      console.error('Error fetching data:', error);\n      alert(error.message || 'Failed to load data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveHero = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-hero-section', heroData);\n      if (response.success) {\n        alert('Hero section saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveAbout = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-about-section', { ...aboutData, paragraphs: aboutParagraphs });\n      if (response.success) {\n        alert('About section saved successfully!');\n        // Refresh the data\n        const aboutRes = await api.get<AboutSection>('/home-about-section');\n        if (aboutRes.success && aboutRes.data) {\n          const data = aboutRes.data as AboutSection;\n          setAboutData({\n            id: data.id,\n            title: data.title || null,\n            subtitle: data.subtitle || null,\n            introText: data.introText || null,\n            mainImageId: data.mainImageId || null,\n            ctaText: data.ctaText || null,\n            ctaUrl: data.ctaUrl || null,\n            mainImage: data.mainImage\n          });\n          setAboutParagraphs(data.paragraphs || []);\n        }\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveParagraph = async (paragraph: AboutParagraph) => {\n    setSaving(true);\n    try {\n      if (paragraph.id) {\n        await api.put(`/home-about-paragraphs/${paragraph.id}`, paragraph);\n      } else {\n        await api.post('/home-about-paragraphs', { ...paragraph, orderIndex: aboutParagraphs.length });\n      }\n      setShowParagraphModal(false);\n      setEditingParagraph(null);\n      fetchSectionData();\n      alert('Paragraph saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteParagraph = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this paragraph?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/home-about-paragraphs/${id}`);\n      setAboutParagraphs(aboutParagraphs.filter(p => p.id !== id));\n      alert('Paragraph deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorderParagraphs = async (reorderedParagraphs: AboutParagraph[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedParagraphs.length; i++) {\n        await api.put(`/home-about-paragraphs/${reorderedParagraphs[i].id}`, {\n          ...reorderedParagraphs[i],\n          orderIndex: i\n        });\n      }\n      setAboutParagraphs(reorderedParagraphs);\n      alert('Paragraphs order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveStats = async (reorderedStats: Stat[]) => {\n    setSaving(true);\n    try {\n      // Update orderIndex for each stat\n      for (let i = 0; i < reorderedStats.length; i++) {\n        await api.put(`/home-stats/${reorderedStats[i].id}`, {\n          ...reorderedStats[i],\n          orderIndex: i\n        });\n      }\n      setStats(reorderedStats);\n      alert('Statistics order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveStat = async (stat: Stat) => {\n    setSaving(true);\n    try {\n      if (stat.id) {\n        await api.put(`/home-stats/${stat.id}`, stat);\n      } else {\n        await api.post('/home-stats', { ...stat, orderIndex: stats.length });\n      }\n      setShowStatModal(false);\n      setEditingStat(null);\n      fetchSectionData();\n      alert('Stat saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteStat = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this statistic?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/home-stats/${id}`);\n      setStats(stats.filter(s => s.id !== id));\n      alert('Stat deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveQuality = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-quality-section', qualityData);\n      if (response.success) {\n        alert('Quality section saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveProducts = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-products-section', productsData);\n      if (response.success) {\n        alert('Products section saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveProductCard = async (card: ProductsCard) => {\n    setSaving(true);\n    try {\n      if (card.id && card.id > 0) {\n        await api.put(`/home-products-cards/${card.id}`, card);\n      } else {\n        await api.post('/home-products-cards', { ...card, orderIndex: productsCards.length });\n      }\n      setShowProductCardModal(false);\n      setEditingProductCard(null);\n      const productsCardsRes = await api.get<ProductsCard[]>('/home-products-cards');\n      if (productsCardsRes.success && productsCardsRes.data) {\n        setProductsCards((productsCardsRes.data as ProductsCard[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n      alert('Product card saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save card');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteProductCard = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this product card?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/home-products-cards/${id}`);\n      setProductsCards(productsCards.filter(c => c.id !== id));\n      alert('Product card deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorderProductCards = async (reorderedCards: ProductsCard[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedCards.length; i++) {\n        await api.put(`/home-products-cards/${reorderedCards[i].id}`, {\n          ...reorderedCards[i],\n          orderIndex: i\n        });\n      }\n      setProductsCards(reorderedCards);\n      alert('Product cards order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveSpecialties = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-specialties-section', specialtiesData);\n      if (response.success) {\n        alert('Specialties section saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveTestimonials = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-testimonials-section', testimonialsData);\n      if (response.success) {\n        alert('Testimonials section saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveContact = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/home-contact-section', contactData);\n      if (response.success) {\n        alert('Contact section saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getImageUrl = (image: any): string => {\n    if (!image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${image.filePath}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Title */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Home Page Management</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage all sections of your home page</p>\n      </div>\n\n      {/* Section Tabs */}\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex items-center space-x-2 overflow-x-auto\">\n            {sectionTabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveSection(tab.id)}\n                className={`flex items-center space-x-2 px-4 py-3 font-medium text-sm whitespace-nowrap transition-all duration-300 border-b-2 cursor-pointer ${\n                  activeSection === tab.id\n                    ? 'text-blue-600 border-blue-600'\n                    : 'text-gray-600 border-transparent hover:text-blue-600'\n                }`}\n              >\n                <i className={tab.icon}></i>\n                <span>{tab.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Section Content */}\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n              <p className=\"text-gray-600 mt-2\">Loading...</p>\n            </div>\n          ) : (\n            <>\n              {activeSection === 'hero' && (\n                <HeroSectionEditor\n                  data={heroData}\n                  onChange={setHeroData}\n                  onSave={handleSaveHero}\n                  saving={saving}\n                  getImageUrl={getImageUrl}\n                />\n              )}\n              {activeSection === 'about' && (\n                <AboutSectionEditor\n                  data={aboutData}\n                  onChange={setAboutData}\n                  onSave={handleSaveAbout}\n                  saving={saving}\n                  getImageUrl={getImageUrl}\n                  paragraphs={aboutParagraphs}\n                  onAddParagraph={() => {\n                    setEditingParagraph({\n                      id: 0,\n                      content: '',\n                      orderIndex: aboutParagraphs.length\n                    });\n                    setShowParagraphModal(true);\n                  }}\n                  onEditParagraph={(p) => {\n                    setEditingParagraph(p);\n                    setShowParagraphModal(true);\n                  }}\n                  onDeleteParagraph={handleDeleteParagraph}\n                  onReorderParagraphs={handleReorderParagraphs}\n                />\n              )}\n              {activeSection === 'stats' && (\n                <StatsSectionEditor\n                  stats={stats}\n                  onReorder={handleSaveStats}\n                  onEdit={(stat) => {\n                    setEditingStat(stat);\n                    setShowStatModal(true);\n                  }}\n                  onDelete={handleDeleteStat}\n                  onAdd={() => {\n                    setEditingStat({\n                      id: 0,\n                      iconClass: '',\n                      imageId: null,\n                      number: '',\n                      label: '',\n                      orderIndex: stats.length\n                    });\n                    setShowStatModal(true);\n                  }}\n                  getImageUrl={getImageUrl}\n                />\n              )}\n              {activeSection === 'products' && (\n                <ProductsSectionEditor\n                  data={productsData}\n                  onChange={setProductsData}\n                  onSave={handleSaveProducts}\n                  saving={saving}\n                  cards={productsCards}\n                  onAddCard={() => {\n                    setEditingProductCard({\n                      id: 0,\n                      name: '',\n                      backgroundImageId: null,\n                      cardImageId: null,\n                      internalLink: null,\n                      orderIndex: productsCards.length,\n                      isActive: true\n                    });\n                    setShowProductCardModal(true);\n                  }}\n                  onEditCard={(card) => {\n                    setEditingProductCard(card);\n                    setShowProductCardModal(true);\n                  }}\n                  onDeleteCard={handleDeleteProductCard}\n                  onReorderCards={handleReorderProductCards}\n                  getImageUrl={getImageUrl}\n                />\n              )}\n              {activeSection === 'quality' && (\n                <QualitySectionEditor\n                  data={qualityData}\n                  onChange={setQualityData}\n                  onSave={handleSaveQuality}\n                  saving={saving}\n                  getImageUrl={getImageUrl}\n                />\n              )}\n              {activeSection === 'specialties' && (\n                <SpecialtiesSectionEditor\n                  data={specialtiesData}\n                  onChange={setSpecialtiesData}\n                  onSave={handleSaveSpecialties}\n                  saving={saving}\n                  getImageUrl={getImageUrl}\n                />\n              )}\n              {activeSection === 'testimonials' && (\n                <TestimonialsSectionEditor\n                  data={testimonialsData}\n                  onChange={setTestimonialsData}\n                  onSave={handleSaveTestimonials}\n                  saving={saving}\n                />\n              )}\n              {activeSection === 'contact' && (\n                <ContactSectionEditor\n                  data={contactData}\n                  onChange={setContactData}\n                  onSave={handleSaveContact}\n                  saving={saving}\n                  getImageUrl={getImageUrl}\n                />\n              )}\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Stat Modal */}\n      {showStatModal && editingStat && (\n        <StatModal\n          stat={editingStat}\n          onSave={handleSaveStat}\n          onClose={() => {\n            setShowStatModal(false);\n            setEditingStat(null);\n          }}\n          saving={saving}\n          getImageUrl={getImageUrl}\n        />\n      )}\n\n      {/* Paragraph Modal */}\n      {showParagraphModal && editingParagraph && (\n        <ParagraphModal\n          paragraph={editingParagraph}\n          onSave={handleSaveParagraph}\n          onClose={() => {\n            setShowParagraphModal(false);\n            setEditingParagraph(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {/* Product Card Modal */}\n      {showProductCardModal && editingProductCard && (\n        <ProductCardModal\n          card={editingProductCard}\n          onSave={handleSaveProductCard}\n          onClose={() => {\n            setShowProductCardModal(false);\n            setEditingProductCard(null);\n          }}\n          saving={saving}\n        />\n      )}\n    </div>\n  );\n}\n\n// Hero Section Editor\nfunction HeroSectionEditor({ data, onChange, onSave, saving, getImageUrl }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Hero Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <FormField label=\"Title\" required>\n          <input\n            type=\"text\"\n            value={data.title ?? ''}\n            onChange={(e) => onChange({ ...data, title: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter hero title\"\n          />\n        </FormField>\n\n        <FormField label=\"Subtitle\">\n          <input\n            type=\"text\"\n            value={data.subtitle ?? ''}\n            onChange={(e) => onChange({ ...data, subtitle: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter subtitle\"\n          />\n        </FormField>\n\n        <ImageSelector\n          value={data.backgroundImageId}\n          onChange={(id) => onChange({ ...data, backgroundImageId: id })}\n          label=\"Background Image\"\n        />\n\n        <FormField label=\"Title Color\">\n          <input\n            type=\"color\"\n            value={data.titleColor ?? '#FFFFFF'}\n            onChange={(e) => onChange({ ...data, titleColor: e.target.value })}\n            className=\"w-full h-10 border border-gray-300 rounded-lg cursor-pointer\"\n          />\n        </FormField>\n\n        <FormField label=\"Subtitle Color\">\n          <input\n            type=\"color\"\n            value={data.subtitleColor ?? '#FFFFFF'}\n            onChange={(e) => onChange({ ...data, subtitleColor: e.target.value })}\n            className=\"w-full h-10 border border-gray-300 rounded-lg cursor-pointer\"\n          />\n        </FormField>\n\n        <FormField label=\"Overlay Opacity\" hint=\"0-100\">\n          <input\n            type=\"number\"\n            min=\"0\"\n            max=\"100\"\n            value={data.overlayOpacity ?? 40}\n            onChange={(e) => onChange({ ...data, overlayOpacity: parseInt(e.target.value) || 40 })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n      </div>\n\n      {/* Preview */}\n      {data.backgroundImage && (\n        <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n          <p className=\"text-sm font-medium text-gray-700 mb-3\">Preview:</p>\n          <div className=\"relative rounded-lg overflow-hidden\" style={{ height: '300px' }}>\n            <img\n              src={getImageUrl(data.backgroundImage)}\n              alt=\"Preview\"\n              className=\"w-full h-full object-cover\"\n            />\n            <div\n              className=\"absolute inset-0 flex items-center justify-center text-center px-8\"\n              style={{\n                backgroundColor: `rgba(0,0,0,${data.overlayOpacity / 100})`\n              }}\n            >\n              <div>\n                <h1 style={{ color: data.titleColor }} className=\"text-3xl font-bold mb-2\">\n                  {data.title}\n                </h1>\n                <p style={{ color: data.subtitleColor }} className=\"text-lg\">\n                  {data.subtitle}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// About Section Editor\nfunction AboutSectionEditor({ \n  data, \n  onChange, \n  onSave, \n  saving, \n  getImageUrl,\n  paragraphs = [],\n  onAddParagraph,\n  onEditParagraph,\n  onDeleteParagraph,\n  onReorderParagraphs\n}: any) {\n  // Safety checks\n  const safeData = data || {};\n  const safeParagraphs = Array.isArray(paragraphs) ? paragraphs : [];\n  \n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">About Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Title\">\n            <input\n              type=\"text\"\n              value={safeData.title || ''}\n              onChange={(e) => onChange({ ...safeData, title: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Section Title (optional)\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Subtitle\">\n            <input\n              type=\"text\"\n              value={safeData.subtitle || ''}\n              onChange={(e) => onChange({ ...safeData, subtitle: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Section Subtitle (optional)\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Intro Text (Fallback if no paragraphs)\">\n            <textarea\n              value={safeData.introText || ''}\n              onChange={(e) => onChange({ ...safeData, introText: e.target.value })}\n              rows={4}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Enter intro text (used if no paragraphs are added)\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <ImageSelector\n            value={safeData.mainImageId || null}\n            onChange={(id) => onChange({ ...safeData, mainImageId: id })}\n            label=\"Section Image\"\n          />\n        </div>\n\n        <FormField label=\"CTA Text\">\n          <input\n            type=\"text\"\n              value={safeData.ctaText || ''}\n              onChange={(e) => onChange({ ...safeData, ctaText: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"More About Us\"\n          />\n        </FormField>\n\n        <FormField label=\"CTA URL\">\n          <input\n            type=\"text\"\n              value={safeData.ctaUrl || ''}\n              onChange={(e) => onChange({ ...safeData, ctaUrl: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"/about\"\n          />\n        </FormField>\n      </div>\n\n      {/* Paragraphs Section */}\n      <div className=\"border-t pt-6 mt-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h4 className=\"text-md font-semibold text-gray-900\">Paragraphs</h4>\n          <button\n            onClick={() => onAddParagraph && onAddParagraph()}\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>Add Paragraph\n          </button>\n        </div>\n\n        <div className=\"bg-gray-50 p-4 rounded-lg\">\n          <p className=\"text-sm text-gray-600 mb-4\">\n            <i className=\"ri-information-line mr-2\"></i>\n            Add multiple paragraphs. Drag and drop to reorder. If paragraphs are added, they will be displayed instead of the intro text.\n          </p>\n\n          <DragDropList\n            items={safeParagraphs}\n            onReorder={onReorderParagraphs || (() => {})}\n            keyExtractor={(p: any) => p.id}\n            emptyMessage=\"No paragraphs yet. Click 'Add Paragraph' to get started!\"\n            renderItem={(paragraph: any) => (\n              <div className=\"flex items-center justify-between w-full\">\n                <div className=\"flex-1\">\n                  <p className=\"text-sm text-gray-700 line-clamp-2\">{paragraph.content}</p>\n                </div>\n                <div className=\"flex items-center space-x-2 ml-4\">\n                  <button\n                    onClick={() => onEditParagraph && onEditParagraph(paragraph)}\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                  >\n                    <i className=\"ri-edit-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => onDeleteParagraph && onDeleteParagraph(paragraph.id)}\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                  >\n                    <i className=\"ri-delete-bin-line\"></i>\n                  </button>\n                </div>\n              </div>\n            )}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Paragraph Modal\nfunction ParagraphModal({ paragraph, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(paragraph || { id: 0, content: '', orderIndex: 0 });\n  \n  // Update formData when paragraph prop changes\n  useEffect(() => {\n    if (paragraph) {\n      setFormData(paragraph);\n    }\n  }, [paragraph]);\n\n  return (\n    <Modal isOpen={true} onClose={onClose} title={paragraph?.id ? 'Edit Paragraph' : 'Add Paragraph'} size=\"md\">\n      <div className=\"space-y-4\">\n        <FormField label=\"Content\" required>\n          <textarea\n            value={formData?.content || ''}\n            onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n            rows={6}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter paragraph content\"\n          />\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData?.content}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\n// Stats Section Editor\nfunction StatsSectionEditor({ stats, onReorder, onEdit, onDelete, onAdd, getImageUrl }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Statistics</h3>\n        <button\n          onClick={onAdd}\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n        >\n          <i className=\"ri-add-line mr-2\"></i>Add Statistic\n        </button>\n      </div>\n\n      <div className=\"bg-gray-50 p-4 rounded-lg\">\n        <p className=\"text-sm text-gray-600 mb-4\">\n          <i className=\"ri-information-line mr-2\"></i>\n          Drag and drop items to reorder them. Changes are saved automatically.\n        </p>\n\n        <DragDropList\n          items={stats}\n          onReorder={onReorder}\n          keyExtractor={(stat: Stat) => stat.id}\n          emptyMessage=\"No statistics yet. Click 'Add Statistic' to get started!\"\n          renderItem={(stat: Stat) => (\n            <div className=\"flex items-center justify-between w-full\">\n              <div className=\"flex items-center space-x-4\">\n                {stat.image && stat.image.filePath ? (\n                  <img \n                    src={getImageUrl(stat.image)} \n                    alt={stat.image.altText || stat.label} \n                    className=\"h-10 w-10 object-contain\"\n                  />\n                ) : stat.iconClass ? (\n                  <i className={`${stat.iconClass} text-2xl text-blue-600`}></i>\n                ) : (\n                  <div className=\"h-10 w-10 bg-gray-200 rounded flex items-center justify-center\">\n                    <i className=\"ri-image-line text-gray-400\"></i>\n                  </div>\n                )}\n                <div>\n                  <p className=\"font-semibold text-gray-900\">{stat.number}</p>\n                  <p className=\"text-sm text-gray-600\">{stat.label}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => onEdit(stat)}\n                  className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                >\n                  <i className=\"ri-edit-line\"></i>\n                </button>\n                <button\n                  onClick={() => onDelete(stat.id)}\n                  className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                >\n                  <i className=\"ri-delete-bin-line\"></i>\n                </button>\n              </div>\n            </div>\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n\n// Quality Section Editor\nfunction QualitySectionEditor({ data, onChange, onSave, saving, getImageUrl }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Quality Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <FormField label=\"Title\" required>\n          <input\n            type=\"text\"\n            value={data.title || ''}\n            onChange={(e) => onChange({ ...data, title: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Content\" required>\n            <textarea\n              value={data.content || ''}\n              onChange={(e) => onChange({ ...data, content: e.target.value })}\n              rows={6}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <ImageSelector\n            value={data.imageId}\n            onChange={(id) => onChange({ ...data, imageId: id })}\n            label=\"Section Image\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Products Section Editor\nfunction ProductsSectionEditor({ data = {}, onChange, onSave, saving, cards = [], onAddCard, onEditCard, onDeleteCard, onReorderCards, getImageUrl }: any) {\n  const getCardImageUrl = (card: any): string => {\n    if (!card || !card.cardImage) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${card.cardImage.filePath}`;\n  };\n\n  const safeCards = Array.isArray(cards) ? cards : [];\n  const safeData = data || {};\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Products Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Heading\">\n            <input\n              type=\"text\"\n              value={safeData.heading || ''}\n              onChange={(e) => onChange && onChange({ ...safeData, heading: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Our Products\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Description\">\n            <textarea\n              value={safeData.description || ''}\n              onChange={(e) => onChange && onChange({ ...safeData, description: e.target.value })}\n              rows={6}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Enter products section description\"\n            />\n          </FormField>\n        </div>\n\n        <FormField label=\"CTA Text\">\n          <input\n            type=\"text\"\n            value={safeData.ctaText || ''}\n            onChange={(e) => onChange && onChange({ ...safeData, ctaText: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"View All Products\"\n          />\n        </FormField>\n\n        <FormField label=\"CTA URL\">\n          <input\n            type=\"text\"\n            value={safeData.ctaUrl || ''}\n            onChange={(e) => onChange && onChange({ ...safeData, ctaUrl: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"/products\"\n          />\n        </FormField>\n      </div>\n\n        {/* Products Cards Section */}\n      <div className=\"border-t pt-6 mt-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">Products Cards</h3>\n          <button\n            onClick={onAddCard}\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>Add Card\n          </button>\n        </div>\n\n        {safeCards.length === 0 ? (\n          <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n            <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\n            <p className=\"text-gray-500\">No cards yet. Add your first product card!</p>\n          </div>\n        ) : (\n          <DragDropList\n            items={safeCards}\n            onReorder={onReorderCards || (() => {})}\n            onReorder={onReorderCards}\n            keyExtractor={(card: any) => card.id}\n            emptyMessage=\"No cards yet. Click 'Add Card' to get started!\"\n            renderItem={(card: any) => (\n              <div className=\"flex items-center space-x-4 w-full\">\n                {card.cardImage && (\n                  <img\n                    src={getCardImageUrl(card)}\n                    alt={card.name || 'Card image'}\n                    className=\"w-16 h-16 object-cover rounded-lg\"\n                  />\n                )}\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-gray-900\">{card.name || 'Unnamed Card'}</h3>\n                  {card.internalLink && (\n                    <p className=\"text-sm text-gray-600\">Link: {card.internalLink}</p>\n                  )}\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <span className={`px-2 py-1 text-xs rounded-full ${\n                    card.isActive \n                      ? 'bg-green-100 text-green-800' \n                      : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {card.isActive ? 'Active' : 'Inactive'}\n                  </span>\n                  <button\n                    onClick={() => onEditCard && onEditCard(card)}\n                    className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                    title=\"Edit\"\n                  >\n                    <i className=\"ri-edit-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => onDeleteCard && onDeleteCard(card.id)}\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                    title=\"Delete\"\n                  >\n                    <i className=\"ri-delete-bin-line\"></i>\n                  </button>\n                </div>\n              </div>\n            )}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Specialties Section Editor\nfunction SpecialtiesSectionEditor({ data, onChange, onSave, saving, getImageUrl }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Specialties Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Heading\">\n            <input\n              type=\"text\"\n              value={data.heading || ''}\n              onChange={(e) => onChange({ ...data, heading: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Our Specialties\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Description\">\n            <textarea\n              value={data.description || ''}\n              onChange={(e) => onChange({ ...data, description: e.target.value })}\n              rows={6}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Enter specialties section description\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <ImageSelector\n            value={data.imageId}\n            onChange={(id) => onChange({ ...data, imageId: id })}\n            label=\"Section Image\"\n          />\n        </div>\n\n        <FormField label=\"CTA Text\">\n          <input\n            type=\"text\"\n            value={data.ctaText || ''}\n            onChange={(e) => onChange({ ...data, ctaText: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Explore Products\"\n          />\n        </FormField>\n\n        <FormField label=\"CTA URL\">\n          <input\n            type=\"text\"\n            value={data.ctaUrl || ''}\n            onChange={(e) => onChange({ ...data, ctaUrl: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"/products\"\n          />\n        </FormField>\n      </div>\n    </div>\n  );\n}\n\n// Testimonials Section Editor\nfunction TestimonialsSectionEditor({ data, onChange, onSave, saving }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Testimonials Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <FormField label=\"Subtitle\">\n          <input\n            type=\"text\"\n            value={data.subtitle || ''}\n            onChange={(e) => onChange({ ...data, subtitle: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Testimonial\"\n          />\n        </FormField>\n\n        <FormField label=\"Heading\">\n          <input\n            type=\"text\"\n            value={data.heading || ''}\n            onChange={(e) => onChange({ ...data, heading: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Client Stories & Experiences\"\n          />\n        </FormField>\n      </div>\n\n      <div className=\"bg-blue-50 p-4 rounded-lg\">\n        <p className=\"text-sm text-gray-600\">\n          <i className=\"ri-information-line mr-2\"></i>\n          Note: Testimonials content is managed separately. This section only controls the header.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Contact Section Editor\nfunction ContactSectionEditor({ data, onChange, onSave, saving, getImageUrl }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">Contact Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Heading\">\n            <input\n              type=\"text\"\n              value={data.heading || ''}\n              onChange={(e) => onChange({ ...data, heading: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"Contact Us\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Company Name\">\n            <input\n              type=\"text\"\n              value={data.companyName || ''}\n              onChange={(e) => onChange({ ...data, companyName: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"ADONIS MEDICAL SYSTEMS PVT LTD\"\n            />\n          </FormField>\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Address\">\n            <textarea\n              value={data.address || ''}\n              onChange={(e) => onChange({ ...data, address: e.target.value })}\n              rows={3}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"E-70, PHASE- VIII, INDUSTRIAL AREA, MOHALI, 160071.\"\n            />\n          </FormField>\n        </div>\n\n        <FormField label=\"Phone\">\n          <input\n            type=\"text\"\n            value={data.phone || ''}\n            onChange={(e) => onChange({ ...data, phone: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"9872003273\"\n          />\n        </FormField>\n\n        <FormField label=\"Email\">\n          <input\n            type=\"email\"\n            value={data.email || ''}\n            onChange={(e) => onChange({ ...data, email: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"support@adonismedical.com\"\n          />\n        </FormField>\n\n        <div className=\"md:col-span-2\">\n          <ImageSelector\n            value={data.imageId}\n            onChange={(id) => onChange({ ...data, imageId: id })}\n            label=\"Section Image\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Stat Modal\nfunction StatModal({ stat, onSave, onClose, saving, getImageUrl }: any) {\n  const [formData, setFormData] = useState(stat);\n\n  // Validation: Either iconClass or imageId must be provided\n  const isValid = formData.number && formData.label && (formData.iconClass || formData.imageId);\n\n  return (\n    <Modal isOpen={true} onClose={onClose} title={stat.id ? 'Edit Statistic' : 'Add Statistic'} size=\"md\">\n      <div className=\"space-y-4\">\n        <FormField label=\"Icon Class\" hint=\"Use RemixIcon class names (e.g., ri-user-line) or upload an image below\">\n          <input\n            type=\"text\"\n            value={formData.iconClass || ''}\n            onChange={(e) => setFormData({ ...formData, iconClass: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"ri-number-1\"\n          />\n          {formData.iconClass && (\n            <div className=\"mt-2 text-xs text-gray-500\">\n              Preview: <i className={formData.iconClass}></i>\n            </div>\n          )}\n        </FormField>\n\n        <div className=\"border-t pt-4\">\n          <p className=\"text-sm font-medium text-gray-700 mb-2\">OR</p>\n          <ImageSelector\n            value={formData.imageId || null}\n            onChange={(id) => setFormData({ ...formData, imageId: id })}\n            label=\"Upload Icon Image (JPG, PNG, SVG, etc.)\"\n          />\n          {formData.image && formData.image.filePath && (\n            <div className=\"mt-2\">\n              <p className=\"text-xs text-gray-500 mb-1\">Current Image:</p>\n              <img \n                src={getImageUrl(formData.image)} \n                alt={formData.image.altText || 'Stat icon'} \n                className=\"h-12 w-12 object-contain border border-gray-200 rounded\"\n              />\n            </div>\n          )}\n        </div>\n\n        <FormField label=\"Number/Value\" required>\n          <input\n            type=\"text\"\n            value={formData.number || ''}\n            onChange={(e) => setFormData({ ...formData, number: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"100+\"\n          />\n        </FormField>\n\n        <FormField label=\"Label\" required>\n          <input\n            type=\"text\"\n            value={formData.label || ''}\n            onChange={(e) => setFormData({ ...formData, label: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Happy Clients\"\n          />\n        </FormField>\n\n        <div className=\"bg-blue-50 p-3 rounded-lg\">\n          <p className=\"text-xs text-gray-600\">\n            <i className=\"ri-information-line mr-1\"></i>\n            You can use either an icon class or upload an image. If both are provided, the image will take priority.\n          </p>\n        </div>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !isValid}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\n// Product Card Modal\nfunction ProductCardModal({ card, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<ProductsCard>(card);\n\n  useEffect(() => {\n    setFormData(card);\n  }, [card]);\n\n  return (\n    <Modal\n      isOpen={true}\n      onClose={onClose}\n      title={card.id && card.id > 0 ? 'Edit Product Card' : 'Add New Product Card'}\n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Card Name\" required>\n          <input\n            type=\"text\"\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"HF Mobile\"\n          />\n        </FormField>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <ImageSelector\n            value={formData.backgroundImageId}\n            onChange={(id) => setFormData({ ...formData, backgroundImageId: id })}\n            label=\"Background Image\"\n          />\n\n          <ImageSelector\n            value={formData.cardImageId}\n            onChange={(id) => setFormData({ ...formData, cardImageId: id })}\n            label=\"Card Image\"\n          />\n        </div>\n\n        <FormField label=\"Internal Link\" hint=\"Page URL to redirect to (e.g., /products/hf-mobile)\">\n          <input\n            type=\"text\"\n            value={formData.internalLink || ''}\n            onChange={(e) => setFormData({ ...formData, internalLink: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"/products/hf-mobile\"\n          />\n        </FormField>\n\n        <FormField label=\"Status\">\n          <select\n            value={formData.isActive ? 'active' : 'inactive'}\n            onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.name}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : card.id && card.id > 0 ? 'Update Card' : 'Create Card'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype SectionTab = 'header' | 'footer';\n\ninterface NavigationItem {\n  id: number;\n  label: string;\n  url: string | null;\n  parentId: number | null;\n  orderIndex: number;\n  isActive: boolean;\n  openInNewTab: boolean;\n  children?: NavigationItem[];\n}\n\ninterface FooterSection {\n  id: number;\n  title: string;\n  orderIndex: number;\n  links?: FooterLink[];\n}\n\ninterface FooterLink {\n  id: number;\n  footerSectionId: number;\n  label: string;\n  url: string;\n  iconSvg: string | null;\n  iconImageId: number | null;\n  orderIndex: number;\n  iconImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface FooterLogo {\n  id: number;\n  name: string;\n  logoImageId: number | null;\n  orderIndex: number;\n  isActive: boolean;\n  logoImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function HeaderFooterManagement() {\n  const [activeSection, setActiveSection] = useState<SectionTab>('header');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [navItems, setNavItems] = useState<NavigationItem[]>([]);\n  const [showNavModal, setShowNavModal] = useState(false);\n  const [editingNavItem, setEditingNavItem] = useState<NavigationItem | null>(null);\n\n  const [footerSections, setFooterSections] = useState<FooterSection[]>([]);\n  const [showSectionModal, setShowSectionModal] = useState(false);\n  const [showLinkModal, setShowLinkModal] = useState(false);\n  const [editingSection, setEditingSection] = useState<FooterSection | null>(null);\n  const [editingLink, setEditingLink] = useState<FooterLink | null>(null);\n  const [selectedSectionId, setSelectedSectionId] = useState<number | null>(null);\n  \n  // Footer Logos\n  const [footerLogos, setFooterLogos] = useState<FooterLogo[]>([]);\n  const [showLogoModal, setShowLogoModal] = useState(false);\n  const [editingLogo, setEditingLogo] = useState<FooterLogo | null>(null);\n  \n  // Social Links\n  const [socialLinks, setSocialLinks] = useState<any[]>([]);\n  const [showSocialModal, setShowSocialModal] = useState(false);\n  const [editingSocial, setEditingSocial] = useState<any | null>(null);\n\n  useEffect(() => {\n    if (activeSection === 'header') {\n      fetchNavItems();\n    } else {\n      fetchFooterSections();\n      fetchFooterLogos();\n      fetchSocialLinks();\n    }\n  }, [activeSection]);\n\n  const fetchNavItems = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<NavigationItem[]>('/navigation');\n      if (response.success && response.data) {\n        const allItems = response.data as NavigationItem[];\n        // Get top-level items (no parentId)\n        const topLevelItems = allItems\n          .filter(item => !item.parentId)\n          .sort((a, b) => a.orderIndex - b.orderIndex);\n        \n        // Attach children to each parent item\n        const itemsWithChildren = topLevelItems.map(item => {\n          const children = allItems\n            .filter(child => child.parentId === item.id)\n            .sort((a, b) => a.orderIndex - b.orderIndex);\n          return { ...item, children: children.length > 0 ? children : undefined };\n        });\n        \n        setNavItems(itemsWithChildren);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFooterSections = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<FooterSection[]>('/footer/sections');\n      if (response.success && response.data) {\n        const sections = (response.data as FooterSection[])\n          .sort((a, b) => a.orderIndex - b.orderIndex);\n        setFooterSections(sections);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFooterLogos = async () => {\n    try {\n      const response = await api.get<FooterLogo[]>('/footer/logos');\n      if (response.success && response.data) {\n        setFooterLogos((response.data as FooterLogo[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching footer logos:', error);\n    }\n  };\n\n  const fetchSocialLinks = async () => {\n    try {\n      const response = await api.get<any[]>('/social-links');\n      if (response.success && response.data) {\n        setSocialLinks((response.data as any[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching social links:', error);\n    }\n  };\n\n  const handleSaveNavItem = async (item: NavigationItem) => {\n    setSaving(true);\n    try {\n      if (item.id && item.id > 0) {\n        await api.put(`/navigation/${item.id}`, item);\n      } else {\n        await api.post('/navigation', { ...item, orderIndex: navItems.length });\n      }\n      setShowNavModal(false);\n      setEditingNavItem(null);\n      fetchNavItems();\n      alert('Navigation item saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteNavItem = async (id: number) => {\n    if (!confirm('Delete this navigation item?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/navigation/${id}`);\n      setNavItems(navItems.filter(n => n.id !== id));\n      alert('Navigation item deleted!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveFooterSection = async (section: FooterSection) => {\n    setSaving(true);\n    try {\n      if (section.id && section.id > 0) {\n        await api.put(`/footer/sections/${section.id}`, section);\n      } else {\n        await api.post('/footer/sections', { ...section, orderIndex: footerSections.length });\n      }\n      setShowSectionModal(false);\n      setEditingSection(null);\n      fetchFooterSections();\n      alert('Footer section saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteFooterSection = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this footer section? This will also delete all links within this section.')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/footer/sections/${id}`);\n      setFooterSections(footerSections.filter(s => s.id !== id));\n      alert('Footer section deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveFooterLink = async (link: FooterLink) => {\n    setSaving(true);\n    try {\n      if (link.id && link.id > 0) {\n        await api.put(`/footer/links/${link.id}`, link);\n      } else {\n        const section = footerSections.find(s => s.id === selectedSectionId);\n        await api.post('/footer/links', { ...link, footerSectionId: selectedSectionId, iconSvg: link.iconSvg || null, iconImageId: link.iconImageId || null, orderIndex: section?.links?.length || 0 });\n      }\n      setShowLinkModal(false);\n      setEditingLink(null);\n      fetchFooterSections();\n      alert('Footer link saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteFooterLink = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this link?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/footer/links/${id}`);\n      fetchFooterSections();\n      alert('Footer link deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveLogo = async (logo: FooterLogo) => {\n    setSaving(true);\n    try {\n      if (logo.id && logo.id > 0) {\n        await api.put(`/footer/logos/${logo.id}`, logo);\n      } else {\n        await api.post('/footer/logos', logo);\n      }\n      setShowLogoModal(false);\n      setEditingLogo(null);\n      fetchFooterLogos();\n      alert('Logo saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveSocial = async (social: any) => {\n    setSaving(true);\n    try {\n      if (social.id && social.id > 0) {\n        await api.put(`/social-links/${social.id}`, social);\n      } else {\n        await api.post('/social-links', social);\n      }\n      setShowSocialModal(false);\n      setEditingSocial(null);\n      fetchSocialLinks();\n      alert('Social link saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Header & Footer Management</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage navigation menu and footer content</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button onClick={() => setActiveSection('header')} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${activeSection === 'header' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\n              Navigation\n            </button>\n            <button onClick={() => setActiveSection('footer')} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${activeSection === 'footer' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\n              Footer\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n            </div>\n          ) : activeSection === 'header' ? (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Navigation Menu</h3>\n                <button onClick={() => { setEditingNavItem({ id: 0, label: '', url: null, parentId: null, orderIndex: navItems.length, isActive: true, openInNewTab: false }); setShowNavModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\n                  <i className=\"ri-add-line mr-2\"></i>Add Item\n                </button>\n              </div>\n              {navItems.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-menu-line text-4xl text-gray-400 mb-2\"></i>\n                  <p className=\"text-gray-500\">No navigation items yet</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {navItems.map((item) => (\n                    <div key={item.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2\">\n                            <h4 className=\"font-semibold text-gray-900\">{item.label}</h4>\n                            {item.children && item.children.length > 0 && (\n                              <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\">\n                                {item.children.length} sub-menu{item.children.length !== 1 ? 's' : ''}\n                              </span>\n                            )}\n                          </div>\n                          {item.url && <p className=\"text-sm text-gray-600 mt-1\">{item.url}</p>}\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <span className={`px-2 py-1 text-xs rounded-full ${item.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                            {item.isActive ? 'Active' : 'Inactive'}\n                          </span>\n                          <button \n                            onClick={() => { \n                              setEditingNavItem({ id: 0, label: '', url: null, parentId: item.id, orderIndex: item.children?.length || 0, isActive: true, openInNewTab: false }); \n                              setShowNavModal(true); \n                            }} \n                            className=\"px-3 py-1 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n                            title=\"Add Sub-menu\"\n                          >\n                            <i className=\"ri-add-line mr-1\"></i>Sub-menu\n                          </button>\n                          <button onClick={() => { setEditingNavItem(item); setShowNavModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                          <button onClick={() => handleDeleteNavItem(item.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </div>\n                      </div>\n                      {/* Show children/sub-menus */}\n                      {item.children && item.children.length > 0 && (\n                        <div className=\"ml-4 mt-3 space-y-2 border-l-2 border-gray-300 pl-4\">\n                          {item.children.map((child) => (\n                            <div key={child.id} className=\"flex items-center justify-between bg-white border border-gray-200 rounded p-2\">\n                              <div>\n                                <span className=\"text-sm font-medium text-gray-700\">{child.label}</span>\n                                {child.url && <span className=\"text-xs text-gray-500 ml-2\">{child.url}</span>}\n                              </div>\n                              <div className=\"flex items-center space-x-2\">\n                                <span className={`px-2 py-0.5 text-xs rounded-full ${child.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                                  {child.isActive ? 'Active' : 'Inactive'}\n                                </span>\n                                <button onClick={() => { setEditingNavItem(child); setShowNavModal(true); }} className=\"p-1 text-green-600 hover:bg-green-50 rounded cursor-pointer\">\n                                  <i className=\"ri-edit-line text-sm\"></i>\n                                </button>\n                                <button onClick={() => handleDeleteNavItem(child.id)} className=\"p-1 text-red-600 hover:bg-red-50 rounded cursor-pointer\">\n                                  <i className=\"ri-delete-bin-line text-sm\"></i>\n                                </button>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"space-y-8\">\n              {/* Logo and Social Media Section */}\n              <div className=\"border-b pb-6\">\n                <h3 className=\"text-lg font-semibold mb-4\">Logo and Social Media Icons</h3>\n                \n                <div className=\"space-y-4 mb-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <h4 className=\"text-md font-medium text-gray-700\">Logos</h4>\n                    <button \n                      onClick={() => {\n                        const existingRefex = footerLogos.find(l => l.name === 'refex');\n                        const existingAdonis = footerLogos.find(l => l.name === 'adonis');\n                        if (!existingRefex) {\n                          setEditingLogo({ id: 0, name: 'refex', logoImageId: null, orderIndex: 0, isActive: true });\n                          setShowLogoModal(true);\n                        } else if (!existingAdonis) {\n                          setEditingLogo({ id: 0, name: 'adonis', logoImageId: null, orderIndex: 1, isActive: true });\n                          setShowLogoModal(true);\n                        }\n                      }}\n                      className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 cursor-pointer\"\n                    >\n                      <i className=\"ri-add-line mr-1\"></i>Add Logo\n                    </button>\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    {footerLogos.map((logo) => (\n                      <div key={logo.id} className=\"border border-gray-200 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"font-medium capitalize\">{logo.name} Logo</span>\n                          <button \n                            onClick={() => { setEditingLogo(logo); setShowLogoModal(true); }}\n                            className=\"p-1 text-green-600 hover:bg-green-50 rounded cursor-pointer\"\n                          >\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                        </div>\n                        {logo.logoImage && (\n                          <img \n                            src={getLogoImageUrl(logo)} \n                            alt={`${logo.name} logo`}\n                            className=\"h-12 w-auto object-contain\"\n                          />\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h4 className=\"text-md font-medium text-gray-700\">Social Media Icons</h4>\n                    <button \n                      onClick={() => {\n                        setEditingSocial({ id: 0, platform: '', url: '', iconClass: null, orderIndex: socialLinks.length, isActive: true });\n                        setShowSocialModal(true);\n                      }}\n                      className=\"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 cursor-pointer\"\n                    >\n                      <i className=\"ri-add-line mr-1\"></i>Add Social Link\n                    </button>\n                  </div>\n                  {socialLinks.length === 0 ? (\n                    <p className=\"text-sm text-gray-500\">No social links yet</p>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {socialLinks.map((social) => (\n                        <div key={social.id} className=\"flex items-center justify-between bg-gray-50 p-3 rounded\">\n                          <div className=\"flex items-center space-x-3\">\n                            {social.iconClass && <i className={`${social.iconClass} text-xl text-[#FF6B35]`}></i>}\n                            <div>\n                              <p className=\"font-medium\">{social.platform}</p>\n                              <p className=\"text-sm text-gray-600\">{social.url}</p>\n                            </div>\n                          </div>\n                          <button \n                            onClick={() => { setEditingSocial(social); setShowSocialModal(true); }}\n                            className=\"p-1 text-green-600 hover:bg-green-50 rounded cursor-pointer\"\n                          >\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Footer Sections */}\n              <div>\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <i className=\"ri-information-line text-blue-600 text-xl mt-0.5\"></i>\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-blue-800\">\n                        <strong>Tip:</strong> Create sections like \"Quick Links\", \"Our Products\", and \"Contact Information\". For Contact Information, upload icon images (JPG, PNG, SVG) for Phone, Email, and Location.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex justify-between mb-4\">\n                  <h3 className=\"text-lg font-semibold\">Footer Sections</h3>\n                  <button onClick={() => { setEditingSection({ id: 0, title: '', orderIndex: footerSections.length }); setShowSectionModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\n                    <i className=\"ri-add-line mr-2\"></i>Add Section\n                  </button>\n                </div>\n                {footerSections.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-layout-bottom-line text-4xl text-gray-400 mb-2\"></i>\n                  <p className=\"text-gray-500\">No footer sections yet</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {footerSections.map((section) => (\n                    <div key={section.id} className=\"border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <h4 className=\"font-semibold text-gray-900\">{section.title}</h4>\n                        <div className=\"flex items-center space-x-2\">\n                          <button onClick={() => { setSelectedSectionId(section.id); setEditingLink({ id: 0, footerSectionId: section.id, label: '', url: '', iconImageId: null, orderIndex: section.links?.length || 0 }); setShowLinkModal(true); }} className=\"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer text-sm\">\n                            <i className=\"ri-add-line mr-1\"></i>Add Link\n                          </button>\n                          <button onClick={() => { setEditingSection(section); setShowSectionModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\" title=\"Edit Section\">\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                          <button onClick={() => handleDeleteFooterSection(section.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\" title=\"Delete Section\">\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </div>\n                      </div>\n                      {section.links && section.links.length > 0 && (\n                        <div className=\"space-y-2\">\n                          {section.links.map((link) => (\n                            <div key={link.id} className=\"flex items-center justify-between bg-gray-50 p-2 rounded\">\n                              <div className=\"flex items-center space-x-2 flex-1\">\n                                {link.iconImage && (\n                                  <img \n                                    src={getLinkIconImageUrl(link)} \n                                    alt={link.label}\n                                    className=\"w-5 h-5 object-contain\"\n                                  />\n                                )}\n                                {!link.iconImage && link.iconSvg && (\n                                  <div className=\"w-5 h-5 flex items-center justify-center text-[#FF6B35]\" dangerouslySetInnerHTML={{ __html: link.iconSvg }} />\n                                )}\n                                <span className=\"text-sm text-gray-700\">{link.label} - {link.url}</span>\n                              </div>\n                              <div className=\"flex items-center space-x-1\">\n                                <button onClick={() => { setEditingLink(link); setShowLinkModal(true); }} className=\"p-1 text-green-600 hover:bg-green-50 rounded cursor-pointer\" title=\"Edit Link\">\n                                  <i className=\"ri-edit-line text-sm\"></i>\n                                </button>\n                                <button onClick={() => handleDeleteFooterLink(link.id)} className=\"p-1 text-red-600 hover:bg-red-50 rounded cursor-pointer\" title=\"Delete Link\">\n                                  <i className=\"ri-delete-bin-line text-sm\"></i>\n                                </button>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showNavModal && editingNavItem && (\n        <NavItemModal item={editingNavItem} onSave={handleSaveNavItem} onClose={() => { setShowNavModal(false); setEditingNavItem(null); }} saving={saving} />\n      )}\n\n      {showSectionModal && editingSection && (\n        <SectionModal section={editingSection} onSave={handleSaveFooterSection} onClose={() => { setShowSectionModal(false); setEditingSection(null); }} saving={saving} />\n      )}\n\n      {showLinkModal && editingLink && (\n        <LinkModal link={editingLink} onSave={handleSaveFooterLink} onClose={() => { setShowLinkModal(false); setEditingLink(null); }} saving={saving} />\n      )}\n\n      {showLogoModal && editingLogo && (\n        <LogoModal logo={editingLogo} onSave={handleSaveLogo} onClose={() => { setShowLogoModal(false); setEditingLogo(null); }} saving={saving} />\n      )}\n\n      {showSocialModal && editingSocial && (\n        <SocialModal social={editingSocial} onSave={handleSaveSocial} onClose={() => { setShowSocialModal(false); setEditingSocial(null); }} saving={saving} />\n      )}\n    </div>\n  );\n}\n\nfunction getLogoImageUrl(logo: FooterLogo): string {\n  if (!logo.logoImage) return '';\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n  return `${baseUrl}${logo.logoImage.filePath}`;\n}\n\nfunction getLinkIconImageUrl(link: FooterLink): string {\n  if (!link.iconImage) return '';\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n  return `${baseUrl}${link.iconImage.filePath}`;\n}\n\nfunction LogoModal({ logo, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(logo);\n  \n  return (\n    <Modal isOpen={true} onClose={onClose} title={logo.id > 0 ? 'Edit Logo' : 'Add Logo'} size=\"md\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Logo Name\" required>\n          <select\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            disabled={logo.id > 0}\n          >\n            <option value=\"refex\">Refex</option>\n            <option value=\"adonis\">Adonis</option>\n          </select>\n        </FormField>\n        <ImageSelector\n          value={formData.logoImageId}\n          onChange={(id) => setFormData({ ...formData, logoImageId: id })}\n          label=\"Logo Image\"\n        />\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.name} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction SocialModal({ social, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(social);\n  \n  return (\n    <Modal isOpen={true} onClose={onClose} title={social.id > 0 ? 'Edit Social Link' : 'Add Social Link'} size=\"md\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Platform\" required>\n          <input\n            type=\"text\"\n            value={formData.platform}\n            onChange={(e) => setFormData({ ...formData, platform: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Facebook, Twitter, Instagram, LinkedIn\"\n          />\n        </FormField>\n        <FormField label=\"URL\" required>\n          <input\n            type=\"text\"\n            value={formData.url}\n            onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"https://facebook.com/...\"\n          />\n        </FormField>\n        <FormField label=\"Icon Class (Optional)\">\n          <input\n            type=\"text\"\n            value={formData.iconClass || ''}\n            onChange={(e) => setFormData({ ...formData, iconClass: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"ri-facebook-fill\"\n          />\n        </FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.platform || !formData.url} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction NavItemModal({ item, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(item);\n  const isSubMenu = item.parentId !== null && item.parentId !== undefined;\n  \n  return (\n    <Modal isOpen={true} onClose={onClose} title={item.id > 0 ? (isSubMenu ? 'Edit Sub-menu Item' : 'Edit Navigation Item') : (isSubMenu ? 'Add Sub-menu Item' : 'Add Navigation Item')} size=\"md\">\n      <div className=\"space-y-6\">\n        {isSubMenu && (\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n            <p className=\"text-sm text-blue-800\">\n              <i className=\"ri-information-line mr-2\"></i>\n              This will be added as a sub-menu item under its parent.\n            </p>\n          </div>\n        )}\n        <FormField label=\"Label\" required>\n          <input \n            type=\"text\" \n            value={formData.label} \n            onChange={(e) => setFormData({ ...formData, label: e.target.value })} \n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" \n            placeholder=\"e.g., Home, About Us, Products\"\n          />\n        </FormField>\n        <FormField label=\"URL\">\n          <input \n            type=\"text\" \n            value={formData.url || ''} \n            onChange={(e) => setFormData({ ...formData, url: e.target.value || null })} \n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" \n            placeholder=\"/about or /products (optional for parent with sub-menus)\"\n          />\n          {!isSubMenu && (\n            <p className=\"text-xs text-gray-500 mt-1\">\n              <i className=\"ri-information-line mr-1\"></i>\n              Parent items can have both a URL and sub-menus. Leave empty if this is only a dropdown parent.\n            </p>\n          )}\n        </FormField>\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Status\">\n            <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n          </FormField>\n          <FormField label=\"Open in New Tab\">\n            <select value={formData.openInNewTab ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, openInNewTab: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\n              <option value=\"no\">No</option>\n              <option value=\"yes\">Yes</option>\n            </select>\n          </FormField>\n        </div>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.label} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction SectionModal({ section, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(section);\n  return (\n    <Modal isOpen={true} onClose={onClose} title={section.id > 0 ? 'Edit Footer Section' : 'Add Footer Section'} size=\"md\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Section Title\" required><input type=\"text\" value={formData.title} onChange={(e) => setFormData({ ...formData, title: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.title} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction LinkModal({ link, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState({ ...link, iconSvg: link.iconSvg || '', iconImageId: link.iconImageId || null });\n  const getImageUrl = (image: any): string => {\n    if (!image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${image.filePath}`;\n  };\n  \n  return (\n    <Modal isOpen={true} onClose={onClose} title={link.id > 0 ? 'Edit Footer Link' : 'Add Footer Link'} size=\"lg\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Link Label (Title)\" required>\n          <input \n            type=\"text\" \n            value={formData.label} \n            onChange={(e) => setFormData({ ...formData, label: e.target.value })} \n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" \n            placeholder=\"e.g., Phone, Email, Location\"\n          />\n        </FormField>\n        <FormField label=\"Data (URL or Content)\" required>\n          <input \n            type=\"text\" \n            value={formData.url} \n            onChange={(e) => setFormData({ ...formData, url: e.target.value })} \n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" \n            placeholder=\"tel:+1234567890, mailto:email@example.com, or /about\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            <i className=\"ri-information-line mr-1\"></i>\n            For Contact Info: Use tel: for phone, mailto: for email, or plain text for address\n          </p>\n        </FormField>\n        \n        <div className=\"border-t pt-4\">\n          <p className=\"text-sm font-semibold text-gray-700 mb-3\">Icon (Choose one method)</p>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Icon Image Upload (JPG, PNG, SVG)</label>\n              <ImageSelector\n                value={formData.iconImageId}\n                onChange={(id) => setFormData({ ...formData, iconImageId: id, iconSvg: null })}\n                label=\"\"\n              />\n              {formData.iconImage && (\n                <div className=\"mt-2\">\n                  <img \n                    src={getImageUrl(formData.iconImage)} \n                    alt=\"Icon preview\" \n                    className=\"w-8 h-8 object-contain\"\n                  />\n                </div>\n              )}\n            </div>\n            \n            <div className=\"text-center text-sm text-gray-500\">OR</div>\n            \n            <FormField label=\"SVG Icon Code (Alternative)\">\n              <textarea \n                value={formData.iconSvg || ''} \n                onChange={(e) => setFormData({ ...formData, iconSvg: e.target.value || null, iconImageId: null })} \n                rows={6}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm\"\n                placeholder='Paste SVG code here, e.g., <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M...\"/></svg>'\n              />\n              {formData.iconSvg && (\n                <div className=\"mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200\">\n                  <p className=\"text-xs text-gray-600 mb-2\">Preview:</p>\n                  <div className=\"w-8 h-8 text-[#FF6B35]\" dangerouslySetInnerHTML={{ __html: formData.iconSvg }} />\n                </div>\n              )}\n            </FormField>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.label || !formData.url} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport FormField from '../../../../components/cms/FormField';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype SectionTab = 'hero' | 'overview' | 'safety' | 'excellence';\n\ninterface AboutPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  overviewHeading: string | null;\n  overviewContent: string | null;\n  overviewImageId: number | null;\n  safetyHeading: string | null;\n  safetyContent: string | null;\n  safetyImageId: number | null;\n  excellenceHeading: string | null;\n  excellenceContent: string | null;\n  excellenceImageId: number | null;\n  heroImage?: { filePath: string; altText: string };\n  overviewImage?: { filePath: string; altText: string };\n  safetyImage?: { filePath: string; altText: string };\n  excellenceImage?: { filePath: string; altText: string };\n}\n\nexport default function AboutPageManagement() {\n  const [activeSection, setActiveSection] = useState<SectionTab>('hero');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [content, setContent] = useState<AboutPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    overviewHeading: null,\n    overviewContent: null,\n    overviewImageId: null,\n    safetyHeading: null,\n    safetyContent: null,\n    safetyImageId: null,\n    excellenceHeading: null,\n    excellenceContent: null,\n    excellenceImageId: null\n  });\n\n  const sectionTabs = [\n    { id: 'hero' as SectionTab, label: 'Hero Section', icon: 'ri-image-line' },\n    { id: 'overview' as SectionTab, label: 'Company Overview', icon: 'ri-file-text-line' },\n    { id: 'safety' as SectionTab, label: 'Safety & Innovation', icon: 'ri-shield-check-line' },\n    { id: 'excellence' as SectionTab, label: 'Excellence', icon: 'ri-award-line' }\n  ];\n\n  useEffect(() => {\n    fetchContent();\n  }, []);\n\n  const fetchContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<AboutPageContent>('/about');\n      if (response.success && response.data) {\n        setContent(response.data as AboutPageContent);\n      }\n    } catch (error: any) {\n      console.error('Error fetching content:', error);\n      alert(error.message || 'Failed to load content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/about', content);\n      if (response.success) {\n        alert('About page saved successfully!');\n        fetchContent();\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getImageUrl = (image: any): string => {\n    if (!image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${image.filePath}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">About Page Management</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage all sections of the about page</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex items-center space-x-2 overflow-x-auto\">\n            {sectionTabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveSection(tab.id)}\n                className={`flex items-center space-x-2 px-4 py-3 font-medium text-sm whitespace-nowrap transition-all duration-300 border-b-2 cursor-pointer ${\n                  activeSection === tab.id\n                    ? 'text-blue-600 border-blue-600'\n                    : 'text-gray-600 border-transparent hover:text-blue-600'\n                }`}\n              >\n                <i className={tab.icon}></i>\n                <span>{tab.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n              <p className=\"text-gray-600 mt-2\">Loading...</p>\n            </div>\n          ) : (\n            <>\n              {activeSection === 'hero' && (\n                <SectionEditor\n                  title=\"Hero Section\"\n                  fields={[\n                    {\n                      label: 'Hero Title',\n                      value: content.heroTitle || '',\n                      onChange: (val) => setContent({ ...content, heroTitle: val || null }),\n                      type: 'text'\n                    },\n                    {\n                      label: 'Hero Subtitle',\n                      value: content.heroSubtitle || '',\n                      onChange: (val) => setContent({ ...content, heroSubtitle: val || null }),\n                      type: 'textarea'\n                    }\n                  ]}\n                  imageSelector={\n                    <ImageSelector\n                      value={content.heroImageId}\n                      onChange={(id) => setContent({ ...content, heroImageId: id })}\n                      label=\"Hero Image\"\n                    />\n                  }\n                  previewImage={content.heroImage ? getImageUrl(content.heroImage) : null}\n                  onSave={handleSave}\n                  saving={saving}\n                />\n              )}\n\n              {activeSection === 'overview' && (\n                <SectionEditor\n                  title=\"Company Overview Section\"\n                  fields={[\n                    {\n                      label: 'Heading',\n                      value: content.overviewHeading || '',\n                      onChange: (val) => setContent({ ...content, overviewHeading: val || null }),\n                      type: 'text'\n                    },\n                    {\n                      label: 'Content',\n                      value: content.overviewContent || '',\n                      onChange: (val) => setContent({ ...content, overviewContent: val || null }),\n                      type: 'textarea',\n                      rows: 6\n                    }\n                  ]}\n                  imageSelector={\n                    <ImageSelector\n                      value={content.overviewImageId}\n                      onChange={(id) => setContent({ ...content, overviewImageId: id })}\n                      label=\"Overview Image\"\n                    />\n                  }\n                  previewImage={content.overviewImage ? getImageUrl(content.overviewImage) : null}\n                  onSave={handleSave}\n                  saving={saving}\n                />\n              )}\n\n              {activeSection === 'safety' && (\n                <SectionEditor\n                  title=\"Safety & Innovation Section\"\n                  fields={[\n                    {\n                      label: 'Heading',\n                      value: content.safetyHeading || '',\n                      onChange: (val) => setContent({ ...content, safetyHeading: val || null }),\n                      type: 'text'\n                    },\n                    {\n                      label: 'Content',\n                      value: content.safetyContent || '',\n                      onChange: (val) => setContent({ ...content, safetyContent: val || null }),\n                      type: 'textarea',\n                      rows: 6\n                    }\n                  ]}\n                  imageSelector={\n                    <ImageSelector\n                      value={content.safetyImageId}\n                      onChange={(id) => setContent({ ...content, safetyImageId: id })}\n                      label=\"Safety Image\"\n                    />\n                  }\n                  previewImage={content.safetyImage ? getImageUrl(content.safetyImage) : null}\n                  onSave={handleSave}\n                  saving={saving}\n                />\n              )}\n\n              {activeSection === 'excellence' && (\n                <SectionEditor\n                  title=\"Excellence Section\"\n                  fields={[\n                    {\n                      label: 'Heading',\n                      value: content.excellenceHeading || '',\n                      onChange: (val) => setContent({ ...content, excellenceHeading: val || null }),\n                      type: 'text'\n                    },\n                    {\n                      label: 'Content',\n                      value: content.excellenceContent || '',\n                      onChange: (val) => setContent({ ...content, excellenceContent: val || null }),\n                      type: 'textarea',\n                      rows: 6\n                    }\n                  ]}\n                  imageSelector={\n                    <ImageSelector\n                      value={content.excellenceImageId}\n                      onChange={(id) => setContent({ ...content, excellenceImageId: id })}\n                      label=\"Excellence Image\"\n                    />\n                  }\n                  previewImage={content.excellenceImage ? getImageUrl(content.excellenceImage) : null}\n                  onSave={handleSave}\n                  saving={saving}\n                />\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction SectionEditor({ title, fields, imageSelector, previewImage, onSave, saving }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-gray-900\">{title}</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {fields.map((field: any, index: number) => (\n          <div key={index} className={field.type === 'textarea' ? 'md:col-span-2' : ''}>\n            <FormField label={field.label}>\n              {field.type === 'textarea' ? (\n                <textarea\n                  value={field.value}\n                  onChange={(e) => field.onChange(e.target.value)}\n                  rows={field.rows || 4}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              ) : (\n                <input\n                  type={field.type || 'text'}\n                  value={field.value}\n                  onChange={(e) => field.onChange(e.target.value)}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                />\n              )}\n            </FormField>\n          </div>\n        ))}\n\n        <div className=\"md:col-span-2\">\n          {imageSelector}\n        </div>\n\n        {previewImage && (\n          <div className=\"md:col-span-2\">\n            <FormField label=\"Preview\">\n              <img src={previewImage} alt=\"Preview\" className=\"w-full rounded-lg max-h-64 object-cover\" />\n            </FormField>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\n\ninterface BackendUser {\n  id: number;\n  username: string;\n  email: string;\n  fullName: string | null;\n  role: 'super_admin' | 'admin' | 'editor' | 'viewer';\n  isActive: boolean;\n  createdAt: string;\n  lastLoginAt: string | null;\n  permissions?: PagePermissions | null;\n}\n\ninterface User {\n  id: number;\n  username: string;\n  name: string;\n  email: string;\n  role: 'super_admin' | 'admin' | 'editor' | 'viewer';\n  status: 'active' | 'inactive';\n  createdAt: string;\n  lastLogin: string;\n}\n\ntype Permission = {\n  view: boolean;\n  edit: boolean;\n  delete: boolean;\n};\n\ntype PagePermissions = {\n  [key: string]: Permission;\n};\n\nconst defaultPermissions: Record<string, PagePermissions> = {\n  super_admin: {\n    home: { view: true, edit: true, delete: true },\n    'header-footer': { view: true, edit: true, delete: true },\n    about: { view: true, edit: true, delete: true },\n    products: { view: true, edit: true, delete: true },\n    awards: { view: true, edit: true, delete: true },\n    careers: { view: true, edit: true, delete: true },\n    specialties: { view: true, edit: true, delete: true },\n    investors: { view: true, edit: true, delete: true },\n    clients: { view: true, edit: true, delete: true },\n    management: { view: true, edit: true, delete: true },\n    presence: { view: true, edit: true, delete: true },\n    production: { view: true, edit: true, delete: true },\n    quality: { view: true, edit: true, delete: true },\n    demo: { view: true, edit: true, delete: true },\n    contact: { view: true, edit: true, delete: true },\n    'contact-info': { view: true, edit: true, delete: true },\n    'global-settings': { view: true, edit: true, delete: true },\n    'social-links': { view: true, edit: true, delete: true },\n    testimonials: { view: true, edit: true, delete: true },\n    users: { view: true, edit: true, delete: true },\n    smtp: { view: true, edit: true, delete: true },\n    logs: { view: true, edit: true, delete: true },\n    bin: { view: true, edit: true, delete: true },\n    versions: { view: true, edit: true, delete: true }\n  },\n  admin: {\n    home: { view: true, edit: true, delete: true },\n    'header-footer': { view: true, edit: true, delete: false },\n    about: { view: true, edit: true, delete: true },\n    products: { view: true, edit: true, delete: true },\n    awards: { view: true, edit: true, delete: true },\n    careers: { view: true, edit: true, delete: true },\n    specialties: { view: true, edit: true, delete: true },\n    investors: { view: true, edit: true, delete: true },\n    clients: { view: true, edit: true, delete: true },\n    management: { view: true, edit: true, delete: true },\n    presence: { view: true, edit: true, delete: true },\n    production: { view: true, edit: true, delete: true },\n    quality: { view: true, edit: true, delete: true },\n    demo: { view: true, edit: true, delete: true },\n    contact: { view: true, edit: true, delete: true },\n    'contact-info': { view: true, edit: true, delete: false },\n    'global-settings': { view: true, edit: false, delete: false },\n    'social-links': { view: true, edit: true, delete: false },\n    testimonials: { view: true, edit: true, delete: true },\n    users: { view: true, edit: true, delete: false },\n    smtp: { view: true, edit: false, delete: false },\n    logs: { view: true, edit: false, delete: false },\n    bin: { view: true, edit: false, delete: false },\n    versions: { view: true, edit: false, delete: false }\n  },\n  editor: {\n    home: { view: true, edit: true, delete: false },\n    'header-footer': { view: true, edit: false, delete: false },\n    about: { view: true, edit: true, delete: false },\n    products: { view: true, edit: true, delete: false },\n    awards: { view: true, edit: true, delete: false },\n    careers: { view: true, edit: true, delete: false },\n    specialties: { view: true, edit: true, delete: false },\n    investors: { view: true, edit: true, delete: false },\n    clients: { view: true, edit: true, delete: false },\n    management: { view: true, edit: true, delete: false },\n    presence: { view: true, edit: true, delete: false },\n    production: { view: true, edit: true, delete: false },\n    quality: { view: true, edit: true, delete: false },\n    demo: { view: true, edit: true, delete: false },\n    contact: { view: true, edit: true, delete: false },\n    'contact-info': { view: true, edit: true, delete: false },\n    'global-settings': { view: false, edit: false, delete: false },\n    'social-links': { view: true, edit: true, delete: false },\n    testimonials: { view: true, edit: true, delete: false },\n    users: { view: false, edit: false, delete: false },\n    smtp: { view: false, edit: false, delete: false },\n    logs: { view: false, edit: false, delete: false },\n    bin: { view: false, edit: false, delete: false },\n    versions: { view: false, edit: false, delete: false }\n  },\n  viewer: {\n    home: { view: true, edit: false, delete: false },\n    'header-footer': { view: true, edit: false, delete: false },\n    about: { view: true, edit: false, delete: false },\n    products: { view: true, edit: false, delete: false },\n    awards: { view: true, edit: false, delete: false },\n    careers: { view: true, edit: false, delete: false },\n    specialties: { view: true, edit: false, delete: false },\n    investors: { view: true, edit: false, delete: false },\n    clients: { view: true, edit: false, delete: false },\n    management: { view: true, edit: false, delete: false },\n    presence: { view: true, edit: false, delete: false },\n    production: { view: true, edit: false, delete: false },\n    quality: { view: true, edit: false, delete: false },\n    demo: { view: true, edit: false, delete: false },\n    contact: { view: true, edit: false, delete: false },\n    'contact-info': { view: true, edit: false, delete: false },\n    'global-settings': { view: false, edit: false, delete: false },\n    'social-links': { view: true, edit: false, delete: false },\n    testimonials: { view: true, edit: false, delete: false },\n    users: { view: false, edit: false, delete: false },\n    smtp: { view: false, edit: false, delete: false },\n    logs: { view: false, edit: false, delete: false },\n    bin: { view: false, edit: false, delete: false },\n    versions: { view: false, edit: false, delete: false }\n  }\n};\n\nconst pageLabels: Record<string, { label: string; icon: string }> = {\n  home: { label: 'Home', icon: 'ri-home-line' },\n  'header-footer': { label: 'Header & Footer', icon: 'ri-layout-line' },\n  about: { label: 'About', icon: 'ri-information-line' },\n  products: { label: 'Products', icon: 'ri-product-hunt-line' },\n  awards: { label: 'Awards', icon: 'ri-award-line' },\n  careers: { label: 'Careers', icon: 'ri-briefcase-line' },\n  specialties: { label: 'Specialties', icon: 'ri-stethoscope-line' },\n  investors: { label: 'Investors', icon: 'ri-line-chart-line' },\n  clients: { label: 'Clients', icon: 'ri-user-heart-line' },\n  management: { label: 'Management', icon: 'ri-team-line' },\n  presence: { label: 'Our Presence', icon: 'ri-map-2-line' },\n  production: { label: 'Production', icon: 'ri-factory-line' },\n  quality: { label: 'Quality', icon: 'ri-shield-check-line' },\n  demo: { label: 'Request Demo', icon: 'ri-calendar-check-line' },\n  contact: { label: 'Contact', icon: 'ri-mail-line' },\n  'contact-info': { label: 'Contact Info', icon: 'ri-contacts-line' },\n  'global-settings': { label: 'Global Settings', icon: 'ri-settings-3-line' },\n  'social-links': { label: 'Social Links', icon: 'ri-share-line' },\n  testimonials: { label: 'Testimonials', icon: 'ri-chat-quote-line' },\n  users: { label: 'Users', icon: 'ri-user-settings-line' },\n  smtp: { label: 'SMTP', icon: 'ri-mail-settings-line' },\n  logs: { label: 'Activity Logs', icon: 'ri-file-list-3-line' },\n  bin: { label: 'Recycle Bin', icon: 'ri-delete-bin-line' },\n  versions: { label: 'Version History', icon: 'ri-history-line' }\n};\n\nexport default function UserManagement() {\n  const [view, setView] = useState<'list' | 'create' | 'edit'>('list');\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [formData, setFormData] = useState({\n    username: '',\n    name: '',\n    email: '',\n    password: '',\n    role: 'editor' as User['role'],\n    status: 'active' as User['status']\n  });\n\n  // Custom permissions that override role-based defaults\n  const [customPermissions, setCustomPermissions] = useState<PagePermissions | null>(null);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<BackendUser[]>('/users');\n      if (response.success && response.data) {\n        const mappedUsers: User[] = (response.data as BackendUser[]).map(user => ({\n          id: user.id,\n          username: user.username,\n          name: user.fullName || user.username,\n          email: user.email,\n          role: user.role,\n          status: user.isActive ? 'active' : 'inactive',\n          createdAt: new Date(user.createdAt).toLocaleDateString(),\n          lastLogin: user.lastLoginAt ? new Date(user.lastLoginAt).toLocaleString() : 'Never'\n        }));\n        setUsers(mappedUsers);\n      }\n    } catch (error: any) {\n      console.error('Error fetching users:', error);\n      alert(error.message || 'Failed to load users');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateUser = () => {\n    setFormData({\n      username: '',\n      name: '',\n      email: '',\n      password: '',\n      role: 'editor',\n      status: 'active'\n    });\n    setSelectedUser(null);\n    setView('create');\n  };\n\n  const handleEditUser = async (user: User) => {\n    setSelectedUser(user);\n    setFormData({\n      username: user.username,\n      name: user.name,\n      email: user.email,\n      password: '',\n      role: user.role,\n      status: user.status\n    });\n    \n    // Fetch full user data to get permissions\n    try {\n      const response = await api.get(`/users/${user.id}`);\n      if (response.success && response.data) {\n        const fullUser = response.data as any;\n        // If user has custom permissions, load them; otherwise use null (role defaults)\n        if (fullUser.permissions && Object.keys(fullUser.permissions).length > 0) {\n          setCustomPermissions(fullUser.permissions);\n        } else {\n          setCustomPermissions(null);\n        }\n      }\n    } catch (error: any) {\n      console.error('Error fetching user details:', error);\n      setCustomPermissions(null);\n    }\n    \n    setView('edit');\n  };\n\n  const handleSave = async () => {\n    if (!formData.email || !formData.username) {\n      alert('Email and username are required');\n      return;\n    }\n\n    if (view === 'create' && !formData.password) {\n      alert('Password is required when creating a new user');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const payload: any = {\n        username: formData.username,\n        email: formData.email,\n        fullName: formData.name,\n        role: formData.role,\n        permissions: customPermissions || null // Send custom permissions or null to use role defaults\n      };\n\n      if (view === 'create') {\n        payload.password = formData.password;\n        const response = await api.post('/users', payload);\n        if (response.success) {\n          alert('User created successfully!');\n          fetchUsers();\n          setView('list');\n          setSelectedUser(null);\n          setCustomPermissions(null);\n        } else {\n          throw new Error(response.message || 'Failed to create user');\n        }\n      } else {\n        // Edit mode\n        if (!selectedUser) return;\n        payload.isActive = formData.status === 'active';\n        if (formData.password) {\n          payload.password = formData.password;\n        }\n        const response = await api.put(`/users/${selectedUser.id}`, payload);\n        if (response.success) {\n          alert('User updated successfully!');\n          fetchUsers();\n          setView('list');\n          setSelectedUser(null);\n          setCustomPermissions(null);\n        } else {\n          throw new Error(response.message || 'Failed to update user');\n        }\n      }\n    } catch (error: any) {\n      console.error('Error saving user:', error);\n      alert(error.message || 'Failed to save user');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setView('list');\n    setSelectedUser(null);\n  };\n\n  const handleRoleChange = (role: User['role']) => {\n    setFormData({ ...formData, role });\n    // Reset custom permissions when role changes (use role defaults)\n    setCustomPermissions(null);\n  };\n\n  // Get current permissions (custom or role-based)\n  const getCurrentPermissions = (): PagePermissions => {\n    if (customPermissions) {\n      return customPermissions;\n    }\n    return defaultPermissions[formData.role] || defaultPermissions.editor;\n  };\n\n  const handlePermissionChange = (page: string, permission: 'view' | 'edit' | 'delete', value: boolean) => {\n    const current = getCurrentPermissions();\n    const updated = {\n      ...current,\n      [page]: {\n        ...current[page],\n        [permission]: value\n      }\n    };\n    setCustomPermissions(updated);\n  };\n\n  const resetToRoleDefaults = () => {\n    setCustomPermissions(null);\n  };\n\n  const handleDeleteUser = async (userId: number) => {\n    if (!window.confirm('Are you sure you want to delete this user?')) {\n      return;\n    }\n\n    setSaving(true);\n    try {\n      const response = await api.delete(`/users/${userId}`);\n      if (response.success) {\n        alert('User deleted successfully!');\n        fetchUsers();\n      } else {\n        throw new Error(response.message || 'Failed to delete user');\n      }\n    } catch (error: any) {\n      console.error('Error deleting user:', error);\n      alert(error.message || 'Failed to delete user');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getRoleBadgeColor = (role: User['role']) => {\n    switch (role) {\n      case 'super_admin': return 'bg-[#7C3AED] text-white';\n      case 'admin': return 'bg-[#2563EB] text-white';\n      case 'editor': return 'bg-[#10B981] text-white';\n      case 'viewer': return 'bg-[#6B7280] text-white';\n      default: return 'bg-[#6B7280] text-white';\n    }\n  };\n\n  const getStatusBadgeColor = (status: User['status']) => {\n    return status === 'active' \n      ? 'bg-[#D1FAE5] text-[#065F46]' \n      : 'bg-[#FEE2E2] text-[#991B1B]';\n  };\n\n  if (loading && users.length === 0) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-sm border border-[#E5E7EB] p-6\">\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2563EB]\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* User List View */}\n      {view === 'list' && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-[#E5E7EB] p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <div>\n              <h2 className=\"text-xl font-bold text-[#1F2937]\">User Management</h2>\n              <p className=\"text-sm text-[#6B7280] mt-1\">Manage admin users and their permissions</p>\n            </div>\n            <button\n              onClick={handleCreateUser}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-[#10B981] text-white rounded-lg hover:bg-[#059669] transition-all duration-300 cursor-pointer whitespace-nowrap\"\n            >\n              <i className=\"ri-user-add-line\"></i>\n              <span>Add New User</span>\n            </button>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-[#E5E7EB]\">\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-[#6B7280]\">User</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-[#6B7280]\">Role</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-[#6B7280]\">Status</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-[#6B7280]\">Created</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-[#6B7280]\">Last Login</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-[#6B7280]\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {users.map((user) => {\n                  const permissions = defaultPermissions[user.role];\n                  const hasViewPermission = Object.values(permissions).some(p => p.view);\n                  const hasEditPermission = Object.values(permissions).some(p => p.edit);\n                  const hasDeletePermission = Object.values(permissions).some(p => p.delete);\n                  \n                  return (\n                    <tr key={user.id} className=\"border-b border-[#F3F4F6] hover:bg-[#F9FAFB] transition-colors\">\n                      <td className=\"py-4 px-4\">\n                        <div>\n                          <p className=\"text-sm font-medium text-[#1F2937]\">{user.name}</p>\n                          <p className=\"text-xs text-[#6B7280]\">{user.email}</p>\n                        </div>\n                      </td>\n                      <td className=\"py-4 px-4\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${getRoleBadgeColor(user.role)}`}>\n                          {user.role.replace('_', ' ').toUpperCase()}\n                        </span>\n                      </td>\n                      <td className=\"py-4 px-4\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusBadgeColor(user.status)}`}>\n                          {user.status.toUpperCase()}\n                        </span>\n                      </td>\n                      <td className=\"py-4 px-4 text-sm text-[#6B7280]\">\n                        {user.createdAt}\n                      </td>\n                      <td className=\"py-4 px-4 text-sm text-[#6B7280]\">\n                        {user.lastLogin}\n                      </td>\n                      <td className=\"py-4 px-4\">\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={() => handleEditUser(user)}\n                            className=\"p-2 text-[#2563EB] hover:bg-[#EFF6FF] rounded-lg transition-all duration-300 cursor-pointer\"\n                            title=\"Edit User\"\n                          >\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                          <button\n                            onClick={() => handleDeleteUser(user.id)}\n                            className=\"p-2 text-[#EF4444] hover:bg-[#FEF2F2] rounded-lg transition-all duration-300 cursor-pointer\"\n                            title=\"Delete User\"\n                          >\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                  );\n                })}\n                {users.length === 0 && !loading && (\n                  <tr>\n                    <td colSpan={6} className=\"py-8 text-center text-[#6B7280]\">\n                      No users found. Click \"Add New User\" to create one.\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Create/Edit User Form */}\n      {(view === 'create' || view === 'edit') && (\n        <div className=\"bg-white rounded-lg shadow-sm border border-[#E5E7EB] p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-xl font-bold text-[#1F2937]\">\n              {view === 'create' ? 'Create New User' : `Edit User: ${selectedUser?.name}`}\n            </h2>\n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={handleCancel}\n                className=\"px-4 py-2 bg-[#F3F4F6] text-[#6B7280] rounded-lg hover:bg-[#E5E7EB] transition-all duration-300 cursor-pointer whitespace-nowrap\"\n                disabled={saving}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                disabled={saving}\n                className=\"px-4 py-2 bg-[#2563EB] text-white rounded-lg hover:bg-[#1D4ED8] transition-all duration-300 cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {saving ? 'Saving...' : (view === 'create' ? 'Create User' : 'Save Changes')}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Basic Information */}\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-semibold text-[#1F2937] border-b pb-2\">Basic Information</h3>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-[#374151] mb-2\">Username *</label>\n                <input\n                  type=\"text\"\n                  value={formData.username}\n                  onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                  placeholder=\"Enter username\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-[#374151] mb-2\">Full Name</label>\n                <input\n                  type=\"text\"\n                  value={formData.name}\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                  placeholder=\"Enter full name\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-[#374151] mb-2\">Email Address *</label>\n                <input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                  placeholder=\"user@example.com\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-[#374151] mb-2\">\n                  {view === 'create' ? 'Password *' : 'New Password (leave blank to keep current)'}\n                </label>\n                <input\n                  type=\"password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                  placeholder=\"Enter password\"\n                  required={view === 'create'}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-[#374151] mb-2\">Role</label>\n                <select\n                  value={formData.role}\n                  onChange={(e) => handleRoleChange(e.target.value as User['role'])}\n                  className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all cursor-pointer\"\n                >\n                  <option value=\"super_admin\">Super Admin - Full access to everything</option>\n                  <option value=\"admin\">Admin - Manage content and users</option>\n                  <option value=\"editor\">Editor - Edit content only</option>\n                  <option value=\"viewer\">Viewer - View only access</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-[#374151] mb-2\">Status</label>\n                <select\n                  value={formData.status}\n                  onChange={(e) => setFormData({ ...formData, status: e.target.value as User['status'] })}\n                  className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all cursor-pointer\"\n                >\n                  <option value=\"active\">Active</option>\n                  <option value=\"inactive\">Inactive</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Permissions Management */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-semibold text-[#1F2937] border-b pb-2 flex-1\">Permissions</h3>\n                {customPermissions && (\n                  <button\n                    onClick={resetToRoleDefaults}\n                    className=\"text-sm text-[#2563EB] hover:text-[#1D4ED8] cursor-pointer\"\n                    title=\"Reset to role defaults\"\n                  >\n                    <i className=\"ri-refresh-line mr-1\"></i>Reset to Defaults\n                  </button>\n                )}\n              </div>\n              \n              <div className=\"bg-[#F9FAFB] border border-[#E5E7EB] rounded-lg p-4\">\n                <p className=\"text-sm text-[#6B7280] mb-4\">\n                  {customPermissions \n                    ? 'Custom permissions (overriding role defaults)' \n                    : 'Permissions are automatically set based on the selected role. You can customize them below:'}\n                </p>\n\n                <div className=\"space-y-3 max-h-[600px] overflow-y-auto\">\n                  {Object.entries(getCurrentPermissions()).map(([page, perms]) => {\n                    const pageInfo = pageLabels[page] || { label: page, icon: 'ri-file-line' };\n                    return (\n                      <div key={page} className=\"bg-white rounded-lg border border-[#E5E7EB] p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <span className=\"text-sm font-medium text-[#1F2937] flex items-center space-x-2\">\n                            <i className={`${pageInfo.icon} text-[#6B7280]`}></i>\n                            <span>{pageInfo.label}</span>\n                          </span>\n                        </div>\n                        <div className=\"flex items-center space-x-6\">\n                          <label className=\"flex items-center space-x-2 cursor-pointer\">\n                            <input\n                              type=\"checkbox\"\n                              checked={perms.view}\n                              onChange={(e) => handlePermissionChange(page, 'view', e.target.checked)}\n                              className=\"w-4 h-4 text-[#10B981] border-gray-300 rounded focus:ring-[#10B981] cursor-pointer\"\n                            />\n                            <span className={`text-xs px-2 py-1 rounded ${perms.view ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`}>\n                              View {perms.view ? '' : ''}\n                            </span>\n                          </label>\n                          <label className=\"flex items-center space-x-2 cursor-pointer\">\n                            <input\n                              type=\"checkbox\"\n                              checked={perms.edit}\n                              onChange={(e) => handlePermissionChange(page, 'edit', e.target.checked)}\n                              disabled={!perms.view}\n                              className=\"w-4 h-4 text-[#10B981] border-gray-300 rounded focus:ring-[#10B981] cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                            />\n                            <span className={`text-xs px-2 py-1 rounded ${perms.edit ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`}>\n                              Edit {perms.edit ? '' : ''}\n                            </span>\n                          </label>\n                          <label className=\"flex items-center space-x-2 cursor-pointer\">\n                            <input\n                              type=\"checkbox\"\n                              checked={perms.delete}\n                              onChange={(e) => handlePermissionChange(page, 'delete', e.target.checked)}\n                              disabled={!perms.edit}\n                              className=\"w-4 h-4 text-[#10B981] border-gray-300 rounded focus:ring-[#10B981] cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                            />\n                            <span className={`text-xs px-2 py-1 rounded ${perms.delete ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-600'}`}>\n                              Delete {perms.delete ? '' : ''}\n                            </span>\n                          </label>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n\n              <div className=\"bg-[#EFF6FF] border border-[#BFDBFE] rounded-lg p-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <i className=\"ri-information-line text-[#2563EB] text-xl mt-0.5\"></i>\n                  <div className=\"flex-1\">\n                    <h4 className=\"text-sm font-semibold text-[#1E40AF] mb-1\">Permission Guidelines</h4>\n                    <ul className=\"text-sm text-[#1E40AF] space-y-1\">\n                      <li><strong>View:</strong> User can see the page/section content</li>\n                      <li><strong>Edit:</strong> User can modify existing content (requires View)</li>\n                      <li><strong>Delete:</strong> User can remove content (requires Edit)</li>\n                    </ul>\n                    <p className=\"text-xs text-[#1E40AF] mt-2\">\n                      You can customize permissions by checking/unchecking the boxes above. Changes will override the role defaults.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface HfMobilePageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface HfMobileImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\ninterface HfMobileFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface HfMobileVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function HfMobilePageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [pageContent, setPageContent] = useState<HfMobilePageContent>({\r\n    title: null,\r\n    mainImageId: null,\r\n    deploymentInfo: null,\r\n    shortDescription: null,\r\n    fullDescription: null\r\n  });\r\n\r\n  const [images, setImages] = useState<HfMobileImage[]>([]);\r\n  const [features, setFeatures] = useState<HfMobileFeature[]>([]);\r\n  const [variants, setVariants] = useState<HfMobileVariant[]>([]);\r\n\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<HfMobileImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<HfMobileFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<HfMobileVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') {\r\n      fetchPageContent();\r\n    } else if (activeTab === 'images') {\r\n      fetchImages();\r\n    } else if (activeTab === 'features') {\r\n      fetchFeatures();\r\n    } else {\r\n      fetchVariants();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfMobilePageContent>('/products/hf-mobile');\r\n      if (response.success && response.data) {\r\n        setPageContent(response.data as HfMobilePageContent);\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfMobileImage[]>('/products/hf-mobile/images');\r\n      if (response.success && response.data) {\r\n        setImages((response.data as HfMobileImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfMobileFeature[]>('/products/hf-mobile/features');\r\n      if (response.success && response.data) {\r\n        setFeatures((response.data as HfMobileFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfMobileVariant[]>('/products/hf-mobile/variants');\r\n      if (response.success && response.data) {\r\n        setVariants((response.data as HfMobileVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/hf-mobile', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: HfMobileImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-mobile/images/${reordered[i].id}`, {\r\n          ...reordered[i],\r\n          orderIndex: i\r\n        });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to update');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveImage = async (image: HfMobileImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) {\r\n        await api.put(`/products/hf-mobile/images/${image.id}`, image);\r\n      } else {\r\n        await api.post('/products/hf-mobile/images', { ...image, orderIndex: images.length });\r\n      }\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-mobile/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: HfMobileFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-mobile/features/${reordered[i].id}`, {\r\n          ...reordered[i],\r\n          orderIndex: i\r\n        });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to update');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: HfMobileFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) {\r\n        await api.put(`/products/hf-mobile/features/${feature.id}`, feature);\r\n      } else {\r\n        await api.post('/products/hf-mobile/features', { ...feature, orderIndex: features.length });\r\n      }\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-mobile/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: HfMobileVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-mobile/variants/${reordered[i].id}`, {\r\n          ...reordered[i],\r\n          orderIndex: i\r\n        });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to update');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: HfMobileVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) {\r\n        await api.put(`/products/hf-mobile/variants/${variant.id}`, variant);\r\n      } else {\r\n        await api.post('/products/hf-mobile/variants', { ...variant, orderIndex: variants.length });\r\n      }\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-mobile/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">HF Mobile Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[\r\n              { id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' },\r\n              { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' },\r\n              { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' },\r\n              { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }\r\n            ].map((tab) => (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => setActiveTab(tab.id)}\r\n                className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${\r\n                  activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'\r\n                }`}\r\n              >\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\r\n                  {saving ? 'Saving...' : 'Save'}\r\n                </button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\r\n                  <i className=\"ri-add-line mr-2\"></i>Add Image\r\n                </button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList\r\n                  items={images}\r\n                  onReorder={handleReorderImages}\r\n                  keyExtractor={(img) => img.id}\r\n                  renderItem={(img: HfMobileImage) => (\r\n                    <div className=\"flex items-center space-x-4 w-full\">\r\n                      {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                      <div className=\"flex-1\">\r\n                        {img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\r\n                          <i className=\"ri-edit-line\"></i>\r\n                        </button>\r\n                        <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\r\n                          <i className=\"ri-delete-bin-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\r\n                  <i className=\"ri-add-line mr-2\"></i>Add Feature\r\n                </button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList\r\n                  items={features}\r\n                  onReorder={handleReorderFeatures}\r\n                  keyExtractor={(f) => f.id}\r\n                  renderItem={(feature: HfMobileFeature) => (\r\n                    <div className=\"flex items-center justify-between w-full\">\r\n                      <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\r\n                          <i className=\"ri-edit-line\"></i>\r\n                        </button>\r\n                        <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\r\n                          <i className=\"ri-delete-bin-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\r\n                  <i className=\"ri-add-line mr-2\"></i>Add Variant\r\n                </button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList\r\n                  items={variants}\r\n                  onReorder={handleReorderVariants}\r\n                  keyExtractor={(v) => v.id}\r\n                  renderItem={(variant: HfMobileVariant) => (\r\n                    <div className=\"flex items-center justify-between w-full\">\r\n                      <div>\r\n                        <h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\r\n                          {variant.isActive ? 'Active' : 'Inactive'}\r\n                        </span>\r\n                        <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\r\n                          <i className=\"ri-edit-line\"></i>\r\n                        </button>\r\n                        <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\r\n                          <i className=\"ri-delete-bin-line\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {showImageModal && editingImage && (\r\n        <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />\r\n      )}\r\n\r\n      {showFeatureModal && editingFeature && (\r\n        <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />\r\n      )}\r\n\r\n      {showVariantModal && editingVariant && (\r\n        <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface HfFixedPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface HfFixedImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: { filePath: string; altText: string; };\r\n}\r\n\r\ninterface HfFixedFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface HfFixedVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function HfFixedPageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [pageContent, setPageContent] = useState<HfFixedPageContent>({ title: null, mainImageId: null, deploymentInfo: null, shortDescription: null, fullDescription: null });\r\n  const [images, setImages] = useState<HfFixedImage[]>([]);\r\n  const [features, setFeatures] = useState<HfFixedFeature[]>([]);\r\n  const [variants, setVariants] = useState<HfFixedVariant[]>([]);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<HfFixedImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<HfFixedFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<HfFixedVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') fetchPageContent();\r\n    else if (activeTab === 'images') fetchImages();\r\n    else if (activeTab === 'features') fetchFeatures();\r\n    else fetchVariants();\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfFixedPageContent>('/products/hf-fixed');\r\n      if (response.success && response.data) setPageContent(response.data as HfFixedPageContent);\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfFixedImage[]>('/products/hf-fixed/images');\r\n      if (response.success && response.data) setImages((response.data as HfFixedImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfFixedFeature[]>('/products/hf-fixed/features');\r\n      if (response.success && response.data) setFeatures((response.data as HfFixedFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfFixedVariant[]>('/products/hf-fixed/variants');\r\n      if (response.success && response.data) setVariants((response.data as HfFixedVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/hf-fixed', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: HfFixedImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-fixed/images/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveImage = async (image: HfFixedImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) await api.put(`/products/hf-fixed/images/${image.id}`, image);\r\n      else await api.post('/products/hf-fixed/images', { ...image, orderIndex: images.length });\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-fixed/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: HfFixedFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-fixed/features/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: HfFixedFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) await api.put(`/products/hf-fixed/features/${feature.id}`, feature);\r\n      else await api.post('/products/hf-fixed/features', { ...feature, orderIndex: features.length });\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-fixed/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: HfFixedVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-fixed/variants/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: HfFixedVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) await api.put(`/products/hf-fixed/variants/${variant.id}`, variant);\r\n      else await api.post('/products/hf-fixed/variants', { ...variant, orderIndex: variants.length });\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-fixed/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">HF Fixed Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[{ id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' }, { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' }, { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' }, { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }].map((tab) => (\r\n              <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Image</button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={images} onReorder={handleReorderImages} keyExtractor={(img) => img.id} renderItem={(img: HfFixedImage) => (\r\n                  <div className=\"flex items-center space-x-4 w-full\">\r\n                    {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                    <div className=\"flex-1\">{img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}</div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Feature</button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={features} onReorder={handleReorderFeatures} keyExtractor={(f) => f.id} renderItem={(feature: HfFixedFeature) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Variant</button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={variants} onReorder={handleReorderVariants} keyExtractor={(v) => v.id} renderItem={(variant: HfFixedVariant) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <div><h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4></div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{variant.isActive ? 'Active' : 'Inactive'}</span>\r\n                      <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showImageModal && editingImage && <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />}\r\n      {showFeatureModal && editingFeature && <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />}\r\n      {showVariantModal && editingVariant && <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface FpdCArmPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface FpdCArmImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: { filePath: string; altText: string; };\r\n}\r\n\r\ninterface FpdCArmFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface FpdCArmVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function FpdCArmPageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [pageContent, setPageContent] = useState<FpdCArmPageContent>({ title: null, mainImageId: null, deploymentInfo: null, shortDescription: null, fullDescription: null });\r\n  const [images, setImages] = useState<FpdCArmImage[]>([]);\r\n  const [features, setFeatures] = useState<FpdCArmFeature[]>([]);\r\n  const [variants, setVariants] = useState<FpdCArmVariant[]>([]);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<FpdCArmImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<FpdCArmFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<FpdCArmVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') fetchPageContent();\r\n    else if (activeTab === 'images') fetchImages();\r\n    else if (activeTab === 'features') fetchFeatures();\r\n    else fetchVariants();\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<FpdCArmPageContent>('/products/fpd-c-arm');\r\n      if (response.success && response.data) setPageContent(response.data as FpdCArmPageContent);\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<FpdCArmImage[]>('/products/fpd-c-arm/images');\r\n      if (response.success && response.data) setImages((response.data as FpdCArmImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<FpdCArmFeature[]>('/products/fpd-c-arm/features');\r\n      if (response.success && response.data) setFeatures((response.data as FpdCArmFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<FpdCArmVariant[]>('/products/fpd-c-arm/variants');\r\n      if (response.success && response.data) setVariants((response.data as FpdCArmVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/fpd-c-arm', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: FpdCArmImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/fpd-c-arm/images/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveImage = async (image: FpdCArmImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) await api.put(`/products/fpd-c-arm/images/${image.id}`, image);\r\n      else await api.post('/products/fpd-c-arm/images', { ...image, orderIndex: images.length });\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/fpd-c-arm/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: FpdCArmFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/fpd-c-arm/features/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: FpdCArmFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) await api.put(`/products/fpd-c-arm/features/${feature.id}`, feature);\r\n      else await api.post('/products/fpd-c-arm/features', { ...feature, orderIndex: features.length });\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/fpd-c-arm/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: FpdCArmVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/fpd-c-arm/variants/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: FpdCArmVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) await api.put(`/products/fpd-c-arm/variants/${variant.id}`, variant);\r\n      else await api.post('/products/fpd-c-arm/variants', { ...variant, orderIndex: variants.length });\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/fpd-c-arm/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">FPD C-Arm Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[{ id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' }, { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' }, { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' }, { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }].map((tab) => (\r\n              <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Image</button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={images} onReorder={handleReorderImages} keyExtractor={(img) => img.id} renderItem={(img: FpdCArmImage) => (\r\n                  <div className=\"flex items-center space-x-4 w-full\">\r\n                    {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                    <div className=\"flex-1\">{img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}</div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Feature</button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={features} onReorder={handleReorderFeatures} keyExtractor={(f) => f.id} renderItem={(feature: FpdCArmFeature) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Variant</button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={variants} onReorder={handleReorderVariants} keyExtractor={(v) => v.id} renderItem={(variant: FpdCArmVariant) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <div><h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4></div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{variant.isActive ? 'Active' : 'Inactive'}</span>\r\n                      <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showImageModal && editingImage && <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />}\r\n      {showFeatureModal && editingFeature && <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />}\r\n      {showVariantModal && editingVariant && <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface HfCArm1kPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface HfCArm1kImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: { filePath: string; altText: string; };\r\n}\r\n\r\ninterface HfCArm1kFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface HfCArm1kVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function HfCArm1kPageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [pageContent, setPageContent] = useState<HfCArm1kPageContent>({ title: null, mainImageId: null, deploymentInfo: null, shortDescription: null, fullDescription: null });\r\n  const [images, setImages] = useState<HfCArm1kImage[]>([]);\r\n  const [features, setFeatures] = useState<HfCArm1kFeature[]>([]);\r\n  const [variants, setVariants] = useState<HfCArm1kVariant[]>([]);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<HfCArm1kImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<HfCArm1kFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<HfCArm1kVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') fetchPageContent();\r\n    else if (activeTab === 'images') fetchImages();\r\n    else if (activeTab === 'features') fetchFeatures();\r\n    else fetchVariants();\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfCArm1kPageContent>('/products/hf-c-arm-1k');\r\n      if (response.success && response.data) setPageContent(response.data as HfCArm1kPageContent);\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfCArm1kImage[]>('/products/hf-c-arm-1k/images');\r\n      if (response.success && response.data) setImages((response.data as HfCArm1kImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfCArm1kFeature[]>('/products/hf-c-arm-1k/features');\r\n      if (response.success && response.data) setFeatures((response.data as HfCArm1kFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<HfCArm1kVariant[]>('/products/hf-c-arm-1k/variants');\r\n      if (response.success && response.data) setVariants((response.data as HfCArm1kVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/hf-c-arm-1k', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: HfCArm1kImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-c-arm-1k/images/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveImage = async (image: HfCArm1kImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) await api.put(`/products/hf-c-arm-1k/images/${image.id}`, image);\r\n      else await api.post('/products/hf-c-arm-1k/images', { ...image, orderIndex: images.length });\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-c-arm-1k/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: HfCArm1kFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-c-arm-1k/features/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: HfCArm1kFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) await api.put(`/products/hf-c-arm-1k/features/${feature.id}`, feature);\r\n      else await api.post('/products/hf-c-arm-1k/features', { ...feature, orderIndex: features.length });\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-c-arm-1k/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: HfCArm1kVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/hf-c-arm-1k/variants/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: HfCArm1kVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) await api.put(`/products/hf-c-arm-1k/variants/${variant.id}`, variant);\r\n      else await api.post('/products/hf-c-arm-1k/variants', { ...variant, orderIndex: variants.length });\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/hf-c-arm-1k/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">1K*1K High End HF C-ARM Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[{ id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' }, { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' }, { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' }, { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }].map((tab) => (\r\n              <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Image</button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={images} onReorder={handleReorderImages} keyExtractor={(img) => img.id} renderItem={(img: HfCArm1kImage) => (\r\n                  <div className=\"flex items-center space-x-4 w-full\">\r\n                    {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                    <div className=\"flex-1\">{img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}</div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Feature</button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={features} onReorder={handleReorderFeatures} keyExtractor={(f) => f.id} renderItem={(feature: HfCArm1kFeature) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Variant</button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={variants} onReorder={handleReorderVariants} keyExtractor={(v) => v.id} renderItem={(variant: HfCArm1kVariant) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <div><h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4></div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{variant.isActive ? 'Active' : 'Inactive'}</span>\r\n                      <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showImageModal && editingImage && <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />}\r\n      {showFeatureModal && editingFeature && <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />}\r\n      {showVariantModal && editingVariant && <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface LineFrequencyPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface LineFrequencyImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: { filePath: string; altText: string; };\r\n}\r\n\r\ninterface LineFrequencyFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface LineFrequencyVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function LineFrequencyPageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [pageContent, setPageContent] = useState<LineFrequencyPageContent>({ title: null, mainImageId: null, deploymentInfo: null, shortDescription: null, fullDescription: null });\r\n  const [images, setImages] = useState<LineFrequencyImage[]>([]);\r\n  const [features, setFeatures] = useState<LineFrequencyFeature[]>([]);\r\n  const [variants, setVariants] = useState<LineFrequencyVariant[]>([]);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<LineFrequencyImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<LineFrequencyFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<LineFrequencyVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') fetchPageContent();\r\n    else if (activeTab === 'images') fetchImages();\r\n    else if (activeTab === 'features') fetchFeatures();\r\n    else fetchVariants();\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<LineFrequencyPageContent>('/products/line-frequency');\r\n      if (response.success && response.data) setPageContent(response.data as LineFrequencyPageContent);\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<LineFrequencyImage[]>('/products/line-frequency/images');\r\n      if (response.success && response.data) setImages((response.data as LineFrequencyImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<LineFrequencyFeature[]>('/products/line-frequency/features');\r\n      if (response.success && response.data) setFeatures((response.data as LineFrequencyFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<LineFrequencyVariant[]>('/products/line-frequency/variants');\r\n      if (response.success && response.data) setVariants((response.data as LineFrequencyVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/line-frequency', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: LineFrequencyImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/line-frequency/images/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveImage = async (image: LineFrequencyImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) await api.put(`/products/line-frequency/images/${image.id}`, image);\r\n      else await api.post('/products/line-frequency/images', { ...image, orderIndex: images.length });\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/line-frequency/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: LineFrequencyFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/line-frequency/features/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: LineFrequencyFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) await api.put(`/products/line-frequency/features/${feature.id}`, feature);\r\n      else await api.post('/products/line-frequency/features', { ...feature, orderIndex: features.length });\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/line-frequency/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: LineFrequencyVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/line-frequency/variants/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: LineFrequencyVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) await api.put(`/products/line-frequency/variants/${variant.id}`, variant);\r\n      else await api.post('/products/line-frequency/variants', { ...variant, orderIndex: variants.length });\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/line-frequency/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Line Frequency Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[{ id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' }, { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' }, { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' }, { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }].map((tab) => (\r\n              <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Image</button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={images} onReorder={handleReorderImages} keyExtractor={(img) => img.id} renderItem={(img: LineFrequencyImage) => (\r\n                  <div className=\"flex items-center space-x-4 w-full\">\r\n                    {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                    <div className=\"flex-1\">{img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}</div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Feature</button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={features} onReorder={handleReorderFeatures} keyExtractor={(f) => f.id} renderItem={(feature: LineFrequencyFeature) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Variant</button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={variants} onReorder={handleReorderVariants} keyExtractor={(v) => v.id} renderItem={(variant: LineFrequencyVariant) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <div><h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4></div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{variant.isActive ? 'Active' : 'Inactive'}</span>\r\n                      <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showImageModal && editingImage && <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />}\r\n      {showFeatureModal && editingFeature && <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />}\r\n      {showVariantModal && editingVariant && <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface DigitalRadiographyPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface DigitalRadiographyImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: { filePath: string; altText: string; };\r\n}\r\n\r\ninterface DigitalRadiographyFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface DigitalRadiographyVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function DigitalRadiographyPageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [pageContent, setPageContent] = useState<DigitalRadiographyPageContent>({ title: null, mainImageId: null, deploymentInfo: null, shortDescription: null, fullDescription: null });\r\n  const [images, setImages] = useState<DigitalRadiographyImage[]>([]);\r\n  const [features, setFeatures] = useState<DigitalRadiographyFeature[]>([]);\r\n  const [variants, setVariants] = useState<DigitalRadiographyVariant[]>([]);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<DigitalRadiographyImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<DigitalRadiographyFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<DigitalRadiographyVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') fetchPageContent();\r\n    else if (activeTab === 'images') fetchImages();\r\n    else if (activeTab === 'features') fetchFeatures();\r\n    else fetchVariants();\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DigitalRadiographyPageContent>('/products/digital-radiography');\r\n      if (response.success && response.data) setPageContent(response.data as DigitalRadiographyPageContent);\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DigitalRadiographyImage[]>('/products/digital-radiography/images');\r\n      if (response.success && response.data) setImages((response.data as DigitalRadiographyImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DigitalRadiographyFeature[]>('/products/digital-radiography/features');\r\n      if (response.success && response.data) setFeatures((response.data as DigitalRadiographyFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DigitalRadiographyVariant[]>('/products/digital-radiography/variants');\r\n      if (response.success && response.data) setVariants((response.data as DigitalRadiographyVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/digital-radiography', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: DigitalRadiographyImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/digital-radiography/images/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveImage = async (image: DigitalRadiographyImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) await api.put(`/products/digital-radiography/images/${image.id}`, image);\r\n      else await api.post('/products/digital-radiography/images', { ...image, orderIndex: images.length });\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/digital-radiography/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: DigitalRadiographyFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/digital-radiography/features/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: DigitalRadiographyFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) await api.put(`/products/digital-radiography/features/${feature.id}`, feature);\r\n      else await api.post('/products/digital-radiography/features', { ...feature, orderIndex: features.length });\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/digital-radiography/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: DigitalRadiographyVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/digital-radiography/variants/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: DigitalRadiographyVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) await api.put(`/products/digital-radiography/variants/${variant.id}`, variant);\r\n      else await api.post('/products/digital-radiography/variants', { ...variant, orderIndex: variants.length });\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/digital-radiography/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Digital Radiography Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[{ id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' }, { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' }, { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' }, { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }].map((tab) => (\r\n              <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Image</button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={images} onReorder={handleReorderImages} keyExtractor={(img) => img.id} renderItem={(img: DigitalRadiographyImage) => (\r\n                  <div className=\"flex items-center space-x-4 w-full\">\r\n                    {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                    <div className=\"flex-1\">{img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}</div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Feature</button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={features} onReorder={handleReorderFeatures} keyExtractor={(f) => f.id} renderItem={(feature: DigitalRadiographyFeature) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Variant</button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={variants} onReorder={handleReorderVariants} keyExtractor={(v) => v.id} renderItem={(variant: DigitalRadiographyVariant) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <div><h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4></div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{variant.isActive ? 'Active' : 'Inactive'}</span>\r\n                      <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showImageModal && editingImage && <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />}\r\n      {showFeatureModal && editingFeature && <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />}\r\n      {showVariantModal && editingVariant && <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../../utils/api';\r\nimport Modal from '../../../../../components/cms/Modal';\r\nimport FormField from '../../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../../components/cms/ImageSelector';\r\n\r\ntype TabType = 'content' | 'images' | 'features' | 'variants';\r\n\r\ninterface DreamSeriesPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n}\r\n\r\ninterface DreamSeriesImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: { filePath: string; altText: string; };\r\n}\r\n\r\ninterface DreamSeriesFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface DreamSeriesVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function DreamSeriesPageManagement() {\r\n  const [activeTab, setActiveTab] = useState<TabType>('content');\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [pageContent, setPageContent] = useState<DreamSeriesPageContent>({ title: null, mainImageId: null, deploymentInfo: null, shortDescription: null, fullDescription: null });\r\n  const [images, setImages] = useState<DreamSeriesImage[]>([]);\r\n  const [features, setFeatures] = useState<DreamSeriesFeature[]>([]);\r\n  const [variants, setVariants] = useState<DreamSeriesVariant[]>([]);\r\n  const [showImageModal, setShowImageModal] = useState(false);\r\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\r\n  const [showVariantModal, setShowVariantModal] = useState(false);\r\n  const [editingImage, setEditingImage] = useState<DreamSeriesImage | null>(null);\r\n  const [editingFeature, setEditingFeature] = useState<DreamSeriesFeature | null>(null);\r\n  const [editingVariant, setEditingVariant] = useState<DreamSeriesVariant | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'content') fetchPageContent();\r\n    else if (activeTab === 'images') fetchImages();\r\n    else if (activeTab === 'features') fetchFeatures();\r\n    else fetchVariants();\r\n  }, [activeTab]);\r\n\r\n  const fetchPageContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DreamSeriesPageContent>('/products/dream-series');\r\n      if (response.success && response.data) setPageContent(response.data as DreamSeriesPageContent);\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchImages = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DreamSeriesImage[]>('/products/dream-series/images');\r\n      if (response.success && response.data) setImages((response.data as DreamSeriesImage[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchFeatures = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DreamSeriesFeature[]>('/products/dream-series/features');\r\n      if (response.success && response.data) setFeatures((response.data as DreamSeriesFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const fetchVariants = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<DreamSeriesVariant[]>('/products/dream-series/variants');\r\n      if (response.success && response.data) setVariants((response.data as DreamSeriesVariant[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n    } catch (error: any) { alert(error.message || 'Failed to load'); } finally { setLoading(false); }\r\n  };\r\n\r\n  const handleSavePageContent = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/products/dream-series', pageContent);\r\n      alert('Page content saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderImages = async (reordered: DreamSeriesImage[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/dream-series/images/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setImages(reordered);\r\n      alert('Images order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveImage = async (image: DreamSeriesImage) => {\r\n    setSaving(true);\r\n    try {\r\n      if (image.id && image.id > 0) await api.put(`/products/dream-series/images/${image.id}`, image);\r\n      else await api.post('/products/dream-series/images', { ...image, orderIndex: images.length });\r\n      setShowImageModal(false);\r\n      setEditingImage(null);\r\n      fetchImages();\r\n      alert('Image saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteImage = async (id: number) => {\r\n    if (!confirm('Delete this image?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/dream-series/images/${id}`);\r\n      setImages(images.filter(i => i.id !== id));\r\n      alert('Image deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderFeatures = async (reordered: DreamSeriesFeature[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/dream-series/features/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setFeatures(reordered);\r\n      alert('Features order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveFeature = async (feature: DreamSeriesFeature) => {\r\n    setSaving(true);\r\n    try {\r\n      if (feature.id && feature.id > 0) await api.put(`/products/dream-series/features/${feature.id}`, feature);\r\n      else await api.post('/products/dream-series/features', { ...feature, orderIndex: features.length });\r\n      setShowFeatureModal(false);\r\n      setEditingFeature(null);\r\n      fetchFeatures();\r\n      alert('Feature saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteFeature = async (id: number) => {\r\n    if (!confirm('Delete this feature?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/dream-series/features/${id}`);\r\n      setFeatures(features.filter(f => f.id !== id));\r\n      alert('Feature deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleReorderVariants = async (reordered: DreamSeriesVariant[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/products/dream-series/variants/${reordered[i].id}`, { ...reordered[i], orderIndex: i });\r\n      }\r\n      setVariants(reordered);\r\n      alert('Variants order updated!');\r\n    } catch (error: any) { alert(error.message || 'Failed to update'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleSaveVariant = async (variant: DreamSeriesVariant) => {\r\n    setSaving(true);\r\n    try {\r\n      if (variant.id && variant.id > 0) await api.put(`/products/dream-series/variants/${variant.id}`, variant);\r\n      else await api.post('/products/dream-series/variants', { ...variant, orderIndex: variants.length });\r\n      setShowVariantModal(false);\r\n      setEditingVariant(null);\r\n      fetchVariants();\r\n      alert('Variant saved!');\r\n    } catch (error: any) { alert(error.message || 'Failed to save'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const handleDeleteVariant = async (id: number) => {\r\n    if (!confirm('Delete this variant?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/products/dream-series/variants/${id}`);\r\n      setVariants(variants.filter(v => v.id !== id));\r\n      alert('Variant deleted!');\r\n    } catch (error: any) { alert(error.message || 'Failed to delete'); } finally { setSaving(false); }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Dream Series Product Page</h2>\r\n        <p className=\"text-sm text-gray-600 mt-1\">Manage product content, images, features, and variants</p>\r\n      </div>\r\n      <div className=\"bg-white rounded-lg shadow-sm\">\r\n        <div className=\"border-b border-gray-200 px-6\">\r\n          <div className=\"flex space-x-2\">\r\n            {[{ id: 'content' as TabType, label: 'Content', icon: 'ri-file-text-line' }, { id: 'images' as TabType, label: 'Images', icon: 'ri-image-line' }, { id: 'features' as TabType, label: 'Features', icon: 'ri-star-line' }, { id: 'variants' as TabType, label: 'Variants', icon: 'ri-list-check' }].map((tab) => (\r\n              <button key={tab.id} onClick={() => setActiveTab(tab.id)} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer flex items-center space-x-2 ${activeTab === tab.id ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\r\n                <i className={tab.icon}></i>\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-12\">\r\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n            </div>\r\n          ) : activeTab === 'content' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\r\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <FormField label=\"Product Title\"><input type=\"text\" value={pageContent.title || ''} onChange={(e) => setPageContent({ ...pageContent, title: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <FormField label=\"Deployment Info\"><input type=\"text\" value={pageContent.deploymentInfo || ''} onChange={(e) => setPageContent({ ...pageContent, deploymentInfo: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\r\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Product Image\" /></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Short Description\"><textarea value={pageContent.shortDescription || ''} onChange={(e) => setPageContent({ ...pageContent, shortDescription: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n                <div className=\"md:col-span-2\"><FormField label=\"Full Description\"><textarea value={pageContent.fullDescription || ''} onChange={(e) => setPageContent({ ...pageContent, fullDescription: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\r\n              </div>\r\n            </div>\r\n          ) : activeTab === 'images' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Images</h3>\r\n                <button onClick={() => { setEditingImage({ id: 0, imageId: 0, orderIndex: images.length, isPrimary: false }); setShowImageModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Image</button>\r\n              </div>\r\n              {images.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No images yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={images} onReorder={handleReorderImages} keyExtractor={(img) => img.id} renderItem={(img: DreamSeriesImage) => (\r\n                  <div className=\"flex items-center space-x-4 w-full\">\r\n                    {img.image && <img src={getImageUrl(img.image)} alt=\"Product\" className=\"w-20 h-20 object-cover rounded-lg\" />}\r\n                    <div className=\"flex-1\">{img.isPrimary && <span className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full mb-1 inline-block\">Primary</span>}</div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingImage(img); setShowImageModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteImage(img.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : activeTab === 'features' ? (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Features</h3>\r\n                <button onClick={() => { setEditingFeature({ id: 0, featureText: '', orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Feature</button>\r\n              </div>\r\n              {features.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-star-line text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No features yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={features} onReorder={handleReorderFeatures} keyExtractor={(f) => f.id} renderItem={(feature: DreamSeriesFeature) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <p className=\"text-gray-700\">{feature.featureText}</p>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex justify-between\">\r\n                <h3 className=\"text-lg font-semibold\">Product Variants</h3>\r\n                <button onClick={() => { setEditingVariant({ id: 0, variantName: '', orderIndex: variants.length, isActive: true }); setShowVariantModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"><i className=\"ri-add-line mr-2\"></i>Add Variant</button>\r\n              </div>\r\n              {variants.length === 0 ? (\r\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                  <i className=\"ri-list-check text-4xl text-gray-400 mb-2\"></i>\r\n                  <p className=\"text-gray-500\">No variants yet</p>\r\n                </div>\r\n              ) : (\r\n                <DragDropList items={variants} onReorder={handleReorderVariants} keyExtractor={(v) => v.id} renderItem={(variant: DreamSeriesVariant) => (\r\n                  <div className=\"flex items-center justify-between w-full\">\r\n                    <div><h4 className=\"font-semibold text-gray-900\">{variant.variantName}</h4></div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${variant.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>{variant.isActive ? 'Active' : 'Inactive'}</span>\r\n                      <button onClick={() => { setEditingVariant(variant); setShowVariantModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"><i className=\"ri-edit-line\"></i></button>\r\n                      <button onClick={() => handleDeleteVariant(variant.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"><i className=\"ri-delete-bin-line\"></i></button>\r\n                    </div>\r\n                  </div>\r\n                )} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {showImageModal && editingImage && <ImageModal image={editingImage} onSave={handleSaveImage} onClose={() => { setShowImageModal(false); setEditingImage(null); }} saving={saving} />}\r\n      {showFeatureModal && editingFeature && <FeatureModal feature={editingFeature} onSave={handleSaveFeature} onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }} saving={saving} />}\r\n      {showVariantModal && editingVariant && <VariantModal variant={editingVariant} onSave={handleSaveVariant} onClose={() => { setShowVariantModal(false); setEditingVariant(null); }} saving={saving} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImageModal({ image, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(image);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={image.id > 0 ? 'Edit Image' : 'Add Image'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <ImageSelector value={formData.imageId} onChange={(id) => setFormData({ ...formData, imageId: id })} label=\"Product Image\" required />\r\n        <FormField label=\"Set as Primary Image\">\r\n          <select value={formData.isPrimary ? 'yes' : 'no'} onChange={(e) => setFormData({ ...formData, isPrimary: e.target.value === 'yes' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"no\">No</option>\r\n            <option value=\"yes\">Yes</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.imageId} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(feature);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Feature Text\" required>\r\n          <textarea value={formData.featureText} onChange={(e) => setFormData({ ...formData, featureText: e.target.value })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.featureText} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction VariantModal({ variant, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(variant);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={variant.id > 0 ? 'Edit Variant' : 'Add Variant'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Variant Name\" required>\r\n          <input type=\"text\" value={formData.variantName} onChange={(e) => setFormData({ ...formData, variantName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.variantName} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState } from 'react';\nimport HfMobilePageManagement from './products/HfMobilePageManagement';\nimport HfFixedPageManagement from './products/HfFixedPageManagement';\nimport FpdCArmPageManagement from './products/FpdCArmPageManagement';\nimport HfCArm1kPageManagement from './products/HfCArm1kPageManagement';\nimport LineFrequencyPageManagement from './products/LineFrequencyPageManagement';\nimport DigitalRadiographyPageManagement from './products/DigitalRadiographyPageManagement';\nimport DreamSeriesPageManagement from './products/DreamSeriesPageManagement';\n\ntype ProductSection = 'hf-mobile' | 'hf-fixed' | 'fpd-c-arm' | 'hf-c-arm-1k' | 'line-frequency' | 'digital-radiography' | 'dream-series';\n\nexport default function ProductsPageManagement() {\n  const [activeSection, setActiveSection] = useState<ProductSection>('hf-mobile');\n\n  const sections = [\n    { id: 'hf-mobile' as ProductSection, label: 'HF Mobile', icon: 'ri-truck-line' },\n    { id: 'hf-fixed' as ProductSection, label: 'HF Fixed', icon: 'ri-hospital-line' },\n    { id: 'fpd-c-arm' as ProductSection, label: 'FPD C-Arm', icon: 'ri-scan-line' },\n    { id: 'hf-c-arm-1k' as ProductSection, label: '1K*1K High End HF C-ARM', icon: 'ri-vip-crown-line' },\n    { id: 'line-frequency' as ProductSection, label: 'Line Frequency', icon: 'ri-pulse-line' },\n    { id: 'digital-radiography' as ProductSection, label: 'Digital Radiography', icon: 'ri-image-line' },\n    { id: 'dream-series' as ProductSection, label: 'Dream Series', icon: 'ri-star-line' }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex items-center space-x-2 overflow-x-auto\">\n            {sections.map((section) => (\n              <button\n                key={section.id}\n                onClick={() => setActiveSection(section.id)}\n                className={`flex items-center space-x-2 px-4 py-3 font-medium text-sm whitespace-nowrap transition-all duration-300 border-b-2 cursor-pointer ${\n                  activeSection === section.id\n                    ? 'text-blue-600 border-blue-600'\n                    : 'text-gray-600 border-transparent hover:text-blue-600'\n                }`}\n              >\n                <i className={section.icon}></i>\n                <span>{section.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div>\n        {activeSection === 'hf-mobile' && <HfMobilePageManagement />}\n        {activeSection === 'hf-fixed' && <HfFixedPageManagement />}\n        {activeSection === 'fpd-c-arm' && <FpdCArmPageManagement />}\n        {activeSection === 'hf-c-arm-1k' && <HfCArm1kPageManagement />}\n        {activeSection === 'line-frequency' && <LineFrequencyPageManagement />}\n        {activeSection === 'digital-radiography' && <DigitalRadiographyPageManagement />}\n        {activeSection === 'dream-series' && <DreamSeriesPageManagement />}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\nimport ContentCard from '../../../../components/cms/ContentCard';\nimport { getImageUrl } from '../../../../utils/imageUrl';\n\ninterface Award {\n  id: number;\n  title: string;\n  description: string;\n  imageId: number | null;\n  awardDate: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface AwardsPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  heroImage?: {\n    id: number;\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function AwardsPageManagement() {\n  const [activeTab, setActiveTab] = useState<'content' | 'awards'>('content');\n  const [awards, setAwards] = useState<Award[]>([]);\n  const [content, setContent] = useState<AwardsPageContent | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showAwardModal, setShowAwardModal] = useState(false);\n  const [editingAward, setEditingAward] = useState<Award | null>(null);\n  const [viewingAward, setViewingAward] = useState<Award | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchAwards();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<AwardsPageContent>('/awards/page-content');\n      if (response.success && response.data) {\n        setContent(response.data as AwardsPageContent);\n      } else {\n        // If content doesn't exist yet, use defaults\n        setContent({\n          heroTitle: null,\n          heroSubtitle: null,\n          heroImageId: null,\n          introText: null\n        });\n      }\n    } catch (error: any) {\n      // If it's a \"not found\" error, that's okay - use defaults\n      if (error.message && error.message.includes('not found')) {\n        setContent({\n          heroTitle: null,\n          heroSubtitle: null,\n          heroImageId: null,\n          introText: null\n        });\n      } else {\n        console.error('Error fetching page content:', error);\n        alert(error.message || 'Failed to load page content');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchAwards = async () => {\n    setLoading(true);\n    try {\n      // Fetch all awards for CMS, regardless of isActive status\n      const response = await api.get<Award[]>('/awards');\n      if (response.success && response.data) {\n        setAwards((response.data as Award[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching awards:', error);\n      alert(error.message || 'Failed to load awards');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    if (!content) return;\n    \n    setSaving(true);\n    try {\n      const payload = {\n        heroTitle: content.heroTitle || null,\n        heroSubtitle: content.heroSubtitle || null,\n        heroImageId: content.heroImageId || null,\n        introText: content.introText || null\n      };\n      \n      const response = await api.put('/awards/page-content', payload);\n      if (response.success) {\n        alert('Page content saved successfully!');\n        fetchPageContent(); // Refresh to get updated data with associations\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save page content');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorder = async (reorderedAwards: Award[]) => {\n    setSaving(true);\n    try {\n      // Update orderIndex for each award\n      for (let i = 0; i < reorderedAwards.length; i++) {\n        await api.put(`/awards/${reorderedAwards[i].id}`, {\n          ...reorderedAwards[i],\n          orderIndex: i\n        });\n      }\n      setAwards(reorderedAwards);\n      alert('Awards order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveAward = async (award: Award) => {\n    setSaving(true);\n    try {\n      if (award.id && award.id > 0) {\n        await api.put(`/awards/${award.id}`, award);\n      } else {\n        await api.post('/awards', { ...award, orderIndex: awards.length });\n      }\n      setShowAwardModal(false);\n      setEditingAward(null);\n      fetchAwards();\n      alert('Award saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save award');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteAward = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this award?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/awards/${id}`);\n      setAwards(awards.filter(a => a.id !== id));\n      alert('Award deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete award');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Title */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Awards Management</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage awards page content and awards list</p>\n          </div>\n        </div>\n        \n        {/* Tabs */}\n        <div className=\"mt-4 border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('content')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'content'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-file-text-line mr-2\"></i>Page Content\n            </button>\n            <button\n              onClick={() => setActiveTab('awards')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'awards'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-award-line mr-2\"></i>Awards List\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      {/* Page Content Tab */}\n      {activeTab === 'content' && (\n        <PageContentEditor\n          content={content}\n          setContent={setContent}\n          onSave={handleSavePageContent}\n          saving={saving}\n          loading={loading}\n        />\n      )}\n\n      {/* Awards List Tab */}\n      {activeTab === 'awards' && (\n        <div>\n          <div className=\"bg-white rounded-lg shadow-sm p-6 mb-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">Awards List</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">Manage individual awards and certifications</p>\n              </div>\n              <button\n                onClick={() => {\n                  setEditingAward({\n                    id: 0,\n                    title: '',\n                    description: '',\n                    imageId: null,\n                    awardDate: null,\n                    orderIndex: awards.length,\n                    isActive: true\n                  });\n                  setShowAwardModal(true);\n                }}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n              >\n                <i className=\"ri-add-line mr-2\"></i>Add Award\n              </button>\n            </div>\n          </div>\n\n          {/* Info Banner */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n            <div className=\"flex items-start space-x-3\">\n              <i className=\"ri-information-line text-blue-600 text-xl mt-0.5\"></i>\n              <div className=\"flex-1\">\n                <p className=\"text-sm text-blue-800\">\n                  <strong>Tip:</strong> Drag and drop awards to reorder them. The order shown here will appear on the website. Only award images are shown on the frontend (no titles).\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Awards List */}\n          {loading ? (\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n              <p className=\"text-gray-600 mt-2\">Loading awards...</p>\n            </div>\n          ) : awards.length === 0 ? (\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n              <i className=\"ri-award-line text-6xl text-gray-300 mb-4\"></i>\n              <p className=\"text-gray-600 mb-4\">No awards yet. Add your first award!</p>\n              <button\n                onClick={() => {\n                  setEditingAward({\n                    id: 0,\n                    title: '',\n                    description: '',\n                    imageId: null,\n                    awardDate: null,\n                    orderIndex: 0,\n                    isActive: true\n                  });\n                  setShowAwardModal(true);\n                }}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n              >\n                <i className=\"ri-add-line mr-2\"></i>Add Award\n              </button>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\n              <DragDropList\n                items={awards}\n                onReorder={handleReorder}\n                keyExtractor={(award) => award.id}\n                emptyMessage=\"No awards yet. Click 'Add Award' to get started!\"\n                renderItem={(award: Award) => (\n                  <div className=\"flex items-center space-x-4 w-full\">\n                    {award.image && (\n                      <img\n                        src={getImageUrl(award.image)}\n                        alt={award.title}\n                        className=\"w-20 h-20 object-cover rounded-lg\"\n                      />\n                    )}\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-gray-900\">{award.title}</h3>\n                      <p className=\"text-sm text-gray-600 line-clamp-2\">{award.description}</p>\n                      {award.awardDate && (\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          <i className=\"ri-calendar-line mr-1\"></i>\n                          {new Date(award.awardDate).toLocaleDateString()}\n                        </p>\n                      )}\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        award.isActive \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-gray-100 text-gray-800'\n                      }`}>\n                        {award.isActive ? 'Active' : 'Inactive'}\n                      </span>\n                      <button\n                        onClick={() => setViewingAward(award)}\n                        className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                        title=\"View\"\n                      >\n                        <i className=\"ri-eye-line\"></i>\n                      </button>\n                      <button\n                        onClick={() => {\n                          setEditingAward(award);\n                          setShowAwardModal(true);\n                        }}\n                        className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                        title=\"Edit\"\n                      >\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      <button\n                        onClick={() => handleDeleteAward(award.id)}\n                        className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                        title=\"Delete\"\n                      >\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                )}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Award Modal (Create/Edit) */}\n      {showAwardModal && editingAward && (\n        <AwardModal\n          award={editingAward}\n          onSave={handleSaveAward}\n          onClose={() => {\n            setShowAwardModal(false);\n            setEditingAward(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {/* Award View Modal */}\n      {viewingAward && (\n        <AwardViewModal\n          award={viewingAward}\n          onClose={() => setViewingAward(null)}\n          onEdit={() => {\n            setEditingAward(viewingAward);\n            setViewingAward(null);\n            setShowAwardModal(true);\n          }}\n          getImageUrl={getImageUrl}\n        />\n      )}\n    </div>\n  );\n}\n\n// Page Content Editor Component\nfunction PageContentEditor({\n  content,\n  setContent,\n  onSave,\n  saving,\n  loading\n}: {\n  content: AwardsPageContent | null;\n  setContent: (content: AwardsPageContent | null) => void;\n  onSave: () => void;\n  saving: boolean;\n  loading: boolean;\n}) {\n  if (loading) {\n    return (\n      <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n        <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n        <p className=\"text-gray-600 mt-2\">Loading page content...</p>\n      </div>\n    );\n  }\n\n  if (!content) {\n    return (\n      <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n        <p className=\"text-gray-600\">No page content found.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm p-6\">\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Hero Section</h3>\n      \n      <div className=\"space-y-6\">\n        <FormField label=\"Hero Title\">\n          <input\n            type=\"text\"\n            value={content.heroTitle || ''}\n            onChange={(e) => setContent({ ...content, heroTitle: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter hero title (e.g., Awards & Recognition)\"\n          />\n        </FormField>\n\n        <FormField label=\"Hero Subtitle\">\n          <textarea\n            value={content.heroSubtitle || ''}\n            onChange={(e) => setContent({ ...content, heroSubtitle: e.target.value || null })}\n            rows={3}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter hero subtitle (optional)\"\n          />\n        </FormField>\n\n        <ImageSelector\n          value={content.heroImageId}\n          onChange={(id) => setContent({ ...content, heroImageId: id || null })}\n          label=\"Hero Background Image\"\n          aspectRatio=\"16/9\"\n          currentImage={content.heroImage}\n        />\n\n        <FormField label=\"Intro Text\">\n          <textarea\n            value={content.introText || ''}\n            onChange={(e) => setContent({ ...content, introText: e.target.value || null })}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter introduction text (optional)\"\n          />\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onSave}\n            disabled={saving}\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save Page Content'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Award Modal (Create/Edit)\nfunction AwardModal({ award, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<Award>(award);\n\n  return (\n    <Modal \n      isOpen={true} \n      onClose={onClose} \n      title={award.id && award.id > 0 ? 'Edit Award' : 'Add New Award'} \n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Award Title\" required>\n          <input\n            type=\"text\"\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter award title\"\n          />\n        </FormField>\n\n        <FormField label=\"Description\" required>\n          <textarea\n            value={formData.description}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter award description\"\n          />\n        </FormField>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Award Date\">\n            <input\n              type=\"date\"\n              value={formData.awardDate ? new Date(formData.awardDate).toISOString().split('T')[0] : ''}\n              onChange={(e) => setFormData({ ...formData, awardDate: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n\n          <FormField label=\"Status\">\n            <select\n              value={formData.isActive ? 'active' : 'inactive'}\n              onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n          </FormField>\n        </div>\n\n        <ImageSelector\n          value={formData.imageId}\n          onChange={(id) => setFormData({ ...formData, imageId: id })}\n          label=\"Award Image\"\n          aspectRatio=\"1/1\"\n        />\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.title || !formData.description}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : award.id && award.id > 0 ? 'Update Award' : 'Create Award'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\n// Award View Modal\nfunction AwardViewModal({ award, onClose, onEdit, getImageUrl }: any) {\n  return (\n    <Modal isOpen={true} onClose={onClose} title=\"Award Details\" size=\"lg\">\n      <div className=\"space-y-6\">\n        {award.image && (\n          <div className=\"rounded-lg overflow-hidden\">\n            <img\n              src={getImageUrl(award.image)}\n              alt={award.title}\n              className=\"w-full h-64 object-cover\"\n            />\n          </div>\n        )}\n\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">{award.title}</h3>\n          <p className=\"text-gray-600 mb-4\">{award.description}</p>\n          \n          {award.awardDate && (\n            <p className=\"text-sm text-gray-500\">\n              <i className=\"ri-calendar-line mr-2\"></i>\n              Awarded on: {new Date(award.awardDate).toLocaleDateString('en-US', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              })}\n            </p>\n          )}\n\n          <div className=\"mt-4\">\n            <span className={`inline-block px-3 py-1 text-sm rounded-full ${\n              award.isActive \n                ? 'bg-green-100 text-green-800' \n                : 'bg-gray-100 text-gray-800'\n            }`}>\n              {award.isActive ? 'Active' : 'Inactive'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Close\n          </button>\n          <button\n            onClick={onEdit}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-edit-line mr-2\"></i>Edit Award\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype TabType = 'content' | 'jobs';\n\ninterface CareersPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  introImageId: number | null;\n  lifeAtAdonisTitle: string | null;\n  lifeAtAdonisBackgroundImageId: number | null;\n  lifeAtAdonisImageId: number | null;\n  heroImage?: { filePath: string };\n  introImage?: { filePath: string };\n  lifeAtAdonisBackgroundImage?: { filePath: string };\n  lifeAtAdonisImage?: { filePath: string };\n}\n\ninterface Job {\n  id: number;\n  title: string;\n  department: string | null;\n  location: string | null;\n  employmentType: string | null;\n  description: string | null;\n  requirements: string | null;\n  responsibilities: string | null;\n  salaryRange: string | null;\n  isActive: boolean;\n  postedDate: string | null;\n}\n\nexport default function CareersPageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  // Page Content\n  const [pageContent, setPageContent] = useState<CareersPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null,\n    introImageId: null,\n    lifeAtAdonisTitle: null,\n    lifeAtAdonisBackgroundImageId: null,\n    lifeAtAdonisImageId: null\n  });\n\n  // Jobs\n  const [jobs, setJobs] = useState<Job[]>([]);\n  const [showJobModal, setShowJobModal] = useState(false);\n  const [editingJob, setEditingJob] = useState<Job | null>(null);\n  const [viewingJob, setViewingJob] = useState<Job | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchJobs();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<CareersPageContent>('/careers');\n      if (response.success && response.data) {\n        setPageContent(response.data as CareersPageContent);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchJobs = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<Job[]>('/careers/jobs');\n      if (response.success && response.data) {\n        setJobs(response.data as Job[]);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load jobs');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/careers', pageContent);\n      if (response.success) {\n        alert('Page content saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveJob = async (job: Job) => {\n    setSaving(true);\n    try {\n      if (job.id && job.id > 0) {\n        await api.put(`/careers/jobs/${job.id}`, job);\n      } else {\n        await api.post('/careers/jobs', { ...job, postedDate: new Date().toISOString() });\n      }\n      setShowJobModal(false);\n      setEditingJob(null);\n      fetchJobs();\n      alert('Job saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save job');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteJob = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this job?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/careers/jobs/${id}`);\n      setJobs(jobs.filter(j => j.id !== id));\n      alert('Job deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Careers Page Management</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage careers page content and job listings</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setActiveTab('content')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'content'\n                  ? 'text-blue-600 border-blue-600'\n                  : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Page Content\n            </button>\n            <button\n              onClick={() => setActiveTab('jobs')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'jobs'\n                  ? 'text-blue-600 border-blue-600'\n                  : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Job Listings\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n              <p className=\"text-gray-600 mt-2\">Loading...</p>\n            </div>\n          ) : activeTab === 'content' ? (\n            <PageContentEditor\n              content={pageContent}\n              onChange={setPageContent}\n              onSave={handleSavePageContent}\n              saving={saving}\n            />\n          ) : (\n            <JobsListEditor\n              jobs={jobs}\n              onAdd={() => {\n                setEditingJob({\n                  id: 0,\n                  title: '',\n                  department: null,\n                  location: null,\n                  employmentType: null,\n                  description: null,\n                  requirements: null,\n                  responsibilities: null,\n                  salaryRange: null,\n                  isActive: true,\n                  postedDate: null\n                });\n                setShowJobModal(true);\n              }}\n              onEdit={(job) => {\n                setEditingJob(job);\n                setShowJobModal(true);\n              }}\n              onView={setViewingJob}\n              onDelete={handleDeleteJob}\n            />\n          )}\n        </div>\n      </div>\n\n      {showJobModal && editingJob && (\n        <JobModal\n          job={editingJob}\n          onSave={handleSaveJob}\n          onClose={() => {\n            setShowJobModal(false);\n            setEditingJob(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {viewingJob && (\n        <JobViewModal\n          job={viewingJob}\n          onClose={() => setViewingJob(null)}\n          onEdit={() => {\n            setEditingJob(viewingJob);\n            setViewingJob(null);\n            setShowJobModal(true);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction PageContentEditor({ content, onChange, onSave, saving }: any) {\n  const getImageUrl = (image: any): string => {\n    if (!image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${image.filePath}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-lg font-semibold\">Page Content</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <FormField label=\"Hero Title\">\n          <input\n            type=\"text\"\n            value={content.heroTitle || ''}\n            onChange={(e) => onChange({ ...content, heroTitle: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <FormField label=\"Hero Subtitle\">\n          <input\n            type=\"text\"\n            value={content.heroSubtitle || ''}\n            onChange={(e) => onChange({ ...content, heroSubtitle: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <div className=\"md:col-span-2\">\n          <ImageSelector\n            value={content.heroImageId}\n            onChange={(id) => onChange({ ...content, heroImageId: id })}\n            label=\"Hero Image\"\n          />\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Intro Text\">\n            <textarea\n              value={content.introText || ''}\n              onChange={(e) => onChange({ ...content, introText: e.target.value || null })}\n              rows={4}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n        </div>\n\n        <ImageSelector\n          value={content.introImageId}\n          onChange={(id) => onChange({ ...content, introImageId: id })}\n          label=\"Intro Image\"\n        />\n      </div>\n\n      {/* Life at Adonis Medical Section */}\n      <div className=\"border-t pt-6 mt-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Life at Adonis Medical Section</h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div className=\"md:col-span-2\">\n            <FormField label=\"Title\">\n              <input\n                type=\"text\"\n                value={content.lifeAtAdonisTitle || ''}\n                onChange={(e) => onChange({ ...content, lifeAtAdonisTitle: e.target.value || null })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Life at Adonis Medical\"\n              />\n            </FormField>\n          </div>\n\n          <div className=\"md:col-span-2\">\n            <ImageSelector\n              value={content.lifeAtAdonisBackgroundImageId}\n              onChange={(id) => onChange({ ...content, lifeAtAdonisBackgroundImageId: id })}\n              label=\"Background Image\"\n            />\n          </div>\n\n          <div className=\"md:col-span-2\">\n            <ImageSelector\n              value={content.lifeAtAdonisImageId}\n              onChange={(id) => onChange({ ...content, lifeAtAdonisImageId: id })}\n              label=\"Section Image\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction JobsListEditor({ jobs, onAdd, onEdit, onView, onDelete }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-lg font-semibold\">Job Listings</h3>\n        <button\n          onClick={onAdd}\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n        >\n          <i className=\"ri-add-line mr-2\"></i>Add Job\n        </button>\n      </div>\n\n      {jobs.length === 0 ? (\n        <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n          <i className=\"ri-briefcase-line text-4xl text-gray-400 mb-2\"></i>\n          <p className=\"text-gray-500\">No jobs yet. Add your first job!</p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {jobs.map((job: Job) => (\n            <div key={job.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-semibold text-gray-900\">{job.title}</h4>\n                  <div className=\"flex flex-wrap gap-2 mt-2 text-sm text-gray-600\">\n                    {job.department && <span><i className=\"ri-building-line mr-1\"></i>{job.department}</span>}\n                    {job.location && <span><i className=\"ri-map-pin-line mr-1\"></i>{job.location}</span>}\n                    {job.employmentType && <span><i className=\"ri-time-line mr-1\"></i>{job.employmentType}</span>}\n                  </div>\n                  {job.postedDate && (\n                    <p className=\"text-xs text-gray-500 mt-2\">\n                      Posted: {new Date(job.postedDate).toLocaleDateString()}\n                    </p>\n                  )}\n                </div>\n                <div className=\"flex items-center space-x-2 ml-4\">\n                  <span className={`px-2 py-1 text-xs rounded-full ${\n                    job.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {job.isActive ? 'Active' : 'Inactive'}\n                  </span>\n                  <button\n                    onClick={() => onView(job)}\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                  >\n                    <i className=\"ri-eye-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => onEdit(job)}\n                    className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                  >\n                    <i className=\"ri-edit-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => onDelete(job.id)}\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                  >\n                    <i className=\"ri-delete-bin-line\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction JobModal({ job, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<Job>(job);\n\n  return (\n    <Modal\n      isOpen={true}\n      onClose={onClose}\n      title={job.id && job.id > 0 ? 'Edit Job' : 'Add New Job'}\n      size=\"xl\"\n    >\n      <div className=\"space-y-6 max-h-[calc(100vh-200px)] overflow-y-auto\">\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Job Title\" required>\n            <input\n              type=\"text\"\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n\n          <FormField label=\"Department\">\n            <input\n              type=\"text\"\n              value={formData.department || ''}\n              onChange={(e) => setFormData({ ...formData, department: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n\n          <FormField label=\"Location\">\n            <input\n              type=\"text\"\n              value={formData.location || ''}\n              onChange={(e) => setFormData({ ...formData, location: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n\n          <FormField label=\"Employment Type\">\n            <select\n              value={formData.employmentType || ''}\n              onChange={(e) => setFormData({ ...formData, employmentType: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"\">Select type</option>\n              <option value=\"Full-time\">Full-time</option>\n              <option value=\"Part-time\">Part-time</option>\n              <option value=\"Contract\">Contract</option>\n              <option value=\"Internship\">Internship</option>\n            </select>\n          </FormField>\n\n          <FormField label=\"Salary Range\">\n            <input\n              type=\"text\"\n              value={formData.salaryRange || ''}\n              onChange={(e) => setFormData({ ...formData, salaryRange: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"e.g., $50,000 - $70,000\"\n            />\n          </FormField>\n\n          <FormField label=\"Status\">\n            <select\n              value={formData.isActive ? 'active' : 'inactive'}\n              onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"active\">Active</option>\n              <option value=\"inactive\">Inactive</option>\n            </select>\n          </FormField>\n        </div>\n\n        <FormField label=\"Job Description\">\n          <textarea\n            value={formData.description || ''}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value || null })}\n            rows={5}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <FormField label=\"Requirements\">\n          <textarea\n            value={formData.requirements || ''}\n            onChange={(e) => setFormData({ ...formData, requirements: e.target.value || null })}\n            rows={5}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <FormField label=\"Responsibilities\">\n          <textarea\n            value={formData.responsibilities || ''}\n            onChange={(e) => setFormData({ ...formData, responsibilities: e.target.value || null })}\n            rows={5}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.title}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : job.id && job.id > 0 ? 'Update Job' : 'Create Job'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction JobViewModal({ job, onClose, onEdit }: any) {\n  return (\n    <Modal isOpen={true} onClose={onClose} title=\"Job Details\" size=\"lg\">\n      <div className=\"space-y-6\">\n        <div>\n          <h3 className=\"text-2xl font-bold text-gray-900 mb-4\">{job.title}</h3>\n          <div className=\"flex flex-wrap gap-4 text-sm text-gray-600 mb-4\">\n            {job.department && <span><i className=\"ri-building-line mr-1\"></i>{job.department}</span>}\n            {job.location && <span><i className=\"ri-map-pin-line mr-1\"></i>{job.location}</span>}\n            {job.employmentType && <span><i className=\"ri-time-line mr-1\"></i>{job.employmentType}</span>}\n            {job.salaryRange && <span><i className=\"ri-money-dollar-circle-line mr-1\"></i>{job.salaryRange}</span>}\n          </div>\n          {job.postedDate && (\n            <p className=\"text-sm text-gray-500\">\n              Posted: {new Date(job.postedDate).toLocaleDateString()}\n            </p>\n          )}\n        </div>\n\n        {job.description && (\n          <div>\n            <h4 className=\"font-semibold text-gray-900 mb-2\">Description</h4>\n            <p className=\"text-gray-600 whitespace-pre-wrap\">{job.description}</p>\n          </div>\n        )}\n\n        {job.requirements && (\n          <div>\n            <h4 className=\"font-semibold text-gray-900 mb-2\">Requirements</h4>\n            <p className=\"text-gray-600 whitespace-pre-wrap\">{job.requirements}</p>\n          </div>\n        )}\n\n        {job.responsibilities && (\n          <div>\n            <h4 className=\"font-semibold text-gray-900 mb-2\">Responsibilities</h4>\n            <p className=\"text-gray-600 whitespace-pre-wrap\">{job.responsibilities}</p>\n          </div>\n        )}\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Close\n          </button>\n          <button\n            onClick={onEdit}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-edit-line mr-2\"></i>Edit Job\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport FormField from '../../../../components/cms/FormField';\n\ninterface ContactUsPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  introText: string | null;\n}\n\nexport default function ContactPageManagement() {\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [content, setContent] = useState<ContactUsPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    introText: null\n  });\n\n  useEffect(() => {\n    fetchContent();\n  }, []);\n\n  const fetchContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<ContactUsPageContent>('/contact-us');\n      if (response.success && response.data) {\n        setContent(response.data as ContactUsPageContent);\n      }\n    } catch (error: any) {\n      console.error('Error fetching content:', error);\n      alert(error.message || 'Failed to load content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/contact-us', content);\n      if (response.success) {\n        alert('Contact page saved successfully!');\n        fetchContent();\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Contact Us Page</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage contact page content</p>\n          </div>\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save Changes'}\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n          <p className=\"text-gray-600 mt-2\">Loading...</p>\n        </div>\n      ) : (\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"space-y-6\">\n            <FormField label=\"Hero Title\">\n              <input\n                type=\"text\"\n                value={content.heroTitle || ''}\n                onChange={(e) => setContent({ ...content, heroTitle: e.target.value || null })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Contact Us\"\n              />\n            </FormField>\n\n            <FormField label=\"Hero Subtitle\">\n              <input\n                type=\"text\"\n                value={content.heroSubtitle || ''}\n                onChange={(e) => setContent({ ...content, heroSubtitle: e.target.value || null })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Get in touch with us\"\n              />\n            </FormField>\n\n            {/* Intro Text field hidden for now */}\n            {/* <FormField label=\"Intro Text\">\n              <textarea\n                value={content.introText || ''}\n                onChange={(e) => setContent({ ...content, introText: e.target.value || null })}\n                rows={6}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Enter introduction text for the contact page\"\n              />\n            </FormField> */}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState } from 'react';\n\ninterface SMTPConfig {\n  host: string;\n  port: string;\n  username: string;\n  password: string;\n  fromEmail: string;\n  fromName: string;\n  encryption: 'none' | 'ssl' | 'tls';\n  enabled: boolean;\n}\n\nexport default function SMTPConfiguration() {\n  const [isEditing, setIsEditing] = useState(false);\n  const [isTesting, setIsTesting] = useState(false);\n  const [testResult, setTestResult] = useState<{ success: boolean; message: string } | null>(null);\n\n  const [smtpConfig, setSmtpConfig] = useState<SMTPConfig>({\n    host: 'smtp.gmail.com',\n    port: '587',\n    username: 'your-email@gmail.com',\n    password: '',\n    fromEmail: 'noreply@adonismedical.com',\n    fromName: 'Adonis Medical',\n    encryption: 'tls',\n    enabled: true\n  });\n\n  const [testEmail, setTestEmail] = useState('');\n\n  const handleSave = () => {\n    console.log('Saving SMTP configuration:', smtpConfig);\n    setIsEditing(false);\n    setTestResult({ success: true, message: 'SMTP configuration saved successfully!' });\n    setTimeout(() => setTestResult(null), 5000);\n  };\n\n  const handleCancel = () => {\n    setIsEditing(false);\n  };\n\n  const handleTestConnection = async () => {\n    if (!testEmail) {\n      setTestResult({ success: false, message: 'Please enter a test email address' });\n      return;\n    }\n\n    setIsTesting(true);\n    setTestResult(null);\n\n    // Simulate API call\n    setTimeout(() => {\n      setIsTesting(false);\n      setTestResult({\n        success: true,\n        message: `Test email sent successfully to ${testEmail}! Please check your inbox.`\n      });\n    }, 2000);\n  };\n\n  const commonSMTPProviders = [\n    {\n      name: 'Gmail',\n      host: 'smtp.gmail.com',\n      port: '587',\n      encryption: 'tls' as const,\n      note: 'Use App Password for Gmail accounts with 2FA enabled'\n    },\n    {\n      name: 'Outlook/Office 365',\n      host: 'smtp.office365.com',\n      port: '587',\n      encryption: 'tls' as const,\n      note: 'Use your Microsoft account credentials'\n    },\n    {\n      name: 'Yahoo Mail',\n      host: 'smtp.mail.yahoo.com',\n      port: '587',\n      encryption: 'tls' as const,\n      note: 'Generate an app password in Yahoo account settings'\n    },\n    {\n      name: 'SendGrid',\n      host: 'smtp.sendgrid.net',\n      port: '587',\n      encryption: 'tls' as const,\n      note: 'Use \"apikey\" as username and your API key as password'\n    },\n    {\n      name: 'Mailgun',\n      host: 'smtp.mailgun.org',\n      port: '587',\n      encryption: 'tls' as const,\n      note: 'Use your Mailgun SMTP credentials'\n    }\n  ];\n\n  const applyProvider = (provider: typeof commonSMTPProviders[0]) => {\n    setSmtpConfig({\n      ...smtpConfig,\n      host: provider.host,\n      port: provider.port,\n      encryption: provider.encryption\n    });\n    setIsEditing(true);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* SMTP Configuration */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-[#E5E7EB] p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-xl font-bold text-[#1F2937]\">SMTP Configuration</h2>\n            <p className=\"text-sm text-[#6B7280] mt-1\">Configure email server settings for sending emails</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            {!isEditing ? (\n              <button\n                onClick={() => setIsEditing(true)}\n                className=\"px-4 py-2 bg-[#2563EB] text-white rounded-lg hover:bg-[#1D4ED8] transition-all duration-300 cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-edit-line mr-2\"></i>Edit Configuration\n              </button>\n            ) : (\n              <>\n                <button\n                  onClick={handleCancel}\n                  className=\"px-4 py-2 bg-[#F3F4F6] text-[#6B7280] rounded-lg hover:bg-[#E5E7EB] transition-all duration-300 cursor-pointer whitespace-nowrap\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSave}\n                  className=\"px-4 py-2 bg-[#2563EB] text-white rounded-lg hover:bg-[#1D4ED8] transition-all duration-300 cursor-pointer whitespace-nowrap\"\n                >\n                  Save Configuration\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n\n        {/* Status Alert */}\n        {testResult && (\n          <div className={`mb-6 p-4 rounded-lg border ${\n            testResult.success \n              ? 'bg-[#D1FAE5] border-[#6EE7B7] text-[#065F46]' \n              : 'bg-[#FEE2E2] border-[#FCA5A5] text-[#991B1B]'\n          }`}>\n            <div className=\"flex items-center space-x-3\">\n              <i className={`${testResult.success ? 'ri-checkbox-circle-line' : 'ri-error-warning-line'} text-xl`}></i>\n              <p className=\"text-sm font-medium\">{testResult.message}</p>\n            </div>\n          </div>\n        )}\n\n        {isEditing ? (\n          <div className=\"space-y-6\">\n            {/* Enable/Disable Toggle */}\n            <div className=\"flex items-center justify-between p-4 bg-[#F9FAFB] rounded-lg border border-[#E5E7EB]\">\n              <div>\n                <h3 className=\"text-sm font-semibold text-[#1F2937]\">Enable SMTP</h3>\n                <p className=\"text-xs text-[#6B7280] mt-1\">Turn on/off email sending functionality</p>\n              </div>\n              <label className=\"relative inline-flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={smtpConfig.enabled}\n                  onChange={(e) => setSmtpConfig({ ...smtpConfig, enabled: e.target.checked })}\n                  className=\"sr-only peer\"\n                />\n                <div className=\"w-11 h-6 bg-[#D1D5DB] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#BFDBFE] rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-[#D1D5DB] after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#2563EB]\"></div>\n              </label>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Server Settings */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#1F2937] border-b pb-2\">Server Settings</h3>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">SMTP Host</label>\n                  <input\n                    type=\"text\"\n                    value={smtpConfig.host}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, host: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                    placeholder=\"smtp.example.com\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">SMTP Port</label>\n                  <input\n                    type=\"text\"\n                    value={smtpConfig.port}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, port: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                    placeholder=\"587\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">Encryption</label>\n                  <select\n                    value={smtpConfig.encryption}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, encryption: e.target.value as SMTPConfig['encryption'] })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all cursor-pointer\"\n                  >\n                    <option value=\"none\">None</option>\n                    <option value=\"ssl\">SSL</option>\n                    <option value=\"tls\">TLS (Recommended)</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">Username</label>\n                  <input\n                    type=\"text\"\n                    value={smtpConfig.username}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, username: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                    placeholder=\"your-email@example.com\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">Password</label>\n                  <input\n                    type=\"password\"\n                    value={smtpConfig.password}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, password: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                    placeholder=\"\"\n                  />\n                </div>\n              </div>\n\n              {/* Sender Settings */}\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-semibold text-[#1F2937] border-b pb-2\">Sender Settings</h3>\n                \n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">From Email</label>\n                  <input\n                    type=\"email\"\n                    value={smtpConfig.fromEmail}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, fromEmail: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                    placeholder=\"noreply@example.com\"\n                  />\n                  <p className=\"text-xs text-[#6B7280] mt-1\">Email address that will appear as sender</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-[#374151] mb-2\">From Name</label>\n                  <input\n                    type=\"text\"\n                    value={smtpConfig.fromName}\n                    onChange={(e) => setSmtpConfig({ ...smtpConfig, fromName: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                    placeholder=\"Your Company Name\"\n                  />\n                  <p className=\"text-xs text-[#6B7280] mt-1\">Name that will appear as sender</p>\n                </div>\n\n                {/* Test Email Section */}\n                <div className=\"mt-6 p-4 bg-[#F9FAFB] border border-[#E5E7EB] rounded-lg\">\n                  <h4 className=\"text-sm font-semibold text-[#1F2937] mb-3\">Test Email Connection</h4>\n                  <div className=\"space-y-3\">\n                    <input\n                      type=\"email\"\n                      value={testEmail}\n                      onChange={(e) => setTestEmail(e.target.value)}\n                      className=\"w-full px-4 py-2 border border-[#D1D5DB] rounded-lg focus:ring-2 focus:ring-[#2563EB] focus:border-transparent transition-all\"\n                      placeholder=\"test@example.com\"\n                    />\n                    <button\n                      onClick={handleTestConnection}\n                      disabled={isTesting}\n                      className=\"w-full px-4 py-2 bg-[#10B981] text-white rounded-lg hover:bg-[#059669] transition-all duration-300 cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {isTesting ? (\n                        <>\n                          <i className=\"ri-loader-4-line animate-spin mr-2\"></i>\n                          Sending Test Email...\n                        </>\n                      ) : (\n                        <>\n                          <i className=\"ri-mail-send-line mr-2\"></i>\n                          Send Test Email\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"space-y-4\">\n              <div className=\"bg-[#F9FAFB] border border-[#E5E7EB] rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"text-sm font-semibold text-[#1F2937]\">Status</h3>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium ${\n                    smtpConfig.enabled \n                      ? 'bg-[#D1FAE5] text-[#065F46]' \n                      : 'bg-[#FEE2E2] text-[#991B1B]'\n                  }`}>\n                    {smtpConfig.enabled ? 'Enabled' : 'Disabled'}\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"bg-[#F9FAFB] border border-[#E5E7EB] rounded-lg p-4\">\n                <h3 className=\"text-sm font-semibold text-[#1F2937] mb-3\">Server Settings</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-[#6B7280]\">Host:</span>\n                    <span className=\"text-[#1F2937] font-medium\">{smtpConfig.host}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-[#6B7280]\">Port:</span>\n                    <span className=\"text-[#1F2937] font-medium\">{smtpConfig.port}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-[#6B7280]\">Encryption:</span>\n                    <span className=\"text-[#1F2937] font-medium uppercase\">{smtpConfig.encryption}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-[#6B7280]\">Username:</span>\n                    <span className=\"text-[#1F2937] font-medium\">{smtpConfig.username}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"bg-[#F9FAFB] border border-[#E5E7EB] rounded-lg p-4\">\n                <h3 className=\"text-sm font-semibold text-[#1F2937] mb-3\">Sender Information</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-[#6B7280]\">From Email:</span>\n                    <span className=\"text-[#1F2937] font-medium\">{smtpConfig.fromEmail}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-[#6B7280]\">From Name:</span>\n                    <span className=\"text-[#1F2937] font-medium\">{smtpConfig.fromName}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Common SMTP Providers */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-[#E5E7EB] p-6\">\n        <h2 className=\"text-xl font-bold text-[#1F2937] mb-4\">Common SMTP Providers</h2>\n        <p className=\"text-sm text-[#6B7280] mb-6\">Quick setup with popular email service providers</p>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {commonSMTPProviders.map((provider) => (\n            <div key={provider.name} className=\"border border-[#E5E7EB] rounded-lg p-4 hover:shadow-md transition-all\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-sm font-semibold text-[#1F2937]\">{provider.name}</h3>\n                <button\n                  onClick={() => applyProvider(provider)}\n                  className=\"px-3 py-1 bg-[#2563EB] text-white text-xs rounded-lg hover:bg-[#1D4ED8] transition-all cursor-pointer whitespace-nowrap\"\n                >\n                  Use This\n                </button>\n              </div>\n              <div className=\"space-y-1 text-xs text-[#6B7280] mb-3\">\n                <p><strong>Host:</strong> {provider.host}</p>\n                <p><strong>Port:</strong> {provider.port}</p>\n                <p><strong>Encryption:</strong> {provider.encryption.toUpperCase()}</p>\n              </div>\n              <p className=\"text-xs text-[#6B7280] bg-[#F9FAFB] p-2 rounded\">\n                <i className=\"ri-information-line mr-1\"></i>\n                {provider.note}\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Help & Documentation */}\n      <div className=\"bg-[#EFF6FF] border border-[#BFDBFE] rounded-lg p-6\">\n        <div className=\"flex items-start space-x-3\">\n          <i className=\"ri-information-line text-[#2563EB] text-2xl mt-0.5\"></i>\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-semibold text-[#1E40AF] mb-2\">SMTP Configuration Help</h3>\n            <ul className=\"text-sm text-[#1E40AF] space-y-2\">\n              <li><strong>Port 587 (TLS):</strong> Recommended for most providers, uses STARTTLS encryption</li>\n              <li><strong>Port 465 (SSL):</strong> Uses SSL encryption, supported by some providers</li>\n              <li><strong>Port 25:</strong> Standard SMTP port, often blocked by ISPs</li>\n              <li><strong>Gmail Users:</strong> Enable \"Less secure app access\" or use App Passwords with 2FA</li>\n              <li><strong>Testing:</strong> Always send a test email after configuration to verify settings</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype TabType = 'page' | 'specialties';\n\ninterface Specialty {\n  id: number;\n  name: string;\n  slug: string;\n  description: string | null;\n  imageId: number | null;\n  iconClass: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface SpecialtiesPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  heroImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\ninterface SpecialtiesPageCard {\n  id: number;\n  name: string;\n  backgroundImageId: number | null;\n  cardImageId: number | null;\n  internalLink: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  backgroundImage?: {\n    filePath: string;\n    altText: string;\n  };\n  cardImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function SpecialtiesPageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('page');\n  const [specialties, setSpecialties] = useState<Specialty[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showSpecialtyModal, setShowSpecialtyModal] = useState(false);\n  const [editingSpecialty, setEditingSpecialty] = useState<Specialty | null>(null);\n  const [viewingSpecialty, setViewingSpecialty] = useState<Specialty | null>(null);\n\n  // Page Content\n  const [pageContent, setPageContent] = useState<SpecialtiesPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null\n  });\n\n  // Page Cards\n  const [pageCards, setPageCards] = useState<SpecialtiesPageCard[]>([]);\n  const [showCardModal, setShowCardModal] = useState(false);\n  const [editingCard, setEditingCard] = useState<SpecialtiesPageCard | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'page') {\n      fetchPageContent();\n      fetchPageCards();\n    } else {\n      fetchSpecialties();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<SpecialtiesPageContent>('/specialties/page/content');\n      if (response.success && response.data) {\n        setPageContent(response.data as SpecialtiesPageContent);\n      }\n    } catch (error: any) {\n      console.error('Error fetching page content:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchPageCards = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<SpecialtiesPageCard[]>('/specialties/page/cards');\n      if (response.success && response.data) {\n        setPageCards((response.data as SpecialtiesPageCard[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching page cards:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchSpecialties = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<Specialty[]>('/specialties');\n      if (response.success && response.data) {\n        setSpecialties((response.data as Specialty[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching specialties:', error);\n      alert(error.message || 'Failed to load specialties');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/specialties/page/content', pageContent);\n      if (response.success) {\n        alert('Page content saved successfully!');\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveCard = async (card: SpecialtiesPageCard) => {\n    setSaving(true);\n    try {\n      if (card.id && card.id > 0) {\n        await api.put(`/specialties/page/cards/${card.id}`, card);\n      } else {\n        await api.post('/specialties/page/cards', { ...card, orderIndex: pageCards.length });\n      }\n      setShowCardModal(false);\n      setEditingCard(null);\n      fetchPageCards();\n      alert('Card saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save card');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteCard = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this card?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/specialties/page/cards/${id}`);\n      setPageCards(pageCards.filter(c => c.id !== id));\n      alert('Card deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorderCards = async (reorderedCards: SpecialtiesPageCard[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedCards.length; i++) {\n        await api.put(`/specialties/page/cards/${reorderedCards[i].id}`, {\n          ...reorderedCards[i],\n          orderIndex: i\n        });\n      }\n      setPageCards(reorderedCards);\n      alert('Cards order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorder = async (reorderedSpecialties: Specialty[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedSpecialties.length; i++) {\n        await api.put(`/specialties/${reorderedSpecialties[i].id}`, {\n          ...reorderedSpecialties[i],\n          orderIndex: i\n        });\n      }\n      setSpecialties(reorderedSpecialties);\n      alert('Specialties order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveSpecialty = async (specialty: Specialty) => {\n    setSaving(true);\n    try {\n      // Generate slug from name if not provided\n      if (!specialty.slug && specialty.name) {\n        specialty.slug = specialty.name.toLowerCase().replace(/\\s+/g, '-').replace(/[^a-z0-9-]/g, '');\n      }\n\n      if (specialty.id && specialty.id > 0) {\n        await api.put(`/specialties/${specialty.id}`, specialty);\n      } else {\n        await api.post('/specialties', { ...specialty, orderIndex: specialties.length });\n      }\n      setShowSpecialtyModal(false);\n      setEditingSpecialty(null);\n      fetchSpecialties();\n      alert('Specialty saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save specialty');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteSpecialty = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this specialty?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/specialties/${id}`);\n      setSpecialties(specialties.filter(s => s.id !== id));\n      alert('Specialty deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete specialty');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getImageUrl = (specialty: Specialty): string => {\n    if (!specialty.image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${specialty.image.filePath}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Specialties Page Management</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage specialties page content and cards</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setActiveTab('page')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'page'\n                  ? 'text-blue-600 border-blue-600'\n                  : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Page Content & Cards\n            </button>\n            <button\n              onClick={() => setActiveTab('specialties')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'specialties'\n                  ? 'text-blue-600 border-blue-600'\n                  : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              General Specialties\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n              <p className=\"text-gray-600 mt-2\">Loading...</p>\n            </div>\n          ) : activeTab === 'page' ? (\n            <>\n              <PageContentEditor\n                content={pageContent}\n                onChange={setPageContent}\n                onSave={handleSavePageContent}\n                saving={saving}\n              />\n              <div className=\"border-t mt-8 pt-8\">\n                <CardsEditor\n                  cards={pageCards}\n                  onAdd={() => {\n                    setEditingCard({\n                      id: 0,\n                      name: '',\n                      backgroundImageId: null,\n                      cardImageId: null,\n                      internalLink: null,\n                      orderIndex: pageCards.length,\n                      isActive: true\n                    });\n                    setShowCardModal(true);\n                  }}\n                  onEdit={(card) => {\n                    setEditingCard(card);\n                    setShowCardModal(true);\n                  }}\n                  onDelete={handleDeleteCard}\n                  onReorder={handleReorderCards}\n                  saving={saving}\n                />\n              </div>\n            </>\n          ) : (\n            <div>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold\">General Specialties</h3>\n                <button\n                  onClick={() => {\n                    setEditingSpecialty({\n                      id: 0,\n                      name: '',\n                      slug: '',\n                      description: null,\n                      imageId: null,\n                      iconClass: null,\n                      orderIndex: specialties.length,\n                      isActive: true\n                    });\n                    setShowSpecialtyModal(true);\n                  }}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>Add Specialty\n                </button>\n              </div>\n\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <i className=\"ri-information-line text-blue-600 text-xl mt-0.5\"></i>\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm text-blue-800\">\n                      <strong>Tip:</strong> Drag and drop specialties to reorder them.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {specialties.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-stethoscope-line text-6xl text-gray-300 mb-4\"></i>\n                  <p className=\"text-gray-600 mb-4\">No specialties yet. Add your first specialty!</p>\n                </div>\n              ) : (\n                <DragDropList\n                  items={specialties}\n                  onReorder={handleReorder}\n                  keyExtractor={(specialty) => specialty.id}\n                  emptyMessage=\"No specialties yet. Click 'Add Specialty' to get started!\"\n                  renderItem={(specialty: Specialty) => (\n                    <div className=\"flex items-center space-x-4 w-full\">\n                      {specialty.iconClass && (\n                        <i className={`${specialty.iconClass} text-3xl text-blue-600`}></i>\n                      )}\n                      {specialty.image && !specialty.iconClass && (\n                        <img\n                          src={getImageUrl(specialty)}\n                          alt={specialty.name}\n                          className=\"w-12 h-12 object-cover rounded-lg\"\n                        />\n                      )}\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-gray-900\">{specialty.name}</h3>\n                        {specialty.description && (\n                          <p className=\"text-sm text-gray-600 line-clamp-1\">{specialty.description}</p>\n                        )}\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`px-2 py-1 text-xs rounded-full ${\n                          specialty.isActive \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {specialty.isActive ? 'Active' : 'Inactive'}\n                        </span>\n                        <button\n                          onClick={() => setViewingSpecialty(specialty)}\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                          title=\"View\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                        </button>\n                        <button\n                          onClick={() => {\n                            setEditingSpecialty(specialty);\n                            setShowSpecialtyModal(true);\n                          }}\n                          className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                          title=\"Edit\"\n                        >\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button\n                          onClick={() => handleDeleteSpecialty(specialty.id)}\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                          title=\"Delete\"\n                        >\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showCardModal && editingCard && (\n        <CardModal\n          card={editingCard}\n          onSave={handleSaveCard}\n          onClose={() => {\n            setShowCardModal(false);\n            setEditingCard(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {showSpecialtyModal && editingSpecialty && (\n        <SpecialtyModal\n          specialty={editingSpecialty}\n          onSave={handleSaveSpecialty}\n          onClose={() => {\n            setShowSpecialtyModal(false);\n            setEditingSpecialty(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {viewingSpecialty && (\n        <SpecialtyViewModal\n          specialty={viewingSpecialty}\n          onClose={() => setViewingSpecialty(null)}\n          onEdit={() => {\n            setEditingSpecialty(viewingSpecialty);\n            setViewingSpecialty(null);\n            setShowSpecialtyModal(true);\n          }}\n          getImageUrl={getImageUrl}\n        />\n      )}\n    </div>\n  );\n}\n\n// Page Content Editor\nfunction PageContentEditor({ content, onChange, onSave, saving }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-lg font-semibold\">Hero Section</h3>\n        <button\n          onClick={onSave}\n          disabled={saving}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        <FormField label=\"Hero Title\">\n          <input\n            type=\"text\"\n            value={content.heroTitle || ''}\n            onChange={(e) => onChange({ ...content, heroTitle: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <FormField label=\"Hero Subtitle\">\n          <input\n            type=\"text\"\n            value={content.heroSubtitle || ''}\n            onChange={(e) => onChange({ ...content, heroSubtitle: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n\n        <div className=\"md:col-span-2\">\n          <ImageSelector\n            value={content.heroImageId}\n            onChange={(id) => onChange({ ...content, heroImageId: id })}\n            label=\"Hero Background Image\"\n          />\n        </div>\n\n        <div className=\"md:col-span-2\">\n          <FormField label=\"Intro Text\">\n            <textarea\n              value={content.introText || ''}\n              onChange={(e) => onChange({ ...content, introText: e.target.value || null })}\n              rows={4}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            />\n          </FormField>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Cards Editor\nfunction CardsEditor({ cards, onAdd, onEdit, onDelete, onReorder, saving }: any) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-lg font-semibold\">Specialties Cards</h3>\n        <button\n          onClick={onAdd}\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n        >\n          <i className=\"ri-add-line mr-2\"></i>Add Card\n        </button>\n      </div>\n\n      {cards.length === 0 ? (\n        <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n          <i className=\"ri-image-line text-4xl text-gray-400 mb-2\"></i>\n          <p className=\"text-gray-500\">No cards yet. Add your first card!</p>\n        </div>\n      ) : (\n        <DragDropList\n          items={cards}\n          onReorder={onReorder}\n          keyExtractor={(card: SpecialtiesPageCard) => card.id}\n          emptyMessage=\"No cards yet. Click 'Add Card' to get started!\"\n          renderItem={(card: SpecialtiesPageCard) => (\n            <div className=\"flex items-center space-x-4 w-full\">\n              {card.cardImage && (\n                <img\n                  src={getCardImageUrl(card)}\n                  alt={card.name}\n                  className=\"w-16 h-16 object-cover rounded-lg\"\n                />\n              )}\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold text-gray-900\">{card.name}</h3>\n                {card.internalLink && (\n                  <p className=\"text-sm text-gray-600\">Link: {card.internalLink}</p>\n                )}\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <span className={`px-2 py-1 text-xs rounded-full ${\n                  card.isActive \n                    ? 'bg-green-100 text-green-800' \n                    : 'bg-gray-100 text-gray-800'\n                }`}>\n                  {card.isActive ? 'Active' : 'Inactive'}\n                </span>\n                <button\n                  onClick={() => onEdit(card)}\n                  className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                  title=\"Edit\"\n                >\n                  <i className=\"ri-edit-line\"></i>\n                </button>\n                <button\n                  onClick={() => onDelete(card.id)}\n                  className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                  title=\"Delete\"\n                >\n                  <i className=\"ri-delete-bin-line\"></i>\n                </button>\n              </div>\n            </div>\n          )}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction getCardImageUrl(card: SpecialtiesPageCard): string {\n  if (!card.cardImage) return '';\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n  return `${baseUrl}${card.cardImage.filePath}`;\n}\n\n// Card Modal\nfunction CardModal({ card, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<SpecialtiesPageCard>(card);\n\n  useEffect(() => {\n    setFormData(card);\n  }, [card]);\n\n  return (\n    <Modal\n      isOpen={true}\n      onClose={onClose}\n      title={card.id && card.id > 0 ? 'Edit Card' : 'Add New Card'}\n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Card Name\" required>\n          <input\n            type=\"text\"\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Radiology\"\n          />\n        </FormField>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <ImageSelector\n            value={formData.backgroundImageId}\n            onChange={(id) => setFormData({ ...formData, backgroundImageId: id })}\n            label=\"Background Image\"\n          />\n\n          <ImageSelector\n            value={formData.cardImageId}\n            onChange={(id) => setFormData({ ...formData, cardImageId: id })}\n            label=\"Card Image\"\n          />\n        </div>\n\n        <FormField label=\"Internal Link\" hint=\"Page URL to redirect to (e.g., /products, /about)\">\n          <input\n            type=\"text\"\n            value={formData.internalLink || ''}\n            onChange={(e) => setFormData({ ...formData, internalLink: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"/products\"\n          />\n        </FormField>\n\n        <FormField label=\"Status\">\n          <select\n            value={formData.isActive ? 'active' : 'inactive'}\n            onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.name}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : card.id && card.id > 0 ? 'Update Card' : 'Create Card'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction SpecialtyModal({ specialty, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<Specialty>(specialty);\n\n  return (\n    <Modal \n      isOpen={true} \n      onClose={onClose} \n      title={specialty.id && specialty.id > 0 ? 'Edit Specialty' : 'Add New Specialty'} \n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Specialty Name\" required>\n          <input\n            type=\"text\"\n            value={formData.name}\n            onChange={(e) => {\n              const name = e.target.value;\n              setFormData({ \n                ...formData, \n                name,\n                slug: name.toLowerCase().replace(/\\s+/g, '-').replace(/[^a-z0-9-]/g, '')\n              });\n            }}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Cardiology\"\n          />\n        </FormField>\n\n        <FormField label=\"Slug\" hint=\"Auto-generated from name, or customize\">\n          <input\n            type=\"text\"\n            value={formData.slug}\n            onChange={(e) => setFormData({ ...formData, slug: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"cardiology\"\n          />\n        </FormField>\n\n        <FormField label=\"Description\">\n          <textarea\n            value={formData.description || ''}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value || null })}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter specialty description\"\n          />\n        </FormField>\n\n        <FormField label=\"Icon Class\" hint=\"Use RemixIcon class (e.g., ri-heart-line)\">\n          <input\n            type=\"text\"\n            value={formData.iconClass || ''}\n            onChange={(e) => setFormData({ ...formData, iconClass: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"ri-heart-line\"\n          />\n          {formData.iconClass && (\n            <div className=\"mt-2 text-xs text-gray-500\">\n              Preview: <i className={formData.iconClass}></i>\n            </div>\n          )}\n        </FormField>\n\n        <ImageSelector\n          value={formData.imageId}\n          onChange={(id) => setFormData({ ...formData, imageId: id })}\n          label=\"Specialty Image\"\n          aspectRatio=\"1/1\"\n        />\n\n        <FormField label=\"Status\">\n          <select\n            value={formData.isActive ? 'active' : 'inactive'}\n            onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.name || !formData.slug}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : specialty.id && specialty.id > 0 ? 'Update Specialty' : 'Create Specialty'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction SpecialtyViewModal({ specialty, onClose, onEdit, getImageUrl }: any) {\n  return (\n    <Modal isOpen={true} onClose={onClose} title=\"Specialty Details\" size=\"lg\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center space-x-4\">\n          {specialty.iconClass && (\n            <i className={`${specialty.iconClass} text-5xl text-blue-600`}></i>\n          )}\n          {specialty.image && !specialty.iconClass && (\n            <img\n              src={getImageUrl(specialty)}\n              alt={specialty.name}\n              className=\"w-20 h-20 object-cover rounded-lg\"\n            />\n          )}\n          <div>\n            <h3 className=\"text-2xl font-bold text-gray-900\">{specialty.name}</h3>\n            <p className=\"text-sm text-gray-500\">Slug: {specialty.slug}</p>\n          </div>\n        </div>\n\n        {specialty.description && (\n          <div>\n            <h4 className=\"font-semibold text-gray-900 mb-2\">Description</h4>\n            <p className=\"text-gray-600\">{specialty.description}</p>\n          </div>\n        )}\n\n        <div>\n          <span className={`inline-block px-3 py-1 text-sm rounded-full ${\n            specialty.isActive \n              ? 'bg-green-100 text-green-800' \n              : 'bg-gray-100 text-gray-800'\n          }`}>\n            {specialty.isActive ? 'Active' : 'Inactive'}\n          </span>\n        </div>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Close\n          </button>\n          <button\n            onClick={onEdit}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-edit-line mr-2\"></i>Edit Specialty\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype TabType = 'content' | 'documents';\n\ninterface InvestorRelationsPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n}\n\ninterface InvestorDocument {\n  id: number;\n  title: string;\n  description: string | null;\n  fileId: number | null;\n  documentType: string | null;\n  publishDate: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  file?: {\n    filePath: string;\n    fileName: string;\n  };\n}\n\nexport default function InvestorRelationsPageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [pageContent, setPageContent] = useState<InvestorRelationsPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null\n  });\n\n  const [documents, setDocuments] = useState<InvestorDocument[]>([]);\n  const [showDocumentModal, setShowDocumentModal] = useState(false);\n  const [editingDocument, setEditingDocument] = useState<InvestorDocument | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchDocuments();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<InvestorRelationsPageContent>('/investor-relations');\n      if (response.success && response.data) {\n        setPageContent(response.data as InvestorRelationsPageContent);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDocuments = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<InvestorDocument[]>('/investor-relations/documents');\n      if (response.success && response.data) {\n        setDocuments((response.data as InvestorDocument[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load documents');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      await api.put('/investor-relations', pageContent);\n      alert('Page content saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorder = async (reorderedDocs: InvestorDocument[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedDocs.length; i++) {\n        await api.put(`/investor-relations/documents/${reorderedDocs[i].id}`, {\n          ...reorderedDocs[i],\n          orderIndex: i\n        });\n      }\n      setDocuments(reorderedDocs);\n      alert('Documents order updated!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveDocument = async (doc: InvestorDocument) => {\n    setSaving(true);\n    try {\n      if (doc.id && doc.id > 0) {\n        await api.put(`/investor-relations/documents/${doc.id}`, doc);\n      } else {\n        await api.post('/investor-relations/documents', { ...doc, orderIndex: documents.length });\n      }\n      setShowDocumentModal(false);\n      setEditingDocument(null);\n      fetchDocuments();\n      alert('Document saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteDocument = async (id: number) => {\n    if (!confirm('Delete this document?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/investor-relations/documents/${id}`);\n      setDocuments(documents.filter(d => d.id !== id));\n      alert('Document deleted!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Investor Relations</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage page content and investor documents</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setActiveTab('content')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'content' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Page Content\n            </button>\n            <button\n              onClick={() => setActiveTab('documents')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'documents' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Documents\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n            </div>\n          ) : activeTab === 'content' ? (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\n                <button\n                  onClick={handleSavePageContent}\n                  disabled={saving}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n                >\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <FormField label=\"Hero Title\">\n                  <input\n                    type=\"text\"\n                    value={pageContent.heroTitle || ''}\n                    onChange={(e) => setPageContent({ ...pageContent, heroTitle: e.target.value || null })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </FormField>\n                <FormField label=\"Hero Subtitle\">\n                  <input\n                    type=\"text\"\n                    value={pageContent.heroSubtitle || ''}\n                    onChange={(e) => setPageContent({ ...pageContent, heroSubtitle: e.target.value || null })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </FormField>\n                <div className=\"md:col-span-2\">\n                  <ImageSelector\n                    value={pageContent.heroImageId}\n                    onChange={(id) => setPageContent({ ...pageContent, heroImageId: id })}\n                    label=\"Hero Image\"\n                  />\n                </div>\n                <div className=\"md:col-span-2\">\n                  <FormField label=\"Intro Text\">\n                    <textarea\n                      value={pageContent.introText || ''}\n                      onChange={(e) => setPageContent({ ...pageContent, introText: e.target.value || null })}\n                      rows={4}\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </FormField>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Investor Documents</h3>\n                <button\n                  onClick={() => {\n                    setEditingDocument({\n                      id: 0,\n                      title: '',\n                      description: null,\n                      fileId: null,\n                      documentType: null,\n                      publishDate: null,\n                      orderIndex: documents.length,\n                      isActive: true\n                    });\n                    setShowDocumentModal(true);\n                  }}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>Add Document\n                </button>\n              </div>\n              {documents.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-file-line text-4xl text-gray-400 mb-2\"></i>\n                  <p className=\"text-gray-500\">No documents yet</p>\n                </div>\n              ) : (\n                <DragDropList\n                  items={documents}\n                  onReorder={handleReorder}\n                  keyExtractor={(doc) => doc.id}\n                  renderItem={(doc: InvestorDocument) => (\n                    <div className=\"flex items-center justify-between w-full\">\n                      <div className=\"flex-1\">\n                        <h4 className=\"font-semibold text-gray-900\">{doc.title}</h4>\n                        {doc.documentType && <p className=\"text-sm text-gray-600\">{doc.documentType}</p>}\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`px-2 py-1 text-xs rounded-full ${doc.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                          {doc.isActive ? 'Active' : 'Inactive'}\n                        </span>\n                        <button onClick={() => { setEditingDocument(doc); setShowDocumentModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button onClick={() => handleDeleteDocument(doc.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showDocumentModal && editingDocument && (\n        <DocumentModal\n          document={editingDocument}\n          onSave={handleSaveDocument}\n          onClose={() => { setShowDocumentModal(false); setEditingDocument(null); }}\n          saving={saving}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction DocumentModal({ document, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<InvestorDocument>(document);\n  const [uploading, setUploading] = useState(false);\n\n  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    setUploading(true);\n    try {\n      const formDataObj = new FormData();\n      formDataObj.append('file', file);\n      const token = localStorage.getItem('auth_token');\n      const response = await fetch(`${import.meta.env.VITE_API_URL?.replace('/api/v1', '')}/api/v1/upload/file`, {\n        method: 'POST',\n        headers: { 'Authorization': `Bearer ${token || ''}` },\n        body: formDataObj\n      });\n      const data = await response.json();\n      if (data.success && data.mediaId) {\n        setFormData({ ...formData, fileId: data.mediaId });\n      }\n    } catch (error) {\n      alert('Upload failed');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  return (\n    <Modal isOpen={true} onClose={onClose} title={document.id > 0 ? 'Edit Document' : 'Add Document'} size=\"lg\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Title\" required>\n          <input\n            type=\"text\"\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n        <FormField label=\"Description\">\n          <textarea\n            value={formData.description || ''}\n            onChange={(e) => setFormData({ ...formData, description: e.target.value || null })}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n        <FormField label=\"Document Type\">\n          <select\n            value={formData.documentType || ''}\n            onChange={(e) => setFormData({ ...formData, documentType: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"\">Select type</option>\n            <option value=\"Annual Report\">Annual Report</option>\n            <option value=\"Quarterly Report\">Quarterly Report</option>\n            <option value=\"Press Release\">Press Release</option>\n            <option value=\"Other\">Other</option>\n          </select>\n        </FormField>\n        <FormField label=\"Publish Date\">\n          <input\n            type=\"date\"\n            value={formData.publishDate ? new Date(formData.publishDate).toISOString().split('T')[0] : ''}\n            onChange={(e) => setFormData({ ...formData, publishDate: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n        </FormField>\n        <FormField label=\"Document File\">\n          <input\n            type=\"file\"\n            accept=\".pdf,.doc,.docx\"\n            onChange={handleFileUpload}\n            disabled={uploading}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          />\n          {uploading && <p className=\"text-sm text-blue-600 mt-2\">Uploading...</p>}\n        </FormField>\n        <FormField label=\"Status\">\n          <select\n            value={formData.isActive ? 'active' : 'inactive'}\n            onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.title}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\nimport { getImageUrl } from '../../../../utils/imageUrl';\n\ntype TabType = 'content' | 'clients';\n\ninterface ClientsPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  heroImage?: { filePath: string };\n}\n\ninterface Client {\n  id: number;\n  name: string;\n  logoId: number | null;\n  websiteUrl: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  logo?: {\n    filePath: string;\n    altText: string;\n    fileName: string;\n  };\n}\n\nexport default function ClientsPageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [clients, setClients] = useState<Client[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [editingClient, setEditingClient] = useState<Client | null>(null);\n  const [viewingClient, setViewingClient] = useState<Client | null>(null);\n\n  // Page Content\n  const [pageContent, setPageContent] = useState<ClientsPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null\n  });\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchClients();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<ClientsPageContent>('/clients/page-content');\n      if (response.success && response.data) {\n        const data = response.data as ClientsPageContent;\n        setPageContent({\n          id: data.id || undefined,\n          heroTitle: data.heroTitle || null,\n          heroSubtitle: data.heroSubtitle || null,\n          heroImageId: data.heroImageId || null,\n          introText: data.introText || null,\n          heroImage: data.heroImage\n        });\n      }\n    } catch (error: any) {\n      console.error('Error fetching page content:', error);\n      // Don't show alert for \"not found\" - it's okay if content doesn't exist yet\n      if (!error.message?.includes('not found')) {\n        alert(error.message || 'Failed to load page content');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchClients = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<Client[]>('/clients');\n      if (response.success && response.data) {\n        setClients((response.data as Client[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching clients:', error);\n      alert(error.message || 'Failed to load clients');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      // Only send the fields that should be updated\n      const payload = {\n        heroTitle: pageContent.heroTitle || null,\n        heroSubtitle: pageContent.heroSubtitle || null,\n        heroImageId: pageContent.heroImageId || null,\n        introText: pageContent.introText || null\n      };\n      \n      const response = await api.put('/clients/page-content', payload);\n      if (response.success) {\n        alert('Page content saved successfully!');\n        fetchPageContent(); // Refresh to get updated data with associations\n      } else {\n        throw new Error(response.message || 'Failed to save page content');\n      }\n    } catch (error: any) {\n      console.error('Error saving page content:', error);\n      alert(error.message || 'Failed to save page content');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Extract client name from logo filename or use existing name\n  const getClientDisplayName = (client: Client): string => {\n    // If name exists and is not generic, use it\n    if (client.name && !client.name.match(/^Client\\s+\\d+$/i)) {\n      return client.name;\n    }\n    \n    // Try to extract from logo altText\n    if (client.logo?.altText) {\n      return client.logo.altText;\n    }\n    \n    // Try to extract from logo filename (remove extension and clean up)\n    if (client.logo?.fileName) {\n      const name = client.logo.fileName\n        .replace(/\\.[^/.]+$/, '') // Remove extension\n        .replace(/[-_]/g, ' ') // Replace dashes/underscores with spaces\n        .replace(/\\b\\w/g, l => l.toUpperCase()); // Capitalize words\n      if (name && name !== 'Logo') {\n        return name;\n      }\n    }\n    \n    // Fallback to original name\n    return client.name || 'Unnamed Client';\n  };\n\n  const handleReorder = async (reorderedClients: Client[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedClients.length; i++) {\n        await api.put(`/clients/${reorderedClients[i].id}`, {\n          ...reorderedClients[i],\n          orderIndex: i\n        });\n      }\n      setClients(reorderedClients);\n      alert('Clients order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveClient = async (client: Client) => {\n    setSaving(true);\n    try {\n      if (client.id && client.id > 0) {\n        const response = await api.put(`/clients/${client.id}`, client);\n        if (!response.success) {\n          throw new Error(response.message || 'Failed to update client');\n        }\n      } else {\n        const response = await api.post('/clients', { ...client, orderIndex: clients.length });\n        if (!response.success) {\n          throw new Error(response.message || 'Failed to create client');\n        }\n      }\n      setShowClientModal(false);\n      setEditingClient(null);\n      fetchClients();\n      alert('Client saved successfully!');\n    } catch (error: any) {\n      const errorMessage = error.message || 'Failed to save client';\n      if (errorMessage.includes('not found')) {\n        alert('This client no longer exists. Please refresh the page and try again.');\n        fetchClients(); // Refresh the list\n      } else {\n        alert(errorMessage);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteClient = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this client?')) return;\n    setSaving(true);\n    try {\n      const response = await api.delete(`/clients/${id}`);\n      if (!response.success) {\n        throw new Error(response.message || 'Failed to delete client');\n      }\n      setClients(clients.filter(c => c.id !== id));\n      alert('Client deleted successfully!');\n    } catch (error: any) {\n      const errorMessage = error.message || 'Failed to delete client';\n      if (errorMessage.includes('not found')) {\n        alert('This client no longer exists. The list will be refreshed.');\n        fetchClients(); // Refresh the list\n      } else {\n        alert(errorMessage);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Clients Page Management</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage clients page content and client list</p>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"mt-6 border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('content')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'content'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-file-text-line mr-2\"></i>Page Content\n            </button>\n            <button\n              onClick={() => setActiveTab('clients')}\n              className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'clients'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <i className=\"ri-group-line mr-2\"></i>Clients List\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      {activeTab === 'content' ? (\n        <PageContentEditor\n          content={pageContent}\n          onChange={setPageContent}\n          onSave={handleSavePageContent}\n          saving={saving}\n        />\n      ) : (\n        <div>\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">Clients</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">Manage client logos and information</p>\n              </div>\n              <button\n                onClick={() => {\n                  setEditingClient({\n                    id: 0,\n                    name: '',\n                    logoId: null,\n                    websiteUrl: '',\n                    orderIndex: clients.length,\n                    isActive: true\n                  });\n                  setShowClientModal(true);\n                }}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n              >\n                <i className=\"ri-add-line mr-2\"></i>Add Client\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <div className=\"flex items-start space-x-3\">\n              <i className=\"ri-information-line text-blue-600 text-xl mt-0.5\"></i>\n              <div className=\"flex-1\">\n                <p className=\"text-sm text-blue-800\">\n                  <strong>Tip:</strong> Drag and drop clients to reorder them. The order will appear on your clients page.\n                </p>\n              </div>\n            </div>\n          </div>\n\n              {loading ? (\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n              <p className=\"text-gray-600 mt-2\">Loading clients...</p>\n            </div>\n          ) : clients.length === 0 ? (\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n              <i className=\"ri-user-heart-line text-6xl text-gray-300 mb-4\"></i>\n              <p className=\"text-gray-600 mb-4\">No clients yet. Add your first client!</p>\n              <button\n                onClick={() => {\n                  setEditingClient({\n                    id: 0,\n                    name: '',\n                    logoId: null,\n                    websiteUrl: '',\n                    orderIndex: 0,\n                    isActive: true\n                  });\n                  setShowClientModal(true);\n                }}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n              >\n                <i className=\"ri-add-line mr-2\"></i>Add Client\n              </button>\n            </div>\n          ) : (\n            <div className=\"bg-white rounded-lg shadow-sm p-6\">\n              <DragDropList\n                items={clients}\n                onReorder={handleReorder}\n                keyExtractor={(client) => client.id}\n                emptyMessage=\"No clients yet. Click 'Add Client' to get started!\"\n                renderItem={(client: Client) => (\n                  <div className=\"flex items-center space-x-4 w-full\">\n                    {client.logo && (\n                      <img\n                        src={getImageUrl(client.logo)}\n                        alt={getClientDisplayName(client)}\n                        className=\"w-20 h-20 object-contain bg-gray-50 rounded-lg p-2\"\n                      />\n                    )}\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-gray-900\">{getClientDisplayName(client)}</h3>\n                      {client.websiteUrl && (\n                        <a\n                          href={client.websiteUrl}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"text-sm text-blue-600 hover:underline\"\n                        >\n                          <i className=\"ri-external-link-line mr-1\"></i>\n                          {client.websiteUrl}\n                        </a>\n                      )}\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        client.isActive \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-gray-100 text-gray-800'\n                      }`}>\n                        {client.isActive ? 'Active' : 'Inactive'}\n                      </span>\n                      <button\n                        onClick={() => setViewingClient(client)}\n                        className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                        title=\"View\"\n                      >\n                        <i className=\"ri-eye-line\"></i>\n                      </button>\n                      <button\n                        onClick={() => {\n                          setEditingClient(client);\n                          setShowClientModal(true);\n                        }}\n                        className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                        title=\"Edit\"\n                      >\n                        <i className=\"ri-edit-line\"></i>\n                      </button>\n                      <button\n                        onClick={() => handleDeleteClient(client.id)}\n                        className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                        title=\"Delete\"\n                      >\n                        <i className=\"ri-delete-bin-line\"></i>\n                      </button>\n                    </div>\n                  </div>\n                )}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {showClientModal && editingClient && (\n        <ClientModal\n          client={editingClient}\n          onSave={handleSaveClient}\n          onClose={() => {\n            setShowClientModal(false);\n            setEditingClient(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {viewingClient && (\n        <ClientViewModal\n          client={viewingClient}\n          onClose={() => setViewingClient(null)}\n          onEdit={() => {\n            setEditingClient(viewingClient);\n            setViewingClient(null);\n            setShowClientModal(true);\n          }}\n          getImageUrl={(logo: any) => getImageUrl(logo)}\n          getClientDisplayName={getClientDisplayName}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction PageContentEditor({ content, onChange, onSave, saving }: any) {\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm p-6\">\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Hero Section</h3>\n      \n      <div className=\"space-y-6\">\n        <FormField label=\"Hero Title\">\n          <input\n            type=\"text\"\n            value={content.heroTitle || ''}\n            onChange={(e) => onChange({ ...content, heroTitle: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Clients\"\n          />\n        </FormField>\n\n        <FormField label=\"Hero Subtitle\">\n          <textarea\n            value={content.heroSubtitle || ''}\n            onChange={(e) => onChange({ ...content, heroSubtitle: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            rows={3}\n            placeholder=\"Unlock Your Potential\"\n          />\n        </FormField>\n\n        <ImageSelector\n          value={content.heroImageId}\n          onChange={(id) => onChange({ ...content, heroImageId: id })}\n          label=\"Hero Background Image\"\n          aspectRatio=\"16/9\"\n          currentImage={content.heroImage}\n        />\n\n        <FormField label=\"Intro Text\" hint=\"Optional text below hero section\">\n          <textarea\n            value={content.introText || ''}\n            onChange={(e) => onChange({ ...content, introText: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            rows={4}\n            placeholder=\"Add introduction text here...\"\n          />\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onSave}\n            disabled={saving}\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save Changes'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ClientModal({ client, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<Client>(client);\n\n  return (\n    <Modal \n      isOpen={true} \n      onClose={onClose} \n      title={client.id && client.id > 0 ? 'Edit Client' : 'Add New Client'} \n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Client Name\" required>\n          <input\n            type=\"text\"\n            value={formData.name}\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter client name\"\n          />\n        </FormField>\n\n        <FormField label=\"Website URL\" hint=\"Optional - Include https://\">\n          <input\n            type=\"url\"\n            value={formData.websiteUrl || ''}\n            onChange={(e) => setFormData({ ...formData, websiteUrl: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"https://example.com\"\n          />\n        </FormField>\n\n        <ImageSelector\n          value={formData.logoId}\n          onChange={(id) => setFormData({ ...formData, logoId: id })}\n          label=\"Client Logo\"\n          aspectRatio=\"3/2\"\n        />\n\n        <FormField label=\"Status\">\n          <select\n            value={formData.isActive ? 'active' : 'inactive'}\n            onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.name}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : client.id && client.id > 0 ? 'Update Client' : 'Create Client'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction ClientViewModal({ client, onClose, onEdit, getImageUrl, getClientDisplayName }: any) {\n  return (\n    <Modal isOpen={true} onClose={onClose} title=\"Client Details\" size=\"lg\">\n      <div className=\"space-y-6\">\n        {client.logo && (\n          <div className=\"flex justify-center\">\n            <img\n              src={getImageUrl(client.logo)}\n              alt={getClientDisplayName(client)}\n              className=\"max-w-xs max-h-48 object-contain bg-gray-50 rounded-lg p-4\"\n            />\n          </div>\n        )}\n\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900 mb-4\">{getClientDisplayName(client)}</h3>\n          \n          {client.websiteUrl && (\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Website</label>\n              <a\n                href={client.websiteUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:underline\"\n              >\n                <i className=\"ri-external-link-line mr-2\"></i>\n                {client.websiteUrl}\n              </a>\n            </div>\n          )}\n\n          <div>\n            <span className={`inline-block px-3 py-1 text-sm rounded-full ${\n              client.isActive \n                ? 'bg-green-100 text-green-800' \n                : 'bg-gray-100 text-gray-800'\n            }`}>\n              {client.isActive ? 'Active' : 'Inactive'}\n            </span>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Close\n          </button>\n          <button\n            onClick={onEdit}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-edit-line mr-2\"></i>Edit Client\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ninterface Leader {\n  id: number;\n  fullName: string;\n  position: string;\n  department: string | null;\n  bio: string | null;\n  imageId: number | null;\n  email: string | null;\n  linkedinUrl: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  image?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function ManagementPageManagement() {\n  const [leaders, setLeaders] = useState<Leader[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [showLeaderModal, setShowLeaderModal] = useState(false);\n  const [editingLeader, setEditingLeader] = useState<Leader | null>(null);\n  const [viewingLeader, setViewingLeader] = useState<Leader | null>(null);\n\n  useEffect(() => {\n    fetchLeaders();\n  }, []);\n\n  const fetchLeaders = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<Leader[]>('/leaders');\n      if (response.success && response.data) {\n        setLeaders((response.data as Leader[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      console.error('Error fetching leaders:', error);\n      alert(error.message || 'Failed to load leaders');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleReorder = async (reorderedLeaders: Leader[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedLeaders.length; i++) {\n        await api.put(`/leaders/${reorderedLeaders[i].id}`, {\n          ...reorderedLeaders[i],\n          orderIndex: i\n        });\n      }\n      setLeaders(reorderedLeaders);\n      alert('Leaders order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveLeader = async (leader: Leader) => {\n    setSaving(true);\n    try {\n      if (leader.id && leader.id > 0) {\n        await api.put(`/leaders/${leader.id}`, leader);\n      } else {\n        await api.post('/leaders', { ...leader, orderIndex: leaders.length });\n      }\n      setShowLeaderModal(false);\n      setEditingLeader(null);\n      fetchLeaders();\n      alert('Leader saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save leader');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteLeader = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this leader?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/leaders/${id}`);\n      setLeaders(leaders.filter(l => l.id !== id));\n      alert('Leader deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete leader');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getImageUrl = (leader: Leader): string => {\n    if (!leader.image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${leader.image.filePath}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Management Team</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage leadership team members</p>\n          </div>\n          <button\n            onClick={() => {\n              setEditingLeader({\n                id: 0,\n                fullName: '',\n                position: '',\n                department: null,\n                bio: null,\n                imageId: null,\n                email: null,\n                linkedinUrl: null,\n                orderIndex: leaders.length,\n                isActive: true\n              });\n              setShowLeaderModal(true);\n            }}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>Add Leader\n          </button>\n        </div>\n      </div>\n\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex items-start space-x-3\">\n          <i className=\"ri-information-line text-blue-600 text-xl mt-0.5\"></i>\n          <div className=\"flex-1\">\n            <p className=\"text-sm text-blue-800\">\n              <strong>Tip:</strong> Drag and drop leaders to reorder them on the management page.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n          <p className=\"text-gray-600 mt-2\">Loading leaders...</p>\n        </div>\n      ) : leaders.length === 0 ? (\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n          <i className=\"ri-team-line text-6xl text-gray-300 mb-4\"></i>\n          <p className=\"text-gray-600 mb-4\">No leaders yet. Add your first team member!</p>\n          <button\n            onClick={() => {\n              setEditingLeader({\n                id: 0,\n                fullName: '',\n                position: '',\n                department: null,\n                bio: null,\n                imageId: null,\n                email: null,\n                linkedinUrl: null,\n                orderIndex: 0,\n                isActive: true\n              });\n              setShowLeaderModal(true);\n            }}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-add-line mr-2\"></i>Add Leader\n          </button>\n        </div>\n      ) : (\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <DragDropList\n            items={leaders}\n            onReorder={handleReorder}\n            keyExtractor={(leader) => leader.id}\n            emptyMessage=\"No leaders yet. Click 'Add Leader' to get started!\"\n            renderItem={(leader: Leader) => (\n              <div className=\"flex items-center space-x-4 w-full\">\n                {leader.image && (\n                  <img\n                    src={getImageUrl(leader)}\n                    alt={leader.fullName}\n                    className=\"w-16 h-16 rounded-full object-cover\"\n                  />\n                )}\n                <div className=\"flex-1\">\n                  <h3 className=\"font-semibold text-gray-900\">{leader.fullName}</h3>\n                  <p className=\"text-sm text-gray-600\">{leader.position}</p>\n                  {leader.department && (\n                    <p className=\"text-xs text-gray-500\">{leader.department}</p>\n                  )}\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <span className={`px-2 py-1 text-xs rounded-full ${\n                    leader.isActive \n                      ? 'bg-green-100 text-green-800' \n                      : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {leader.isActive ? 'Active' : 'Inactive'}\n                  </span>\n                  <button\n                    onClick={() => setViewingLeader(leader)}\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                    title=\"View\"\n                  >\n                    <i className=\"ri-eye-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => {\n                      setEditingLeader(leader);\n                      setShowLeaderModal(true);\n                    }}\n                    className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\n                    title=\"Edit\"\n                  >\n                    <i className=\"ri-edit-line\"></i>\n                  </button>\n                  <button\n                    onClick={() => handleDeleteLeader(leader.id)}\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                    title=\"Delete\"\n                  >\n                    <i className=\"ri-delete-bin-line\"></i>\n                  </button>\n                </div>\n              </div>\n            )}\n          />\n        </div>\n      )}\n\n      {showLeaderModal && editingLeader && (\n        <LeaderModal\n          leader={editingLeader}\n          onSave={handleSaveLeader}\n          onClose={() => {\n            setShowLeaderModal(false);\n            setEditingLeader(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {viewingLeader && (\n        <LeaderViewModal\n          leader={viewingLeader}\n          onClose={() => setViewingLeader(null)}\n          onEdit={() => {\n            setEditingLeader(viewingLeader);\n            setViewingLeader(null);\n            setShowLeaderModal(true);\n          }}\n          getImageUrl={getImageUrl}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction LeaderModal({ leader, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<Leader>(leader);\n\n  return (\n    <Modal \n      isOpen={true} \n      onClose={onClose} \n      title={leader.id && leader.id > 0 ? 'Edit Leader' : 'Add New Leader'} \n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Full Name\" required>\n            <input\n              type=\"text\"\n              value={formData.fullName}\n              onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"John Doe\"\n            />\n          </FormField>\n\n          <FormField label=\"Position\" required>\n            <input\n              type=\"text\"\n              value={formData.position}\n              onChange={(e) => setFormData({ ...formData, position: e.target.value })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"CEO\"\n            />\n          </FormField>\n        </div>\n\n        <FormField label=\"Department\">\n          <input\n            type=\"text\"\n            value={formData.department || ''}\n            onChange={(e) => setFormData({ ...formData, department: e.target.value || null })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Executive\"\n          />\n        </FormField>\n\n        <FormField label=\"Bio\">\n          <textarea\n            value={formData.bio || ''}\n            onChange={(e) => setFormData({ ...formData, bio: e.target.value || null })}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter leader's biography\"\n          />\n        </FormField>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Email\">\n            <input\n              type=\"email\"\n              value={formData.email || ''}\n              onChange={(e) => setFormData({ ...formData, email: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"john@example.com\"\n            />\n          </FormField>\n\n          <FormField label=\"LinkedIn URL\">\n            <input\n              type=\"url\"\n              value={formData.linkedinUrl || ''}\n              onChange={(e) => setFormData({ ...formData, linkedinUrl: e.target.value || null })}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"https://linkedin.com/in/johndoe\"\n            />\n          </FormField>\n        </div>\n\n        <ImageSelector\n          value={formData.imageId}\n          onChange={(id) => setFormData({ ...formData, imageId: id })}\n          label=\"Profile Photo\"\n          aspectRatio=\"1/1\"\n        />\n\n        <FormField label=\"Status\">\n          <select\n            value={formData.isActive ? 'active' : 'inactive'}\n            onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n          >\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.fullName || !formData.position}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : leader.id && leader.id > 0 ? 'Update Leader' : 'Create Leader'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction LeaderViewModal({ leader, onClose, onEdit, getImageUrl }: any) {\n  return (\n    <Modal isOpen={true} onClose={onClose} title=\"Leader Details\" size=\"lg\">\n      <div className=\"space-y-6\">\n        {leader.image && (\n          <div className=\"flex justify-center\">\n            <img\n              src={getImageUrl(leader)}\n              alt={leader.fullName}\n              className=\"w-32 h-32 rounded-full object-cover\"\n            />\n          </div>\n        )}\n\n        <div className=\"text-center\">\n          <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">{leader.fullName}</h3>\n          <p className=\"text-lg text-gray-700 mb-1\">{leader.position}</p>\n          {leader.department && (\n            <p className=\"text-blue-600 font-medium\">{leader.department}</p>\n          )}\n        </div>\n\n        {leader.bio && (\n          <div>\n            <h4 className=\"font-semibold text-gray-900 mb-2\">Biography</h4>\n            <p className=\"text-gray-600\">{leader.bio}</p>\n          </div>\n        )}\n\n        <div className=\"space-y-2\">\n          {leader.email && (\n            <div>\n              <i className=\"ri-mail-line mr-2 text-gray-500\"></i>\n              <a href={`mailto:${leader.email}`} className=\"text-blue-600 hover:underline\">\n                {leader.email}\n              </a>\n            </div>\n          )}\n          {leader.linkedinUrl && (\n            <div>\n              <i className=\"ri-linkedin-line mr-2 text-gray-500\"></i>\n              <a\n                href={leader.linkedinUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:underline\"\n              >\n                LinkedIn Profile\n              </a>\n            </div>\n          )}\n        </div>\n\n        <div>\n          <span className={`inline-block px-3 py-1 text-sm rounded-full ${\n            leader.isActive \n              ? 'bg-green-100 text-green-800' \n              : 'bg-gray-100 text-gray-800'\n          }`}>\n            {leader.isActive ? 'Active' : 'Inactive'}\n          </span>\n        </div>\n\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Close\n          </button>\n          <button\n            onClick={onEdit}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\"\n          >\n            <i className=\"ri-edit-line mr-2\"></i>Edit Leader\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype TabType = 'content' | 'locations';\n\ninterface OurPresencePageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  mapImageId: number | null;\n  salesServiceHeading: string | null;\n  salesServiceContent: string | null;\n  salesServiceImageId: number | null;\n}\n\ninterface OfficeLocation {\n  id: number;\n  officeType: string | null;\n  city: string | null;\n  state: string | null;\n  country: string | null;\n  address: string | null;\n  phone: string | null;\n  email: string | null;\n  latitude: number | null;\n  longitude: number | null;\n  isActive: boolean;\n}\n\nexport default function OurPresencePageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [pageContent, setPageContent] = useState<OurPresencePageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null,\n    mapImageId: null,\n    salesServiceHeading: null,\n    salesServiceContent: null,\n    salesServiceImageId: null\n  });\n\n  const [locations, setLocations] = useState<OfficeLocation[]>([]);\n  const [showLocationModal, setShowLocationModal] = useState(false);\n  const [editingLocation, setEditingLocation] = useState<OfficeLocation | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchLocations();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<OurPresencePageContent>('/our-presence');\n      if (response.success && response.data) {\n        setPageContent(response.data as OurPresencePageContent);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchLocations = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<OfficeLocation[]>('/our-presence/locations');\n      if (response.success && response.data) {\n        setLocations(response.data as OfficeLocation[]);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      await api.put('/our-presence', pageContent);\n      alert('Saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveLocation = async (loc: OfficeLocation) => {\n    setSaving(true);\n    try {\n      if (loc.id && loc.id > 0) {\n        await api.put(`/our-presence/locations/${loc.id}`, loc);\n      } else {\n        await api.post('/our-presence/locations', loc);\n      }\n      setShowLocationModal(false);\n      setEditingLocation(null);\n      fetchLocations();\n      alert('Location saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteLocation = async (id: number) => {\n    if (!confirm('Delete this location?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/our-presence/locations/${id}`);\n      setLocations(locations.filter(l => l.id !== id));\n      alert('Location deleted!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Our Presence</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage page content and office locations</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => setActiveTab('content')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'content' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Page Content\n            </button>\n            <button\n              onClick={() => setActiveTab('locations')}\n              className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${\n                activeTab === 'locations' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'\n              }`}\n            >\n              Office Locations\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n            </div>\n          ) : activeTab === 'content' ? (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\n                <button\n                  onClick={handleSavePageContent}\n                  disabled={saving}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n                >\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <FormField label=\"Hero Title\">\n                  <input type=\"text\" value={pageContent.heroTitle || ''} onChange={(e) => setPageContent({ ...pageContent, heroTitle: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n                </FormField>\n                <FormField label=\"Hero Subtitle\">\n                  <input type=\"text\" value={pageContent.heroSubtitle || ''} onChange={(e) => setPageContent({ ...pageContent, heroSubtitle: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n                </FormField>\n                <div className=\"md:col-span-2\">\n                  <ImageSelector value={pageContent.heroImageId} onChange={(id) => setPageContent({ ...pageContent, heroImageId: id })} label=\"Hero Image\" />\n                </div>\n                <div className=\"md:col-span-2\">\n                  <FormField label=\"Intro Text\">\n                    <textarea value={pageContent.introText || ''} onChange={(e) => setPageContent({ ...pageContent, introText: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n                  </FormField>\n                </div>\n                <div className=\"md:col-span-2\">\n                  <ImageSelector value={pageContent.mapImageId} onChange={(id) => setPageContent({ ...pageContent, mapImageId: id })} label=\"Map Image\" />\n                </div>\n                <FormField label=\"Sales & Service Heading\">\n                  <input type=\"text\" value={pageContent.salesServiceHeading || ''} onChange={(e) => setPageContent({ ...pageContent, salesServiceHeading: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n                </FormField>\n                <div className=\"md:col-span-2\">\n                  <FormField label=\"Sales & Service Content\">\n                    <textarea value={pageContent.salesServiceContent || ''} onChange={(e) => setPageContent({ ...pageContent, salesServiceContent: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n                  </FormField>\n                </div>\n                <div className=\"md:col-span-2\">\n                  <ImageSelector value={pageContent.salesServiceImageId} onChange={(id) => setPageContent({ ...pageContent, salesServiceImageId: id })} label=\"Sales & Service Image\" />\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Office Locations</h3>\n                <button\n                  onClick={() => {\n                    setEditingLocation({\n                      id: 0,\n                      officeType: null,\n                      city: null,\n                      state: null,\n                      country: null,\n                      address: null,\n                      phone: null,\n                      email: null,\n                      latitude: null,\n                      longitude: null,\n                      isActive: true\n                    });\n                    setShowLocationModal(true);\n                  }}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>Add Location\n                </button>\n              </div>\n              {locations.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-map-pin-line text-4xl text-gray-400 mb-2\"></i>\n                  <p className=\"text-gray-500\">No locations yet</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {locations.map((loc) => (\n                    <div key={loc.id} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900\">{loc.city}, {loc.state || loc.country}</h4>\n                          {loc.officeType && <p className=\"text-sm text-gray-600\">{loc.officeType}</p>}\n                          {loc.address && <p className=\"text-sm text-gray-600 mt-1\">{loc.address}</p>}\n                          <div className=\"flex flex-wrap gap-2 mt-2 text-sm text-gray-600\">\n                            {loc.phone && <span><i className=\"ri-phone-line mr-1\"></i>{loc.phone}</span>}\n                            {loc.email && <span><i className=\"ri-mail-line mr-1\"></i>{loc.email}</span>}\n                          </div>\n                        </div>\n                        <div className=\"flex items-center space-x-2 ml-4\">\n                          <span className={`px-2 py-1 text-xs rounded-full ${loc.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                            {loc.isActive ? 'Active' : 'Inactive'}\n                          </span>\n                          <button onClick={() => { setEditingLocation(loc); setShowLocationModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\n                            <i className=\"ri-edit-line\"></i>\n                          </button>\n                          <button onClick={() => handleDeleteLocation(loc.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\n                            <i className=\"ri-delete-bin-line\"></i>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showLocationModal && editingLocation && (\n        <LocationModal\n          location={editingLocation}\n          onSave={handleSaveLocation}\n          onClose={() => { setShowLocationModal(false); setEditingLocation(null); }}\n          saving={saving}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction LocationModal({ location, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<OfficeLocation>(location);\n\n  return (\n    <Modal isOpen={true} onClose={onClose} title={location.id > 0 ? 'Edit Location' : 'Add Location'} size=\"lg\">\n      <div className=\"space-y-6\">\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Office Type\">\n            <input type=\"text\" value={formData.officeType || ''} onChange={(e) => setFormData({ ...formData, officeType: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"Headquarters\" />\n          </FormField>\n          <FormField label=\"City\">\n            <input type=\"text\" value={formData.city || ''} onChange={(e) => setFormData({ ...formData, city: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n          <FormField label=\"State\">\n            <input type=\"text\" value={formData.state || ''} onChange={(e) => setFormData({ ...formData, state: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n          <FormField label=\"Country\">\n            <input type=\"text\" value={formData.country || ''} onChange={(e) => setFormData({ ...formData, country: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n        </div>\n        <FormField label=\"Address\">\n          <textarea value={formData.address || ''} onChange={(e) => setFormData({ ...formData, address: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n        </FormField>\n        <div className=\"grid grid-cols-2 gap-4\">\n          <FormField label=\"Phone\">\n            <input type=\"text\" value={formData.phone || ''} onChange={(e) => setFormData({ ...formData, phone: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n          <FormField label=\"Email\">\n            <input type=\"email\" value={formData.email || ''} onChange={(e) => setFormData({ ...formData, email: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n          <FormField label=\"Latitude\">\n            <input type=\"number\" step=\"any\" value={formData.latitude || ''} onChange={(e) => setFormData({ ...formData, latitude: e.target.value ? parseFloat(e.target.value) : null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n          <FormField label=\"Longitude\">\n            <input type=\"number\" step=\"any\" value={formData.longitude || ''} onChange={(e) => setFormData({ ...formData, longitude: e.target.value ? parseFloat(e.target.value) : null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n          </FormField>\n        </div>\n        <FormField label=\"Status\">\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype TabType = 'content' | 'features';\n\ninterface ProductionFacilityPageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  flexibilityHeading: string | null;\n  flexibilityContent: string | null;\n  flexibilityImageId: number | null;\n  qualityHeading: string | null;\n  qualityContent: string | null;\n  qualityImageId: number | null;\n}\n\ninterface ProductionFacilityFeature {\n  id: number;\n  iconClass: string | null;\n  heading: string | null;\n  description: string | null;\n  orderIndex: number;\n}\n\nexport default function ProductionFacilityPageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [pageContent, setPageContent] = useState<ProductionFacilityPageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null,\n    flexibilityHeading: null,\n    flexibilityContent: null,\n    flexibilityImageId: null,\n    qualityHeading: null,\n    qualityContent: null,\n    qualityImageId: null\n  });\n\n  const [features, setFeatures] = useState<ProductionFacilityFeature[]>([]);\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\n  const [editingFeature, setEditingFeature] = useState<ProductionFacilityFeature | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchFeatures();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<ProductionFacilityPageContent>('/production-facility');\n      if (response.success && response.data) {\n        setPageContent(response.data as ProductionFacilityPageContent);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchFeatures = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<ProductionFacilityFeature[]>('/production-facility/features');\n      if (response.success && response.data) {\n        setFeatures((response.data as ProductionFacilityFeature[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      await api.put('/production-facility', pageContent);\n      alert('Saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorder = async (reorderedFeatures: ProductionFacilityFeature[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedFeatures.length; i++) {\n        await api.put(`/production-facility/features/${reorderedFeatures[i].id}`, {\n          ...reorderedFeatures[i],\n          orderIndex: i\n        });\n      }\n      setFeatures(reorderedFeatures);\n      alert('Order updated!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveFeature = async (feature: ProductionFacilityFeature) => {\n    setSaving(true);\n    try {\n      if (feature.id && feature.id > 0) {\n        await api.put(`/production-facility/features/${feature.id}`, feature);\n      } else {\n        await api.post('/production-facility/features', { ...feature, orderIndex: features.length });\n      }\n      setShowFeatureModal(false);\n      setEditingFeature(null);\n      fetchFeatures();\n      alert('Feature saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteFeature = async (id: number) => {\n    if (!confirm('Delete this feature?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/production-facility/features/${id}`);\n      setFeatures(features.filter(f => f.id !== id));\n      alert('Feature deleted!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Production Facility</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage page content and facility features</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button onClick={() => setActiveTab('content')} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${activeTab === 'content' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\n              Page Content\n            </button>\n            <button onClick={() => setActiveTab('features')} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${activeTab === 'features' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\n              Features\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n            </div>\n          ) : activeTab === 'content' ? (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <FormField label=\"Hero Title\"><input type=\"text\" value={pageContent.heroTitle || ''} onChange={(e) => setPageContent({ ...pageContent, heroTitle: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <FormField label=\"Hero Subtitle\"><input type=\"text\" value={pageContent.heroSubtitle || ''} onChange={(e) => setPageContent({ ...pageContent, heroSubtitle: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.heroImageId} onChange={(id) => setPageContent({ ...pageContent, heroImageId: id })} label=\"Hero Image\" /></div>\n                <div className=\"md:col-span-2\"><FormField label=\"Intro Text\"><textarea value={pageContent.introText || ''} onChange={(e) => setPageContent({ ...pageContent, introText: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\n                <FormField label=\"Flexibility Heading\"><input type=\"text\" value={pageContent.flexibilityHeading || ''} onChange={(e) => setPageContent({ ...pageContent, flexibilityHeading: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <div className=\"md:col-span-2\"><FormField label=\"Flexibility Content\"><textarea value={pageContent.flexibilityContent || ''} onChange={(e) => setPageContent({ ...pageContent, flexibilityContent: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.flexibilityImageId} onChange={(id) => setPageContent({ ...pageContent, flexibilityImageId: id })} label=\"Flexibility Image\" /></div>\n                <FormField label=\"Quality Heading\"><input type=\"text\" value={pageContent.qualityHeading || ''} onChange={(e) => setPageContent({ ...pageContent, qualityHeading: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <div className=\"md:col-span-2\"><FormField label=\"Quality Content\"><textarea value={pageContent.qualityContent || ''} onChange={(e) => setPageContent({ ...pageContent, qualityContent: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.qualityImageId} onChange={(id) => setPageContent({ ...pageContent, qualityImageId: id })} label=\"Quality Image\" /></div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Facility Features</h3>\n                <button onClick={() => { setEditingFeature({ id: 0, iconClass: null, heading: null, description: null, orderIndex: features.length }); setShowFeatureModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\n                  <i className=\"ri-add-line mr-2\"></i>Add Feature\n                </button>\n              </div>\n              {features.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-settings-3-line text-4xl text-gray-400 mb-2\"></i>\n                  <p className=\"text-gray-500\">No features yet</p>\n                </div>\n              ) : (\n                <DragDropList\n                  items={features}\n                  onReorder={handleReorder}\n                  keyExtractor={(f) => f.id}\n                  renderItem={(feature: ProductionFacilityFeature) => (\n                    <div className=\"flex items-center justify-between w-full\">\n                      <div className=\"flex items-center space-x-4\">\n                        {feature.iconClass && <i className={`${feature.iconClass} text-2xl text-blue-600`}></i>}\n                        <div>\n                          <h4 className=\"font-semibold text-gray-900\">{feature.heading}</h4>\n                          {feature.description && <p className=\"text-sm text-gray-600 line-clamp-1\">{feature.description}</p>}\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <button onClick={() => { setEditingFeature(feature); setShowFeatureModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button onClick={() => handleDeleteFeature(feature.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showFeatureModal && editingFeature && (\n        <FeatureModal\n          feature={editingFeature}\n          onSave={handleSaveFeature}\n          onClose={() => { setShowFeatureModal(false); setEditingFeature(null); }}\n          saving={saving}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<ProductionFacilityFeature>(feature);\n\n  return (\n    <Modal isOpen={true} onClose={onClose} title={feature.id > 0 ? 'Edit Feature' : 'Add Feature'} size=\"md\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Icon Class\" hint=\"RemixIcon class\">\n          <input type=\"text\" value={formData.iconClass || ''} onChange={(e) => setFormData({ ...formData, iconClass: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"ri-settings-3-line\" />\n          {formData.iconClass && <div className=\"mt-2 text-xs text-gray-500\">Preview: <i className={formData.iconClass}></i></div>}\n        </FormField>\n        <FormField label=\"Heading\">\n          <input type=\"text\" value={formData.heading || ''} onChange={(e) => setFormData({ ...formData, heading: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n        </FormField>\n        <FormField label=\"Description\">\n          <textarea value={formData.description || ''} onChange={(e) => setFormData({ ...formData, description: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n        </FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport Modal from '../../../../components/cms/Modal';\nimport FormField from '../../../../components/cms/FormField';\nimport DragDropList from '../../../../components/cms/DragDropList';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\n\ntype TabType = 'content' | 'certifications';\n\ninterface QualityAssurancePageContent {\n  id?: number;\n  heroTitle: string | null;\n  heroSubtitle: string | null;\n  heroImageId: number | null;\n  introText: string | null;\n  mainHeading: string | null;\n  mainContent: string | null;\n  mainImageId: number | null;\n}\n\ninterface Certification {\n  id: number;\n  name: string;\n  abbreviation: string | null;\n  logoId: number | null;\n  description: string | null;\n  orderIndex: number;\n  isActive: boolean;\n  logo?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function QualityAssurancePageManagement() {\n  const [activeTab, setActiveTab] = useState<TabType>('content');\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const [pageContent, setPageContent] = useState<QualityAssurancePageContent>({\n    heroTitle: null,\n    heroSubtitle: null,\n    heroImageId: null,\n    introText: null,\n    mainHeading: null,\n    mainContent: null,\n    mainImageId: null\n  });\n\n  const [certifications, setCertifications] = useState<Certification[]>([]);\n  const [showCertModal, setShowCertModal] = useState(false);\n  const [editingCert, setEditingCert] = useState<Certification | null>(null);\n\n  useEffect(() => {\n    if (activeTab === 'content') {\n      fetchPageContent();\n    } else {\n      fetchCertifications();\n    }\n  }, [activeTab]);\n\n  const fetchPageContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<QualityAssurancePageContent>('/quality-assurance');\n      if (response.success && response.data) {\n        setPageContent(response.data as QualityAssurancePageContent);\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchCertifications = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<Certification[]>('/quality-assurance/certifications');\n      if (response.success && response.data) {\n        setCertifications((response.data as Certification[]).sort((a, b) => a.orderIndex - b.orderIndex));\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to load');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSavePageContent = async () => {\n    setSaving(true);\n    try {\n      await api.put('/quality-assurance', pageContent);\n      alert('Saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorder = async (reorderedCerts: Certification[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedCerts.length; i++) {\n        await api.put(`/quality-assurance/certifications/${reorderedCerts[i].id}`, {\n          ...reorderedCerts[i],\n          orderIndex: i\n        });\n      }\n      setCertifications(reorderedCerts);\n      alert('Order updated!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveCert = async (cert: Certification) => {\n    setSaving(true);\n    try {\n      if (cert.id && cert.id > 0) {\n        await api.put(`/quality-assurance/certifications/${cert.id}`, cert);\n      } else {\n        await api.post('/quality-assurance/certifications', { ...cert, orderIndex: certifications.length });\n      }\n      setShowCertModal(false);\n      setEditingCert(null);\n      fetchCertifications();\n      alert('Certification saved!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteCert = async (id: number) => {\n    if (!confirm('Delete this certification?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/quality-assurance/certifications/${id}`);\n      setCertifications(certifications.filter(c => c.id !== id));\n      alert('Certification deleted!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getImageUrl = (cert: Certification): string => {\n    if (!cert.logo) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${cert.logo.filePath}`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900\">Quality Assurance</h2>\n        <p className=\"text-sm text-gray-600 mt-1\">Manage page content and certifications</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"border-b border-gray-200 px-6\">\n          <div className=\"flex space-x-2\">\n            <button onClick={() => setActiveTab('content')} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${activeTab === 'content' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\n              Page Content\n            </button>\n            <button onClick={() => setActiveTab('certifications')} className={`px-4 py-3 font-medium text-sm border-b-2 cursor-pointer ${activeTab === 'certifications' ? 'text-blue-600 border-blue-600' : 'text-gray-600 border-transparent hover:text-blue-600'}`}>\n              Certifications\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n            </div>\n          ) : activeTab === 'content' ? (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Page Content</h3>\n                <button onClick={handleSavePageContent} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\n                  {saving ? 'Saving...' : 'Save'}\n                </button>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <FormField label=\"Hero Title\"><input type=\"text\" value={pageContent.heroTitle || ''} onChange={(e) => setPageContent({ ...pageContent, heroTitle: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <FormField label=\"Hero Subtitle\"><input type=\"text\" value={pageContent.heroSubtitle || ''} onChange={(e) => setPageContent({ ...pageContent, heroSubtitle: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.heroImageId} onChange={(id) => setPageContent({ ...pageContent, heroImageId: id })} label=\"Hero Image\" /></div>\n                <div className=\"md:col-span-2\"><FormField label=\"Intro Text\"><textarea value={pageContent.introText || ''} onChange={(e) => setPageContent({ ...pageContent, introText: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\n                <FormField label=\"Main Heading\"><input type=\"text\" value={pageContent.mainHeading || ''} onChange={(e) => setPageContent({ ...pageContent, mainHeading: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField>\n                <div className=\"md:col-span-2\"><FormField label=\"Main Content\"><textarea value={pageContent.mainContent || ''} onChange={(e) => setPageContent({ ...pageContent, mainContent: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" /></FormField></div>\n                <div className=\"md:col-span-2\"><ImageSelector value={pageContent.mainImageId} onChange={(id) => setPageContent({ ...pageContent, mainImageId: id })} label=\"Main Image\" /></div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between\">\n                <h3 className=\"text-lg font-semibold\">Certifications</h3>\n                <button onClick={() => { setEditingCert({ id: 0, name: '', abbreviation: null, logoId: null, description: null, orderIndex: certifications.length, isActive: true }); setShowCertModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\n                  <i className=\"ri-add-line mr-2\"></i>Add Certification\n                </button>\n              </div>\n              {certifications.length === 0 ? (\n                <div className=\"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg\">\n                  <i className=\"ri-shield-check-line text-4xl text-gray-400 mb-2\"></i>\n                  <p className=\"text-gray-500\">No certifications yet</p>\n                </div>\n              ) : (\n                <DragDropList\n                  items={certifications}\n                  onReorder={handleReorder}\n                  keyExtractor={(c) => c.id}\n                  renderItem={(cert: Certification) => (\n                    <div className=\"flex items-center justify-between w-full\">\n                      <div className=\"flex items-center space-x-4\">\n                        {cert.logo && <img src={getImageUrl(cert)} alt={cert.name} className=\"w-12 h-12 object-contain\" />}\n                        <div>\n                          <h4 className=\"font-semibold text-gray-900\">{cert.name}</h4>\n                          {cert.abbreviation && <p className=\"text-sm text-gray-600\">{cert.abbreviation}</p>}\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`px-2 py-1 text-xs rounded-full ${cert.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\n                          {cert.isActive ? 'Active' : 'Inactive'}\n                        </span>\n                        <button onClick={() => { setEditingCert(cert); setShowCertModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button onClick={() => handleDeleteCert(cert.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showCertModal && editingCert && (\n        <CertModal\n          cert={editingCert}\n          onSave={handleSaveCert}\n          onClose={() => { setShowCertModal(false); setEditingCert(null); }}\n          saving={saving}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction CertModal({ cert, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState<Certification>(cert);\n\n  return (\n    <Modal isOpen={true} onClose={onClose} title={cert.id > 0 ? 'Edit Certification' : 'Add Certification'} size=\"lg\">\n      <div className=\"space-y-6\">\n        <FormField label=\"Certification Name\" required>\n          <input type=\"text\" value={formData.name} onChange={(e) => setFormData({ ...formData, name: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n        </FormField>\n        <FormField label=\"Abbreviation\">\n          <input type=\"text\" value={formData.abbreviation || ''} onChange={(e) => setFormData({ ...formData, abbreviation: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"ISO 13485\" />\n        </FormField>\n        <FormField label=\"Description\">\n          <textarea value={formData.description || ''} onChange={(e) => setFormData({ ...formData, description: e.target.value || null })} rows={4} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\n        </FormField>\n        <ImageSelector value={formData.logoId} onChange={(id) => setFormData({ ...formData, logoId: id })} label=\"Certification Logo\" aspectRatio=\"1/1\" />\n        <FormField label=\"Status\">\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\n            <option value=\"active\">Active</option>\n            <option value=\"inactive\">Inactive</option>\n          </select>\n        </FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.name} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\n            {saving ? 'Saving...' : 'Save'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { api } from '../../../../utils/api';\nimport FormField from '../../../../components/cms/FormField';\nimport ImageSelector from '../../../../components/cms/ImageSelector';\nimport Modal from '../../../../components/cms/Modal';\nimport DragDropList from '../../../../components/cms/DragDropList';\n\ninterface RequestDemoPageContent {\n  id?: number;\n  heroTitle: string | null;\n  introText: string | null;\n  backgroundImageId: number | null;\n  backgroundImage?: {\n    filePath: string;\n    altText: string;\n  };\n  paragraphs?: RequestDemoParagraph[];\n  features?: RequestDemoFeature[];\n}\n\ninterface RequestDemoParagraph {\n  id: number;\n  content: string;\n  orderIndex: number;\n}\n\ninterface RequestDemoFeature {\n  id: number;\n  title: string;\n  content: string;\n  iconImageId: number | null;\n  orderIndex: number;\n  iconImage?: {\n    filePath: string;\n    altText: string;\n  };\n}\n\nexport default function RequestDemoPageManagement() {\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [content, setContent] = useState<RequestDemoPageContent>({\n    heroTitle: null,\n    introText: null,\n    backgroundImageId: null\n  });\n  const [paragraphs, setParagraphs] = useState<RequestDemoParagraph[]>([]);\n  const [features, setFeatures] = useState<RequestDemoFeature[]>([]);\n  const [showParagraphModal, setShowParagraphModal] = useState(false);\n  const [showFeatureModal, setShowFeatureModal] = useState(false);\n  const [editingParagraph, setEditingParagraph] = useState<RequestDemoParagraph | null>(null);\n  const [editingFeature, setEditingFeature] = useState<RequestDemoFeature | null>(null);\n\n  useEffect(() => {\n    fetchContent();\n  }, []);\n\n  const fetchContent = async () => {\n    setLoading(true);\n    try {\n      const response = await api.get<RequestDemoPageContent>('/request-demo');\n      if (response.success && response.data) {\n        const data = response.data as RequestDemoPageContent;\n        setContent({\n          id: data.id,\n          heroTitle: data.heroTitle,\n          introText: data.introText,\n          backgroundImageId: data.backgroundImageId,\n          backgroundImage: data.backgroundImage\n        });\n        setParagraphs(data.paragraphs || []);\n        setFeatures(data.features || []);\n      }\n    } catch (error: any) {\n      console.error('Error fetching content:', error);\n      alert(error.message || 'Failed to load content');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const response = await api.put('/request-demo', content);\n      if (response.success) {\n        alert('Request Demo page saved successfully!');\n        fetchContent();\n      }\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveParagraph = async (paragraph: RequestDemoParagraph) => {\n    setSaving(true);\n    try {\n      if (paragraph.id && paragraph.id > 0) {\n        await api.put(`/request-demo/paragraphs/${paragraph.id}`, paragraph);\n      } else {\n        await api.post('/request-demo/paragraphs', { ...paragraph, orderIndex: paragraphs.length });\n      }\n      setShowParagraphModal(false);\n      setEditingParagraph(null);\n      fetchContent();\n      alert('Paragraph saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteParagraph = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this paragraph?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/request-demo/paragraphs/${id}`);\n      setParagraphs(paragraphs.filter(p => p.id !== id));\n      alert('Paragraph deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorderParagraphs = async (reorderedParagraphs: RequestDemoParagraph[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedParagraphs.length; i++) {\n        await api.put(`/request-demo/paragraphs/${reorderedParagraphs[i].id}`, {\n          ...reorderedParagraphs[i],\n          orderIndex: i\n        });\n      }\n      setParagraphs(reorderedParagraphs);\n      alert('Paragraphs order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveFeature = async (feature: RequestDemoFeature) => {\n    setSaving(true);\n    try {\n      if (feature.id && feature.id > 0) {\n        await api.put(`/request-demo/features/${feature.id}`, feature);\n      } else {\n        await api.post('/request-demo/features', { ...feature, orderIndex: features.length });\n      }\n      setShowFeatureModal(false);\n      setEditingFeature(null);\n      fetchContent();\n      alert('Feature saved successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteFeature = async (id: number) => {\n    if (!confirm('Are you sure you want to delete this feature?')) return;\n    setSaving(true);\n    try {\n      await api.delete(`/request-demo/features/${id}`);\n      setFeatures(features.filter(f => f.id !== id));\n      alert('Feature deleted successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to delete');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReorderFeatures = async (reorderedFeatures: RequestDemoFeature[]) => {\n    setSaving(true);\n    try {\n      for (let i = 0; i < reorderedFeatures.length; i++) {\n        await api.put(`/request-demo/features/${reorderedFeatures[i].id}`, {\n          ...reorderedFeatures[i],\n          orderIndex: i\n        });\n      }\n      setFeatures(reorderedFeatures);\n      alert('Features order updated successfully!');\n    } catch (error: any) {\n      alert(error.message || 'Failed to update order');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Request Demo Page</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">Manage request demo page content</p>\n          </div>\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : 'Save Changes'}\n          </button>\n        </div>\n      </div>\n\n      {loading ? (\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\n          <p className=\"text-gray-600 mt-2\">Loading...</p>\n        </div>\n      ) : (\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"space-y-6\">\n            <FormField label=\"Hero Title\">\n              <input\n                type=\"text\"\n                value={content.heroTitle || ''}\n                onChange={(e) => setContent({ ...content, heroTitle: e.target.value || null })}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Request a Demo\"\n              />\n            </FormField>\n\n            <FormField label=\"Intro Text\">\n              <textarea\n                value={content.introText || ''}\n                onChange={(e) => setContent({ ...content, introText: e.target.value || null })}\n                rows={4}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                placeholder=\"Enter introduction text\"\n              />\n            </FormField>\n\n            <div className=\"border-t pt-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Background Image</h3>\n              <ImageSelector\n                value={content.backgroundImageId}\n                onChange={(id) => setContent({ ...content, backgroundImageId: id })}\n                label=\"Page Background Image\"\n              />\n              <p className=\"text-sm text-gray-500 mt-2\">\n                <i className=\"ri-information-line mr-1\"></i>\n                Upload a background image (e.g., Frame-75-1.png). This will replace the default gradient background.\n              </p>\n            </div>\n\n            {/* Paragraphs Section */}\n            <div className=\"border-t pt-6 mt-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Paragraphs</h3>\n                <button\n                  onClick={() => {\n                    setEditingParagraph({ id: 0, content: '', orderIndex: paragraphs.length });\n                    setShowParagraphModal(true);\n                  }}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>Add Paragraph\n                </button>\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  <i className=\"ri-information-line mr-2\"></i>\n                  Add multiple paragraphs. Drag and drop to reorder.\n                </p>\n                <DragDropList\n                  items={paragraphs}\n                  onReorder={handleReorderParagraphs}\n                  keyExtractor={(p) => p.id}\n                  emptyMessage=\"No paragraphs yet. Click 'Add Paragraph' to get started!\"\n                  renderItem={(paragraph: RequestDemoParagraph) => (\n                    <div className=\"flex items-center justify-between w-full\">\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm text-gray-700 line-clamp-2\">{paragraph.content}</p>\n                      </div>\n                      <div className=\"flex items-center space-x-2 ml-4\">\n                        <button\n                          onClick={() => {\n                            setEditingParagraph(paragraph);\n                            setShowParagraphModal(true);\n                          }}\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                        >\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button\n                          onClick={() => handleDeleteParagraph(paragraph.id)}\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                        >\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                />\n              </div>\n            </div>\n\n            {/* Features Section */}\n            <div className=\"border-t pt-6 mt-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">Features</h3>\n                <button\n                  onClick={() => {\n                    setEditingFeature({ id: 0, title: '', content: '', iconImageId: null, orderIndex: features.length });\n                    setShowFeatureModal(true);\n                  }}\n                  className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\n                >\n                  <i className=\"ri-add-line mr-2\"></i>Add Feature\n                </button>\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  <i className=\"ri-information-line mr-2\"></i>\n                  Add feature blocks with icon, title, and content. Drag and drop to reorder.\n                </p>\n                <DragDropList\n                  items={features}\n                  onReorder={handleReorderFeatures}\n                  keyExtractor={(f) => f.id}\n                  emptyMessage=\"No features yet. Click 'Add Feature' to get started!\"\n                  renderItem={(feature: RequestDemoFeature) => (\n                    <div className=\"flex items-center justify-between w-full\">\n                      <div className=\"flex items-center space-x-3 flex-1\">\n                        {feature.iconImage && (\n                          <img \n                            src={getFeatureIconUrl(feature)} \n                            alt={feature.iconImage.altText || feature.title}\n                            className=\"w-10 h-10 object-contain\"\n                          />\n                        )}\n                        <div className=\"flex-1\">\n                          <h4 className=\"font-semibold text-gray-900\">{feature.title}</h4>\n                          <p className=\"text-sm text-gray-600 line-clamp-1\">{feature.content}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2 ml-4\">\n                        <button\n                          onClick={() => {\n                            setEditingFeature(feature);\n                            setShowFeatureModal(true);\n                          }}\n                          className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\n                        >\n                          <i className=\"ri-edit-line\"></i>\n                        </button>\n                        <button\n                          onClick={() => handleDeleteFeature(feature.id)}\n                          className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\n                        >\n                          <i className=\"ri-delete-bin-line\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showParagraphModal && (\n        <ParagraphModal\n          paragraph={editingParagraph}\n          onSave={handleSaveParagraph}\n          onClose={() => {\n            setShowParagraphModal(false);\n            setEditingParagraph(null);\n          }}\n          saving={saving}\n        />\n      )}\n\n      {showFeatureModal && (\n        <FeatureModal\n          feature={editingFeature}\n          onSave={handleSaveFeature}\n          onClose={() => {\n            setShowFeatureModal(false);\n            setEditingFeature(null);\n          }}\n          saving={saving}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction getFeatureIconUrl(feature: RequestDemoFeature): string {\n  if (!feature.iconImage) return '';\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n  return `${baseUrl}${feature.iconImage.filePath}`;\n}\n\nfunction ParagraphModal({ paragraph, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(paragraph || { id: 0, content: '', orderIndex: 0 });\n\n  useEffect(() => {\n    setFormData(paragraph || { id: 0, content: '', orderIndex: 0 });\n  }, [paragraph]);\n\n  return (\n    <Modal\n      isOpen={true}\n      onClose={onClose}\n      title={paragraph?.id && paragraph.id > 0 ? 'Edit Paragraph' : 'Add Paragraph'}\n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Content\" required>\n          <textarea\n            value={formData.content}\n            onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n            rows={6}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter paragraph content\"\n          />\n        </FormField>\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.content}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : paragraph?.id && paragraph.id > 0 ? 'Update Paragraph' : 'Create Paragraph'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nfunction FeatureModal({ feature, onSave, onClose, saving }: any) {\n  const [formData, setFormData] = useState(feature || { id: 0, title: '', content: '', iconImageId: null, orderIndex: 0 });\n  const getImageUrl = (image: any): string => {\n    if (!image) return '';\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\n    return `${baseUrl}${image.filePath}`;\n  };\n\n  useEffect(() => {\n    setFormData(feature || { id: 0, title: '', content: '', iconImageId: null, orderIndex: 0 });\n  }, [feature]);\n\n  return (\n    <Modal\n      isOpen={true}\n      onClose={onClose}\n      title={feature?.id && feature.id > 0 ? 'Edit Feature' : 'Add Feature'}\n      size=\"lg\"\n    >\n      <div className=\"space-y-6\">\n        <FormField label=\"Title\" required>\n          <input\n            type=\"text\"\n            value={formData.title}\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"e.g., System Variety\"\n          />\n        </FormField>\n        <FormField label=\"Content\" required>\n          <textarea\n            value={formData.content}\n            onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"e.g., We offer 15+ models ranging from portable to high-powered fixed machines...\"\n          />\n        </FormField>\n        <ImageSelector\n          value={formData.iconImageId}\n          onChange={(id) => setFormData({ ...formData, iconImageId: id })}\n          label=\"Icon Image (JPG, PNG, SVG)\"\n        />\n        {formData.iconImage && (\n          <div className=\"mt-2\">\n            <img \n              src={getImageUrl(formData.iconImage)} \n              alt=\"Icon preview\" \n              className=\"w-16 h-16 object-contain\"\n            />\n          </div>\n        )}\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onSave(formData)}\n            disabled={saving || !formData.title || !formData.content}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\n          >\n            {saving ? 'Saving...' : feature?.id && feature.id > 0 ? 'Update Feature' : 'Create Feature'}\n          </button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport ImageSelector from '../../../../components/cms/ImageSelector';\r\n\r\ninterface OurProductsPageContent {\r\n  id?: number;\r\n  heroTitle: string | null;\r\n  heroSubtitle: string | null;\r\n  heroImageId: number | null;\r\n  heroImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\nexport default function OurProductsPageManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [content, setContent] = useState<OurProductsPageContent>({\r\n    heroTitle: null,\r\n    heroSubtitle: null,\r\n    heroImageId: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchContent();\r\n  }, []);\r\n\r\n  const fetchContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<OurProductsPageContent>('/our-products/content');\r\n      if (response.success && response.data) {\r\n        setContent(response.data as OurProductsPageContent);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching content:', error);\r\n      alert(error.message || 'Failed to load content');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const response = await api.put('/our-products/content', content);\r\n      if (response.success) {\r\n        alert('Our Products Page Content saved successfully!');\r\n        fetchContent();\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const getImageUrl = (image: any): string => {\r\n    if (!image) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${image.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Our Products Page</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage the Our Products page content</p>\r\n          </div>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n          >\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n          <p className=\"text-gray-600 mt-2\">Loading...</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"space-y-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 border-b pb-3\">Hero Section</h3>\r\n            \r\n            <FormField label=\"Hero Title\">\r\n              <input\r\n                type=\"text\"\r\n                value={content.heroTitle || ''}\r\n                onChange={(e) => setContent({ ...content, heroTitle: e.target.value || null })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Our Products\"\r\n              />\r\n            </FormField>\r\n\r\n            <FormField label=\"Hero Subtitle\">\r\n              <textarea\r\n                value={content.heroSubtitle || ''}\r\n                onChange={(e) => setContent({ ...content, heroSubtitle: e.target.value || null })}\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Explore our comprehensive range of medical imaging solutions\"\r\n              />\r\n            </FormField>\r\n\r\n            <div className=\"border-t pt-6\">\r\n              <ImageSelector\r\n                value={content.heroImageId}\r\n                onChange={(id) => setContent({ ...content, heroImageId: id })}\r\n                label=\"Hero Background Image\"\r\n              />\r\n              {content.heroImage && (\r\n                <div className=\"mt-4\">\r\n                  <p className=\"text-sm text-gray-600 mb-2\">Current Image:</p>\r\n                  <img\r\n                    src={getImageUrl(content.heroImage)}\r\n                    alt={content.heroImage.altText || 'Hero image'}\r\n                    className=\"w-full max-w-md h-auto rounded-lg shadow-md\"\r\n                  />\r\n                </div>\r\n              )}\r\n              <p className=\"text-sm text-gray-500 mt-2\">\r\n                <i className=\"ri-information-line mr-1\"></i>\r\n                Upload a background image for the hero section.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React, { Component, ErrorInfo, ReactNode } from 'react';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n}\r\n\r\nexport class ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n      \r\n      return (\r\n        <div className=\"p-4 border border-red-300 rounded-lg bg-red-50\">\r\n          <p className=\"text-red-800 text-sm\">\r\n            <i className=\"ri-error-warning-line mr-2\"></i>\r\n            Editor encountered an error. Using fallback editor.\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n","import { useMemo, useState, useEffect } from 'react';\r\nimport FormField from './FormField';\r\nimport { ErrorBoundary } from './ErrorBoundary';\r\n\r\ninterface RichTextEditorProps {\r\n  value: string | null | undefined;\r\n  onChange: (value: string) => void;\r\n  label?: string;\r\n  placeholder?: string;\r\n  height?: string;\r\n}\r\n\r\nlet ReactQuillComponent: any = null;\r\nlet QuillStylesLoaded = false;\r\n\r\n// Dynamically import ReactQuill\r\nconst loadQuill = async () => {\r\n  if (ReactQuillComponent) return ReactQuillComponent;\r\n  \r\n  try {\r\n    const ReactQuill = (await import('react-quill')).default;\r\n    \r\n    if (!QuillStylesLoaded) {\r\n      await import('react-quill/dist/quill.snow.css');\r\n      QuillStylesLoaded = true;\r\n    }\r\n    \r\n    ReactQuillComponent = ReactQuill;\r\n    return ReactQuillComponent;\r\n  } catch (error) {\r\n    console.error('Failed to load React Quill:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Fallback textarea component\r\nfunction FallbackEditor({\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  height\r\n}: {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  placeholder: string;\r\n  height: string;\r\n}) {\r\n  return (\r\n    <>\r\n      <textarea\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        placeholder={placeholder}\r\n        style={{ height, minHeight: height }}\r\n        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n        rows={20}\r\n      />\r\n      <p className=\"text-xs text-gray-500 mt-1\">\r\n        <i className=\"ri-information-line mr-1\"></i>\r\n        Using plain text editor. You can paste HTML content here.\r\n      </p>\r\n    </>\r\n  );\r\n}\r\n\r\n// ReactQuill wrapper component\r\nfunction QuillEditor({\r\n  value,\r\n  onChange,\r\n  modules,\r\n  formats,\r\n  placeholder,\r\n  height,\r\n  onError\r\n}: {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  modules: any;\r\n  formats: string[];\r\n  placeholder: string;\r\n  height: string;\r\n  onError: () => void;\r\n}) {\r\n  useEffect(() => {\r\n    // Set up error handler\r\n    const errorHandler = (event: ErrorEvent) => {\r\n      if (event.message?.includes('quill') || event.message?.includes('ReactQuill')) {\r\n        console.error('ReactQuill error detected:', event.error);\r\n        onError();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('error', errorHandler);\r\n    return () => window.removeEventListener('error', errorHandler);\r\n  }, [onError]);\r\n\r\n  if (!ReactQuillComponent) {\r\n    return null;\r\n  }\r\n\r\n  const Quill = ReactQuillComponent;\r\n  \r\n  try {\r\n    return (\r\n      <Quill\r\n        theme=\"snow\"\r\n        value={value}\r\n        onChange={onChange}\r\n        modules={modules}\r\n        formats={formats}\r\n        placeholder={placeholder}\r\n        style={{ height: `calc(${height} - 42px)` }}\r\n      />\r\n    );\r\n  } catch (error) {\r\n    console.error('Error rendering ReactQuill:', error);\r\n    onError();\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default function RichTextEditor({\r\n  value,\r\n  onChange,\r\n  label,\r\n  placeholder = 'Enter content...',\r\n  height = '400px'\r\n}: RichTextEditorProps) {\r\n  const editorValue = value ?? '';\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [quillReady, setQuillReady] = useState(false);\r\n  const [useFallback, setUseFallback] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true);\r\n    loadQuill()\r\n      .then((Quill) => {\r\n        if (Quill) {\r\n          setQuillReady(true);\r\n        } else {\r\n          setUseFallback(true);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setUseFallback(true);\r\n      });\r\n  }, []);\r\n\r\n  const handleChange = (content: string) => {\r\n    onChange(content || '');\r\n  };\r\n\r\n  const modules = useMemo(\r\n    () => ({\r\n      toolbar: [\r\n        [{ header: [1, 2, 3, 4, 5, 6, false] }],\r\n        [{ font: [] }],\r\n        [{ size: [] }],\r\n        ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n        [{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\r\n        [{ align: [] }],\r\n        ['link'],\r\n        [{ color: [] }, { background: [] }],\r\n        ['clean']\r\n      ],\r\n      clipboard: {\r\n        // Preserve formatting when pasting\r\n        matchVisual: false,\r\n        // Convert plain text line breaks to paragraphs\r\n        matchers: [\r\n          ['BR', (node: any, delta: any) => {\r\n            return delta.compose(delta.insert('\\n'));\r\n          }]\r\n        ]\r\n      }\r\n    }),\r\n    []\r\n  );\r\n\r\n  const formats = [\r\n    'header', 'font', 'size', 'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n    'list', 'bullet', 'indent', 'align', 'link', 'color', 'background'\r\n  ];\r\n\r\n  if (!isMounted || (!quillReady && !useFallback)) {\r\n    return (\r\n      <FormField label={label}>\r\n        <div style={{ height, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n          <div className=\"text-gray-500\">Loading editor...</div>\r\n        </div>\r\n      </FormField>\r\n    );\r\n  }\r\n\r\n  if (useFallback || !ReactQuillComponent) {\r\n    return (\r\n      <FormField label={label}>\r\n        <FallbackEditor\r\n          value={editorValue}\r\n          onChange={handleChange}\r\n          placeholder={placeholder}\r\n          height={height}\r\n        />\r\n      </FormField>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <FormField label={label}>\r\n      <div style={{ height }}>\r\n        <ErrorBoundary\r\n          fallback={\r\n            <FallbackEditor\r\n              value={editorValue}\r\n              onChange={handleChange}\r\n              placeholder={placeholder}\r\n              height={height}\r\n            />\r\n          }\r\n          onError={() => setUseFallback(true)}\r\n        >\r\n          <QuillEditor\r\n            value={editorValue}\r\n            onChange={handleChange}\r\n            modules={modules}\r\n            formats={formats}\r\n            placeholder={placeholder}\r\n            height={height}\r\n            onError={() => setUseFallback(true)}\r\n          />\r\n        </ErrorBoundary>\r\n      </div>\r\n    </FormField>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport RichTextEditor from '../../../../components/cms/RichTextEditor';\r\n\r\ninterface TermsParagraph {\r\n  id: number;\r\n  content: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface TermsPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  subtitle: string | null;\r\n  richTextContent: string | null;\r\n}\r\n\r\nexport default function TermsAndConditionsManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [content, setContent] = useState<TermsPageContent>({\r\n    title: null,\r\n    subtitle: null,\r\n    richTextContent: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchContent();\r\n  }, []);\r\n\r\n  const fetchContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<TermsPageContent>('/terms-privacy/terms/content');\r\n      if (response.success && response.data) {\r\n        setContent(response.data as TermsPageContent);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching content:', error);\r\n      alert(error.message || 'Failed to load content');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const response = await api.put('/terms-privacy/terms/content', content);\r\n      if (response.success) {\r\n        alert('Terms and Conditions page saved successfully!');\r\n        fetchContent();\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Terms and Conditions</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage the Terms and Conditions page content</p>\r\n          </div>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n          >\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n          <p className=\"text-gray-600 mt-2\">Loading...</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"space-y-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 border-b pb-3\">Hero Section</h3>\r\n            \r\n            <FormField label=\"Page Title\">\r\n              <input\r\n                type=\"text\"\r\n                value={content.title || ''}\r\n                onChange={(e) => setContent({ ...content, title: e.target.value || null })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Terms and Conditions\"\r\n              />\r\n            </FormField>\r\n\r\n            <FormField label=\"Subtitle\">\r\n              <textarea\r\n                value={content.subtitle || ''}\r\n                onChange={(e) => setContent({ ...content, subtitle: e.target.value || null })}\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Please read these terms carefully before using our services\"\r\n              />\r\n            </FormField>\r\n\r\n            <div className=\"border-t pt-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Content</h3>\r\n              <RichTextEditor\r\n                value={content.richTextContent ?? ''}\r\n                onChange={(value) => setContent({ ...content, richTextContent: value || null })}\r\n                label=\"Page Content\"\r\n                placeholder=\"Enter the full Terms and Conditions content here. You can format text, add headings, lists, and more...\"\r\n                height=\"600px\"\r\n              />\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4\">\r\n                <p className=\"text-sm text-blue-800 mb-2\">\r\n                  <i className=\"ri-information-line mr-1\"></i>\r\n                  <strong>How to use the editor:</strong>\r\n                </p>\r\n                <ul className=\"text-sm text-blue-700 list-disc list-inside space-y-1\">\r\n                  <li>Paste your content into the editor</li>\r\n                  <li>Select text and use the toolbar to format (bold, headings, etc.)</li>\r\n                  <li>Use the heading dropdown to make titles bold and larger</li>\r\n                  <li>Press Enter to create new paragraphs</li>\r\n                  <li>All formatting will be preserved when saved</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport RichTextEditor from '../../../../components/cms/RichTextEditor';\r\n\r\ninterface PrivacyParagraph {\r\n  id: number;\r\n  content: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface PrivacyPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  subtitle: string | null;\r\n  richTextContent: string | null;\r\n}\r\n\r\nexport default function PrivacyPolicyManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [content, setContent] = useState<PrivacyPageContent>({\r\n    title: null,\r\n    subtitle: null,\r\n    richTextContent: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchContent();\r\n  }, []);\r\n\r\n  const fetchContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<PrivacyPageContent>('/terms-privacy/privacy/content');\r\n      if (response.success && response.data) {\r\n        setContent(response.data as PrivacyPageContent);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching content:', error);\r\n      alert(error.message || 'Failed to load content');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const response = await api.put('/terms-privacy/privacy/content', content);\r\n      if (response.success) {\r\n        alert('Privacy Policy page saved successfully!');\r\n        fetchContent();\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Privacy Policy</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage the Privacy Policy page content</p>\r\n          </div>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n          >\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n          <p className=\"text-gray-600 mt-2\">Loading...</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"space-y-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 border-b pb-3\">Hero Section</h3>\r\n            \r\n            <FormField label=\"Page Title\">\r\n              <input\r\n                type=\"text\"\r\n                value={content.title || ''}\r\n                onChange={(e) => setContent({ ...content, title: e.target.value || null })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Privacy Policy\"\r\n              />\r\n            </FormField>\r\n\r\n            <FormField label=\"Subtitle\">\r\n              <textarea\r\n                value={content.subtitle || ''}\r\n                onChange={(e) => setContent({ ...content, subtitle: e.target.value || null })}\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Your privacy is important to us. Learn how we protect your information.\"\r\n              />\r\n            </FormField>\r\n\r\n            <div className=\"border-t pt-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Content</h3>\r\n              <RichTextEditor\r\n                value={content.richTextContent ?? ''}\r\n                onChange={(value) => setContent({ ...content, richTextContent: value || null })}\r\n                label=\"Page Content\"\r\n                placeholder=\"Enter the full Privacy Policy content here. You can format text, add headings, lists, and more...\"\r\n                height=\"600px\"\r\n              />\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4\">\r\n                <p className=\"text-sm text-blue-800 mb-2\">\r\n                  <i className=\"ri-information-line mr-1\"></i>\r\n                  <strong>How to use the editor:</strong>\r\n                </p>\r\n                <ul className=\"text-sm text-blue-700 list-disc list-inside space-y-1\">\r\n                  <li>Paste your content into the editor</li>\r\n                  <li>Select text and use the toolbar to format (bold, headings, etc.)</li>\r\n                  <li>Use the heading dropdown to make titles bold and larger</li>\r\n                  <li>Press Enter to create new paragraphs</li>\r\n                  <li>All formatting will be preserved when saved</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport ImageSelector from '../../../../components/cms/ImageSelector';\r\nimport DragDropList from '../../../../components/cms/DragDropList';\r\nimport Modal from '../../../../components/cms/Modal';\r\n\r\ninterface FaqsPage {\r\n  id?: number;\r\n  heroTitle: string | null;\r\n  heroSubtitle: string | null;\r\n  backgroundImageId: number | null;\r\n  sectionBackgroundImageId: number | null;\r\n  titleColor: string;\r\n  subtitleColor: string;\r\n  overlayOpacity: number;\r\n  backgroundImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n  sectionBackgroundImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\ninterface FaqsItem {\r\n  id: number;\r\n  question: string;\r\n  answer: string;\r\n  imageId: number | null;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n  image?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\nexport default function FaqsManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [page, setPage] = useState<FaqsPage>({\r\n    heroTitle: null,\r\n    heroSubtitle: null,\r\n    backgroundImageId: null,\r\n    sectionBackgroundImageId: null,\r\n    titleColor: '#FFFFFF',\r\n    subtitleColor: '#FFFFFF',\r\n    overlayOpacity: 40\r\n  });\r\n  const [items, setItems] = useState<FaqsItem[]>([]);\r\n  const [showItemModal, setShowItemModal] = useState(false);\r\n  const [editingItem, setEditingItem] = useState<FaqsItem | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [pageRes, itemsRes] = await Promise.all([\r\n        api.get<FaqsPage>('/faqs/page', {\r\n          params: { include: 'backgroundImage,sectionBackgroundImage' }\r\n        }),\r\n        api.get<FaqsItem[]>('/faqs/items')\r\n      ]);\r\n\r\n      if (pageRes.success && pageRes.data) {\r\n        setPage(pageRes.data);\r\n      }\r\n\r\n      if (itemsRes.success && itemsRes.data) {\r\n        setItems(itemsRes.data.sort((a, b) => a.orderIndex - b.orderIndex));\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching data:', error);\r\n      alert(error.message || 'Failed to load data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSavePage = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const response = await api.put('/faqs/page', page);\r\n      if (response.success) {\r\n        alert('FAQs page saved successfully!');\r\n        fetchData();\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveItem = async (itemData: Partial<FaqsItem>) => {\r\n    try {\r\n      if (editingItem) {\r\n        await api.put(`/faqs/items/${editingItem.id}`, itemData);\r\n      } else {\r\n        await api.post('/faqs/items', {\r\n          ...itemData,\r\n          orderIndex: items.length,\r\n          isActive: true\r\n        });\r\n      }\r\n      fetchData();\r\n      setShowItemModal(false);\r\n      setEditingItem(null);\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save FAQ item');\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = async (id: number) => {\r\n    if (!confirm('Are you sure you want to delete this FAQ item?')) return;\r\n    try {\r\n      await api.delete(`/faqs/items/${id}`);\r\n      fetchData();\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete FAQ item');\r\n    }\r\n  };\r\n\r\n  const handleReorderItems = async (reorderedItems: FaqsItem[]) => {\r\n    try {\r\n      const itemsToUpdate = reorderedItems.map((item, index) => ({\r\n        id: item.id,\r\n        orderIndex: index\r\n      }));\r\n      await api.post('/faqs/items/reorder', { items: itemsToUpdate });\r\n      setItems(reorderedItems);\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to reorder FAQs');\r\n      fetchData();\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h2 className=\"text-2xl font-bold mb-6\">FAQs Page Management</h2>\r\n\r\n        {/* Hero Section */}\r\n        <div className=\"border-b pb-6 mb-6\">\r\n          <h3 className=\"text-xl font-semibold mb-4\">Hero Section</h3>\r\n          <div className=\"space-y-4\">\r\n            <FormField label=\"Hero Title\">\r\n              <input\r\n                type=\"text\"\r\n                value={page.heroTitle || ''}\r\n                onChange={(e) => setPage({ ...page, heroTitle: e.target.value || null })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Enter hero title\"\r\n              />\r\n            </FormField>\r\n\r\n            <FormField label=\"Hero Subtitle\">\r\n              <textarea\r\n                value={page.heroSubtitle || ''}\r\n                onChange={(e) => setPage({ ...page, heroSubtitle: e.target.value || null })}\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Enter hero subtitle\"\r\n              />\r\n            </FormField>\r\n\r\n            <ImageSelector\r\n              value={page.backgroundImageId}\r\n              onChange={(id) => setPage({ ...page, backgroundImageId: id as number | null })}\r\n              label=\"Hero Background Image\"\r\n              currentImage={page.backgroundImage ? {\r\n                filePath: page.backgroundImage.filePath,\r\n                fileName: page.backgroundImage.altText\r\n              } : null}\r\n            />\r\n\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n              <FormField label=\"Title Color\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={page.titleColor}\r\n                  onChange={(e) => setPage({ ...page, titleColor: e.target.value })}\r\n                  className=\"w-full h-10 border border-gray-300 rounded-lg cursor-pointer\"\r\n                />\r\n              </FormField>\r\n\r\n              <FormField label=\"Subtitle Color\">\r\n                <input\r\n                  type=\"color\"\r\n                  value={page.subtitleColor}\r\n                  onChange={(e) => setPage({ ...page, subtitleColor: e.target.value })}\r\n                  className=\"w-full h-10 border border-gray-300 rounded-lg cursor-pointer\"\r\n                />\r\n              </FormField>\r\n\r\n              <FormField label=\"Overlay Opacity (%)\">\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  max=\"100\"\r\n                  value={page.overlayOpacity}\r\n                  onChange={(e) => setPage({ ...page, overlayOpacity: parseInt(e.target.value) || 40 })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </FormField>\r\n            </div>\r\n\r\n            <button\r\n              onClick={handleSavePage}\r\n              disabled={saving}\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n            >\r\n              {saving ? 'Saving...' : 'Save Hero Section'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* FAQs Section Background */}\r\n        <div className=\"border-b pb-6 mb-6\">\r\n          <h3 className=\"text-xl font-semibold mb-4\">FAQs Section Background</h3>\r\n          <div className=\"space-y-4\">\r\n            <ImageSelector\r\n              value={page.sectionBackgroundImageId}\r\n              onChange={(id) => setPage({ ...page, sectionBackgroundImageId: id as number | null })}\r\n              label=\"Section Background Image (PNG)\"\r\n              currentImage={page.sectionBackgroundImage ? {\r\n                filePath: page.sectionBackgroundImage.filePath,\r\n                fileName: page.sectionBackgroundImage.altText\r\n              } : null}\r\n            />\r\n            <p className=\"text-sm text-gray-500\">\r\n              <i className=\"ri-information-line mr-1\"></i>\r\n              Upload a background PNG image for the FAQs section (the section with image and questions).\r\n            </p>\r\n            <button\r\n              onClick={handleSavePage}\r\n              disabled={saving}\r\n              className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n            >\r\n              {saving ? 'Saving...' : 'Save Section Background'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* FAQs Items */}\r\n        <div>\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <h3 className=\"text-xl font-semibold\">FAQs Items</h3>\r\n            <button\r\n              onClick={() => {\r\n                setEditingItem(null);\r\n                setShowItemModal(true);\r\n              }}\r\n              className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\"\r\n            >\r\n              <i className=\"ri-add-line mr-2\"></i>\r\n              Add FAQ Item\r\n            </button>\r\n          </div>\r\n\r\n          {items.length > 0 ? (\r\n            <DragDropList\r\n              items={items}\r\n              onReorder={handleReorderItems}\r\n              renderItem={(item) => (\r\n                <div className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                      <div className=\"w-8 h-8 bg-[#FF6B35] text-white rounded-lg flex items-center justify-center font-bold text-sm\">\r\n                        {String(item.orderIndex + 1).padStart(2, '0')}\r\n                      </div>\r\n                      <h4 className=\"font-semibold text-gray-900\">{item.question}</h4>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600 ml-11 line-clamp-2\">{item.answer}</p>\r\n                  </div>\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setEditingItem(item);\r\n                        setShowItemModal(true);\r\n                      }}\r\n                      className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer\"\r\n                    >\r\n                      <i className=\"ri-edit-line\"></i>\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteItem(item.id)}\r\n                      className=\"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 cursor-pointer\"\r\n                    >\r\n                      <i className=\"ri-delete-bin-line\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            />\r\n          ) : (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <p>No FAQs items yet. Click \"Add FAQ Item\" to get started.</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* FAQ Item Modal */}\r\n      {showItemModal && (\r\n        <FaqItemModal\r\n          item={editingItem}\r\n          onSave={handleSaveItem}\r\n          onClose={() => {\r\n            setShowItemModal(false);\r\n            setEditingItem(null);\r\n          }}\r\n          saving={saving}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction FaqItemModal({ item, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState({\r\n    question: item?.question || '',\r\n    answer: item?.answer || '',\r\n    imageId: item?.imageId || null\r\n  });\r\n\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={item ? 'Edit FAQ Item' : 'Add FAQ Item'} size=\"lg\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Question\" required>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.question}\r\n            onChange={(e) => setFormData({ ...formData, question: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n            placeholder=\"Enter question\"\r\n          />\r\n        </FormField>\r\n\r\n        <FormField label=\"Answer\" required>\r\n          <textarea\r\n            value={formData.answer}\r\n            onChange={(e) => setFormData({ ...formData, answer: e.target.value })}\r\n            rows={6}\r\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n            placeholder=\"Enter answer\"\r\n          />\r\n        </FormField>\r\n\r\n        <ImageSelector\r\n          value={formData.imageId}\r\n          onChange={(id) => setFormData({ ...formData, imageId: id as number | null })}\r\n          label=\"FAQ Image (Displayed on left side)\"\r\n          currentImage={item?.image ? {\r\n            filePath: item.image.filePath,\r\n            fileName: item.image.altText\r\n          } : null}\r\n        />\r\n        <p className=\"text-sm text-gray-500\">\r\n          <i className=\"ri-information-line mr-1\"></i>\r\n          This image will be displayed on the left side of the FAQs section. The first FAQ item's image will be used.\r\n        </p>\r\n\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            onClick={() => onSave(formData)}\r\n            disabled={saving || !formData.question || !formData.answer}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n          >\r\n            {saving ? 'Saving...' : 'Save'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport FormField from '../../../../components/cms/FormField';\r\n\r\ninterface ContactInfo {\r\n  id?: number;\r\n  companyName: string;\r\n  addressLine1: string | null;\r\n  addressLine2: string | null;\r\n  city: string | null;\r\n  state: string | null;\r\n  postalCode: string | null;\r\n  country: string | null;\r\n  phone: string | null;\r\n  email: string | null;\r\n  supportEmail: string | null;\r\n  googleMapsEmbedUrl: string | null;\r\n}\r\n\r\nexport default function ContactInfoManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [contactInfo, setContactInfo] = useState<ContactInfo>({\r\n    companyName: '',\r\n    addressLine1: null,\r\n    addressLine2: null,\r\n    city: null,\r\n    state: null,\r\n    postalCode: null,\r\n    country: null,\r\n    phone: null,\r\n    email: null,\r\n    supportEmail: null,\r\n    googleMapsEmbedUrl: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchContactInfo();\r\n  }, []);\r\n\r\n  const fetchContactInfo = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<ContactInfo>('/contact-info');\r\n      if (response.success && response.data) {\r\n        setContactInfo(response.data as ContactInfo);\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await api.put('/contact-info', contactInfo);\r\n      alert('Contact info saved successfully!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Contact Information</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage company contact details</p>\r\n          </div>\r\n          <button onClick={handleSave} disabled={saving} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <FormField label=\"Company Name\" required>\r\n              <input type=\"text\" value={contactInfo.companyName} onChange={(e) => setContactInfo({ ...contactInfo, companyName: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Phone\">\r\n              <input type=\"tel\" value={contactInfo.phone || ''} onChange={(e) => setContactInfo({ ...contactInfo, phone: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Email\">\r\n              <input type=\"email\" value={contactInfo.email || ''} onChange={(e) => setContactInfo({ ...contactInfo, email: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Support Email\">\r\n              <input type=\"email\" value={contactInfo.supportEmail || ''} onChange={(e) => setContactInfo({ ...contactInfo, supportEmail: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Address Line 1\">\r\n              <input type=\"text\" value={contactInfo.addressLine1 || ''} onChange={(e) => setContactInfo({ ...contactInfo, addressLine1: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Address Line 2\">\r\n              <input type=\"text\" value={contactInfo.addressLine2 || ''} onChange={(e) => setContactInfo({ ...contactInfo, addressLine2: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"City\">\r\n              <input type=\"text\" value={contactInfo.city || ''} onChange={(e) => setContactInfo({ ...contactInfo, city: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"State\">\r\n              <input type=\"text\" value={contactInfo.state || ''} onChange={(e) => setContactInfo({ ...contactInfo, state: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Postal Code\">\r\n              <input type=\"text\" value={contactInfo.postalCode || ''} onChange={(e) => setContactInfo({ ...contactInfo, postalCode: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <FormField label=\"Country\">\r\n              <input type=\"text\" value={contactInfo.country || ''} onChange={(e) => setContactInfo({ ...contactInfo, country: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n            </FormField>\r\n            <div className=\"md:col-span-2\">\r\n              <FormField label=\"Google Maps Embed URL\">\r\n                <textarea value={contactInfo.googleMapsEmbedUrl || ''} onChange={(e) => setContactInfo({ ...contactInfo, googleMapsEmbedUrl: e.target.value || null })} rows={3} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"Paste Google Maps embed iframe code here\" />\r\n              </FormField>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport Modal from '../../../../components/cms/Modal';\r\nimport FormField from '../../../../components/cms/FormField';\r\n\r\ninterface GlobalSetting {\r\n  id: number;\r\n  settingKey: string;\r\n  settingValue: string | null;\r\n  settingType: string;\r\n  description: string | null;\r\n}\r\n\r\nexport default function GlobalSettingsManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [settings, setSettings] = useState<GlobalSetting[]>([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingSetting, setEditingSetting] = useState<GlobalSetting | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchSettings();\r\n  }, []);\r\n\r\n  const fetchSettings = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<GlobalSetting[]>('/global-settings');\r\n      if (response.success && response.data) {\r\n        setSettings(response.data as GlobalSetting[]);\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async (setting: GlobalSetting) => {\r\n    setSaving(true);\r\n    try {\r\n      if (setting.id && setting.id > 0) {\r\n        await api.put(`/global-settings/${setting.id}`, setting);\r\n      } else {\r\n        await api.post('/global-settings', setting);\r\n      }\r\n      setShowModal(false);\r\n      setEditingSetting(null);\r\n      fetchSettings();\r\n      alert('Setting saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm('Delete this setting?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/global-settings/${id}`);\r\n      setSettings(settings.filter(s => s.id !== id));\r\n      alert('Setting deleted!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Global Settings</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage site-wide settings</p>\r\n          </div>\r\n          <button onClick={() => { setEditingSetting({ id: 0, settingKey: '', settingValue: null, settingType: 'text', description: null }); setShowModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\r\n            <i className=\"ri-add-line mr-2\"></i>Add Setting\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n        </div>\r\n      ) : settings.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-settings-3-line text-6xl text-gray-300 mb-4\"></i>\r\n          <p className=\"text-gray-600 mb-4\">No settings yet</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"space-y-3\">\r\n            {settings.map((setting) => (\r\n              <div key={setting.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-semibold text-gray-900\">{setting.settingKey}</h4>\r\n                    {setting.description && <p className=\"text-sm text-gray-600 mt-1\">{setting.description}</p>}\r\n                    <p className=\"text-sm text-gray-700 mt-2 bg-gray-50 p-2 rounded\">{setting.settingValue || '(empty)'}</p>\r\n                    <span className=\"inline-block mt-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded\">{setting.settingType}</span>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2 ml-4\">\r\n                    <button onClick={() => { setEditingSetting(setting); setShowModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\r\n                      <i className=\"ri-edit-line\"></i>\r\n                    </button>\r\n                    <button onClick={() => handleDelete(setting.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\r\n                      <i className=\"ri-delete-bin-line\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {showModal && editingSetting && (\r\n        <SettingModal setting={editingSetting} onSave={handleSave} onClose={() => { setShowModal(false); setEditingSetting(null); }} saving={saving} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SettingModal({ setting, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(setting);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={setting.id > 0 ? 'Edit Setting' : 'Add Setting'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Setting Key\" required hint=\"Unique identifier (e.g., site_name)\">\r\n          <input type=\"text\" value={formData.settingKey} onChange={(e) => setFormData({ ...formData, settingKey: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <FormField label=\"Setting Type\">\r\n          <select value={formData.settingType} onChange={(e) => setFormData({ ...formData, settingType: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"text\">Text</option>\r\n            <option value=\"number\">Number</option>\r\n            <option value=\"boolean\">Boolean</option>\r\n            <option value=\"json\">JSON</option>\r\n          </select>\r\n        </FormField>\r\n        <FormField label=\"Setting Value\">\r\n          {formData.settingType === 'boolean' ? (\r\n            <select value={formData.settingValue || 'false'} onChange={(e) => setFormData({ ...formData, settingValue: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n              <option value=\"true\">True</option>\r\n              <option value=\"false\">False</option>\r\n            </select>\r\n          ) : formData.settingType === 'json' ? (\r\n            <textarea value={formData.settingValue || ''} onChange={(e) => setFormData({ ...formData, settingValue: e.target.value || null })} rows={6} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm\" placeholder='{\"key\": \"value\"}' />\r\n          ) : (\r\n            <input type={formData.settingType === 'number' ? 'number' : 'text'} value={formData.settingValue || ''} onChange={(e) => setFormData({ ...formData, settingValue: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n          )}\r\n        </FormField>\r\n        <FormField label=\"Description\">\r\n          <input type=\"text\" value={formData.description || ''} onChange={(e) => setFormData({ ...formData, description: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" />\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.settingKey} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport Modal from '../../../../components/cms/Modal';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../components/cms/DragDropList';\r\n\r\ninterface SocialLink {\r\n  id: number;\r\n  platform: string;\r\n  url: string;\r\n  iconClass: string | null;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\nexport default function SocialLinksManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [links, setLinks] = useState<SocialLink[]>([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingLink, setEditingLink] = useState<SocialLink | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchLinks();\r\n  }, []);\r\n\r\n  const fetchLinks = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<SocialLink[]>('/social-links');\r\n      if (response.success && response.data) {\r\n        setLinks((response.data as SocialLink[]).sort((a, b) => a.orderIndex - b.orderIndex));\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleReorder = async (reorderedLinks: SocialLink[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reorderedLinks.length; i++) {\r\n        await api.put(`/social-links/${reorderedLinks[i].id}`, {\r\n          ...reorderedLinks[i],\r\n          orderIndex: i\r\n        });\r\n      }\r\n      setLinks(reorderedLinks);\r\n      alert('Order updated!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to update');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async (link: SocialLink) => {\r\n    setSaving(true);\r\n    try {\r\n      if (link.id && link.id > 0) {\r\n        await api.put(`/social-links/${link.id}`, link);\r\n      } else {\r\n        await api.post('/social-links', { ...link, orderIndex: links.length });\r\n      }\r\n      setShowModal(false);\r\n      setEditingLink(null);\r\n      fetchLinks();\r\n      alert('Social link saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm('Delete this social link?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/social-links/${id}`);\r\n      setLinks(links.filter(l => l.id !== id));\r\n      alert('Social link deleted!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Social Links</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage social media links</p>\r\n          </div>\r\n          <button onClick={() => { setEditingLink({ id: 0, platform: '', url: '', iconClass: null, orderIndex: links.length, isActive: true }); setShowModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\r\n            <i className=\"ri-add-line mr-2\"></i>Add Link\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n        </div>\r\n      ) : links.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-share-line text-6xl text-gray-300 mb-4\"></i>\r\n          <p className=\"text-gray-600 mb-4\">No social links yet</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <DragDropList\r\n            items={links}\r\n            onReorder={handleReorder}\r\n            keyExtractor={(l) => l.id}\r\n            renderItem={(link: SocialLink) => (\r\n              <div className=\"flex items-center justify-between w-full\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  {link.iconClass && <i className={`${link.iconClass} text-2xl text-blue-600`}></i>}\r\n                  <div>\r\n                    <h4 className=\"font-semibold text-gray-900\">{link.platform}</h4>\r\n                    <p className=\"text-sm text-gray-600\">{link.url}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <span className={`px-2 py-1 text-xs rounded-full ${link.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\r\n                    {link.isActive ? 'Active' : 'Inactive'}\r\n                  </span>\r\n                  <button onClick={() => { setEditingLink(link); setShowModal(true); }} className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\">\r\n                    <i className=\"ri-edit-line\"></i>\r\n                  </button>\r\n                  <button onClick={() => handleDelete(link.id)} className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\">\r\n                    <i className=\"ri-delete-bin-line\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {showModal && editingLink && (\r\n        <LinkModal link={editingLink} onSave={handleSave} onClose={() => { setShowModal(false); setEditingLink(null); }} saving={saving} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction LinkModal({ link, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState(link);\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={link.id > 0 ? 'Edit Social Link' : 'Add Social Link'} size=\"md\">\r\n      <div className=\"space-y-6\">\r\n        <FormField label=\"Platform\" required>\r\n          <input type=\"text\" value={formData.platform} onChange={(e) => setFormData({ ...formData, platform: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"Facebook\" />\r\n        </FormField>\r\n        <FormField label=\"URL\" required>\r\n          <input type=\"url\" value={formData.url} onChange={(e) => setFormData({ ...formData, url: e.target.value })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"https://facebook.com/...\" />\r\n        </FormField>\r\n        <FormField label=\"Icon Class\" hint=\"RemixIcon class\">\r\n          <input type=\"text\" value={formData.iconClass || ''} onChange={(e) => setFormData({ ...formData, iconClass: e.target.value || null })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\" placeholder=\"ri-facebook-line\" />\r\n          {formData.iconClass && <div className=\"mt-2 text-xs text-gray-500\">Preview: <i className={formData.iconClass}></i></div>}\r\n        </FormField>\r\n        <FormField label=\"Status\">\r\n          <select value={formData.isActive ? 'active' : 'inactive'} onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\">\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n        </FormField>\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Cancel</button>\r\n          <button onClick={() => onSave(formData)} disabled={saving || !formData.platform || !formData.url} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\">{saving ? 'Saving...' : 'Save'}</button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport Modal from '../../../../components/cms/Modal';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport DragDropList from '../../../../components/cms/DragDropList';\r\nimport ImageSelector from '../../../../components/cms/ImageSelector';\r\n\r\ninterface Testimonial {\r\n  id: number;\r\n  clientName: string;\r\n  clientPosition: string | null;\r\n  clientCompany: string | null;\r\n  clientImageId: number | null;\r\n  testimonialText: string;\r\n  rating: number | null;\r\n  orderIndex: number;\r\n  isFeatured: boolean;\r\n  isActive: boolean;\r\n  clientImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\nexport default function TestimonialsManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [testimonials, setTestimonials] = useState<Testimonial[]>([]);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingTestimonial, setEditingTestimonial] = useState<Testimonial | null>(null);\r\n  const [viewingTestimonial, setViewingTestimonial] = useState<Testimonial | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchTestimonials();\r\n  }, []);\r\n\r\n  const fetchTestimonials = async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch all testimonials (including inactive) for CMS management\r\n      const response = await api.get<Testimonial[]>('/testimonials', {\r\n        params: { includeAll: 'true' }\r\n      });\r\n      if (response.success && response.data) {\r\n        // Sort by orderIndex\r\n        const allTestimonials = (response.data as Testimonial[]).sort((a, b) => a.orderIndex - b.orderIndex);\r\n        setTestimonials(allTestimonials);\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to load');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleReorder = async (reordered: Testimonial[]) => {\r\n    setSaving(true);\r\n    try {\r\n      for (let i = 0; i < reordered.length; i++) {\r\n        await api.put(`/testimonials/${reordered[i].id}`, {\r\n          ...reordered[i],\r\n          orderIndex: i\r\n        });\r\n      }\r\n      setTestimonials(reordered);\r\n      alert('Order updated!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to update');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async (testimonial: Testimonial) => {\r\n    setSaving(true);\r\n    try {\r\n      if (testimonial.id && testimonial.id > 0) {\r\n        await api.put(`/testimonials/${testimonial.id}`, testimonial);\r\n      } else {\r\n        await api.post('/testimonials', { ...testimonial, orderIndex: testimonials.length });\r\n      }\r\n      setShowModal(false);\r\n      setEditingTestimonial(null);\r\n      fetchTestimonials();\r\n      alert('Testimonial saved!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: number) => {\r\n    if (!confirm('Delete this testimonial?')) return;\r\n    setSaving(true);\r\n    try {\r\n      await api.delete(`/testimonials/${id}`);\r\n      setTestimonials(testimonials.filter(t => t.id !== id));\r\n      alert('Testimonial deleted!');\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to delete');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const getImageUrl = (testimonial: Testimonial): string => {\r\n    if (!testimonial.clientImage) return '';\r\n    const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n    return `${baseUrl}${testimonial.clientImage.filePath}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Testimonials</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage customer testimonials</p>\r\n          </div>\r\n          <button onClick={() => { setEditingTestimonial({ id: 0, clientName: '', clientPosition: null, clientCompany: null, clientImageId: null, testimonialText: '', rating: null, orderIndex: testimonials.length, isFeatured: false, isActive: true }); setShowModal(true); }} className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer\">\r\n            <i className=\"ri-add-line mr-2\"></i>Add Testimonial\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n        </div>\r\n      ) : testimonials.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-chat-quote-line text-6xl text-gray-300 mb-4\"></i>\r\n          <p className=\"text-gray-600 mb-4\">No testimonials yet</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"mb-4 flex items-center justify-between\">\r\n            <p className=\"text-sm text-gray-600\">\r\n              <i className=\"ri-information-line mr-1\"></i>\r\n              Drag and drop cards to reorder. Cards display 2 per view with auto-scrolling.\r\n            </p>\r\n            <span className=\"text-sm font-medium text-gray-700\">\r\n              Total: {testimonials.length} testimonial{testimonials.length !== 1 ? 's' : ''}\r\n            </span>\r\n          </div>\r\n          <DragDropList\r\n            items={testimonials}\r\n            onReorder={handleReorder}\r\n            keyExtractor={(t) => t.id}\r\n            renderItem={(testimonial: Testimonial) => (\r\n              <div className=\"flex items-start gap-4 w-full p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-colors\">\r\n                {/* Order Badge */}\r\n                <div className=\"flex-shrink-0 w-10 h-10 bg-[#FF6B35] text-white rounded-lg flex items-center justify-center font-bold\">\r\n                  {testimonial.orderIndex + 1}\r\n                </div>\r\n                \r\n                {/* Card Preview */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className=\"flex items-start gap-3 mb-3\">\r\n                    {testimonial.clientImage ? (\r\n                      <img \r\n                        src={getImageUrl(testimonial)} \r\n                        alt={testimonial.clientName} \r\n                        className=\"w-12 h-12 rounded-full object-cover border-2 border-white shadow-sm flex-shrink-0\" \r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center flex-shrink-0\">\r\n                        <span className=\"text-gray-600 font-bold text-sm\">\r\n                          {(testimonial.clientName || 'C').charAt(0).toUpperCase()}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <h4 className=\"font-semibold text-gray-900 truncate\">{testimonial.clientName}</h4>\r\n                      {testimonial.clientPosition && testimonial.clientCompany ? (\r\n                        <p className=\"text-sm text-gray-600 truncate\">{testimonial.clientPosition}, {testimonial.clientCompany}</p>\r\n                      ) : testimonial.clientCompany ? (\r\n                        <p className=\"text-sm text-gray-600 truncate\">{testimonial.clientCompany}</p>\r\n                      ) : testimonial.clientPosition ? (\r\n                        <p className=\"text-sm text-gray-600 truncate\">{testimonial.clientPosition}</p>\r\n                      ) : null}\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-500 line-clamp-2 italic\">\"{testimonial.testimonialText}\"</p>\r\n                </div>\r\n                \r\n                {/* Actions */}\r\n                <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n                  {testimonial.isFeatured && (\r\n                    <span className=\"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full\" title=\"Featured\">\r\n                      <i className=\"ri-star-fill\"></i>\r\n                    </span>\r\n                  )}\r\n                  <span className={`px-2 py-1 text-xs rounded-full ${testimonial.isActive ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}`}>\r\n                    {testimonial.isActive ? 'Active' : 'Inactive'}\r\n                  </span>\r\n                  <button \r\n                    onClick={() => setViewingTestimonial(testimonial)} \r\n                    className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg cursor-pointer\"\r\n                    title=\"View\"\r\n                  >\r\n                    <i className=\"ri-eye-line\"></i>\r\n                  </button>\r\n                  <button \r\n                    onClick={() => { setEditingTestimonial(testimonial); setShowModal(true); }} \r\n                    className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg cursor-pointer\"\r\n                    title=\"Edit\"\r\n                  >\r\n                    <i className=\"ri-edit-line\"></i>\r\n                  </button>\r\n                  <button \r\n                    onClick={() => handleDelete(testimonial.id)} \r\n                    className=\"p-2 text-red-600 hover:bg-red-50 rounded-lg cursor-pointer\"\r\n                    title=\"Delete\"\r\n                  >\r\n                    <i className=\"ri-delete-bin-line\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {showModal && editingTestimonial && (\r\n        <TestimonialModal testimonial={editingTestimonial} onSave={handleSave} onClose={() => { setShowModal(false); setEditingTestimonial(null); }} saving={saving} />\r\n      )}\r\n\r\n      {viewingTestimonial && (\r\n        <TestimonialViewModal testimonial={viewingTestimonial} onClose={() => setViewingTestimonial(null)} onEdit={() => { setEditingTestimonial(viewingTestimonial); setViewingTestimonial(null); setShowModal(true); }} getImageUrl={getImageUrl} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TestimonialModal({ testimonial, onSave, onClose, saving }: any) {\r\n  const [formData, setFormData] = useState<Testimonial>(testimonial);\r\n  const baseUrl = import.meta.env.VITE_API_URL?.replace('/api/v1', '') || 'http://localhost:3002';\r\n  \r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title={testimonial.id > 0 ? 'Edit Testimonial Card' : 'Add Testimonial Card'} size=\"xl\">\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Left Column - Form Fields */}\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n            <h3 className=\"font-semibold text-blue-900 mb-2\">Card Structure</h3>\r\n            <p className=\"text-sm text-blue-700\">\r\n              Each testimonial card displays: Quote icon, testimonial text, client avatar, name, and affiliation.\r\n            </p>\r\n          </div>\r\n\r\n          <FormField label=\"Testimonial Text\" required>\r\n            <textarea \r\n              value={formData.testimonialText} \r\n              onChange={(e) => setFormData({ ...formData, testimonialText: e.target.value })} \r\n              rows={6} \r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"Enter the testimonial quote text...\"\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">This text will appear in white italic font on the orange card</p>\r\n          </FormField>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <FormField label=\"Client Name\" required>\r\n              <input \r\n                type=\"text\" \r\n                value={formData.clientName} \r\n                onChange={(e) => setFormData({ ...formData, clientName: e.target.value })} \r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Dr. John Doe\"\r\n              />\r\n            </FormField>\r\n            <FormField label=\"Client Position\">\r\n              <input \r\n                type=\"text\" \r\n                value={formData.clientPosition || ''} \r\n                onChange={(e) => setFormData({ ...formData, clientPosition: e.target.value || null })} \r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Surgeon\"\r\n              />\r\n            </FormField>\r\n          </div>\r\n\r\n          <FormField label=\"Client Company / Affiliation\">\r\n            <input \r\n              type=\"text\" \r\n              value={formData.clientCompany || ''} \r\n              onChange={(e) => setFormData({ ...formData, clientCompany: e.target.value || null })} \r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"Hospital Name\"\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">If position is provided, it will show as: \"Position, Company\"</p>\r\n          </FormField>\r\n\r\n          <FormField label=\"Client Avatar / Icon\">\r\n            <ImageSelector \r\n              value={formData.clientImageId} \r\n              onChange={(id) => setFormData({ ...formData, clientImageId: id as number | null })} \r\n              label=\"Upload Avatar Image\" \r\n              aspectRatio=\"1/1\"\r\n              currentImage={formData.clientImage ? {\r\n                filePath: formData.clientImage.filePath,\r\n                fileName: formData.clientImage.altText\r\n              } : null}\r\n            />\r\n            <p className=\"text-xs text-gray-500 mt-1\">\r\n              Upload a circular avatar/icon image. This will be displayed in a circular frame on the card.\r\n            </p>\r\n          </FormField>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <FormField label=\"Order Position\">\r\n              <input \r\n                type=\"number\" \r\n                min=\"0\" \r\n                value={formData.orderIndex} \r\n                onChange={(e) => setFormData({ ...formData, orderIndex: parseInt(e.target.value) || 0 })} \r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n              <p className=\"text-xs text-gray-500 mt-1\">Lower numbers appear first</p>\r\n            </FormField>\r\n            <FormField label=\"Status\">\r\n              <select \r\n                value={formData.isActive ? 'active' : 'inactive'} \r\n                onChange={(e) => setFormData({ ...formData, isActive: e.target.value === 'active' })} \r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"active\">Active</option>\r\n                <option value=\"inactive\">Inactive</option>\r\n              </select>\r\n            </FormField>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-4\">\r\n            <FormField label=\"Featured\">\r\n              <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                <input \r\n                  type=\"checkbox\" \r\n                  checked={formData.isFeatured} \r\n                  onChange={(e) => setFormData({ ...formData, isFeatured: e.target.checked })} \r\n                  className=\"w-4 h-4 text-blue-600 rounded focus:ring-blue-500\"\r\n                />\r\n                <span className=\"text-sm text-gray-700\">Mark as featured</span>\r\n              </label>\r\n            </FormField>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right Column - Preview */}\r\n        <div className=\"space-y-6\">\r\n          <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 sticky top-4\">\r\n            <h3 className=\"font-semibold text-gray-900 mb-4\">Card Preview</h3>\r\n            <div className=\"bg-[#FF6B35] p-6 rounded-lg text-white\">\r\n              <div className=\"mb-4\">\r\n                <i className=\"ri-double-quotes-l text-5xl text-white/50\"></i>\r\n              </div>\r\n              <p className=\"text-white leading-relaxed mb-6 text-base italic min-h-[80px]\">\r\n                {formData.testimonialText || '\"Your testimonial text will appear here...\"'}\r\n              </p>\r\n              <div className=\"border-t border-white/30 pt-4 mt-4\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0 overflow-hidden\">\r\n                    {formData.clientImage?.filePath ? (\r\n                      <img\r\n                        src={`${baseUrl}${formData.clientImage.filePath}`}\r\n                        alt={formData.clientName}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-full h-full bg-white/30 flex items-center justify-center\">\r\n                        <span className=\"text-white font-bold text-lg\">\r\n                          {(formData.clientName || 'C').charAt(0).toUpperCase()}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-bold text-white\">\r\n                      {formData.clientName || 'Client Name'}\r\n                    </h3>\r\n                    {formData.clientPosition && formData.clientCompany ? (\r\n                      <p className=\"text-sm text-white/90\">\r\n                        {formData.clientPosition}, {formData.clientCompany}\r\n                      </p>\r\n                    ) : formData.clientCompany ? (\r\n                      <p className=\"text-sm text-white/90\">{formData.clientCompany}</p>\r\n                    ) : formData.clientPosition ? (\r\n                      <p className=\"text-sm text-white/90\">{formData.clientPosition}</p>\r\n                    ) : (\r\n                      <p className=\"text-sm text-white/60 italic\">Position, Company</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"mt-4 text-xs text-gray-500 space-y-1\">\r\n              <p><strong>Card Features:</strong></p>\r\n              <ul className=\"list-disc list-inside space-y-1 ml-2\">\r\n                <li>Orange background (#FF6B35)</li>\r\n                <li>White quotation marks icon</li>\r\n                <li>White italic testimonial text</li>\r\n                <li>Circular avatar with fallback initial</li>\r\n                <li>Client name in bold white</li>\r\n                <li>Position and company below name</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-end space-x-3 pt-6 mt-6 border-t\">\r\n        <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">\r\n          Cancel\r\n        </button>\r\n        <button \r\n          onClick={() => onSave(formData)} \r\n          disabled={saving || !formData.clientName || !formData.testimonialText} \r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n        >\r\n          {saving ? 'Saving...' : 'Save Testimonial Card'}\r\n        </button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nfunction TestimonialViewModal({ testimonial, onClose, onEdit, getImageUrl }: any) {\r\n  return (\r\n    <Modal isOpen={true} onClose={onClose} title=\"Testimonial Details\" size=\"lg\">\r\n      <div className=\"space-y-6\">\r\n        {testimonial.clientImage && (\r\n          <div className=\"flex justify-center\">\r\n            <img src={getImageUrl(testimonial)} alt={testimonial.clientName} className=\"w-32 h-32 rounded-full object-cover\" />\r\n          </div>\r\n        )}\r\n        <div className=\"text-center\">\r\n          <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">{testimonial.clientName}</h3>\r\n          {testimonial.clientPosition && <p className=\"text-gray-700\">{testimonial.clientPosition}</p>}\r\n          {testimonial.clientCompany && <p className=\"text-blue-600\">{testimonial.clientCompany}</p>}\r\n        </div>\r\n        <div className=\"bg-gray-50 p-6 rounded-lg\">\r\n          <p className=\"text-gray-700 italic text-lg\">\"{testimonial.testimonialText}\"</p>\r\n        </div>\r\n        {testimonial.rating && (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className=\"text-sm text-gray-600\">Rating:</span>\r\n            <div className=\"flex\">\r\n              {[...Array(5)].map((_, i) => (\r\n                <i key={i} className={`ri-star-${i < testimonial.rating! ? 'fill' : 'line'} text-yellow-400`}></i>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"flex justify-end space-x-3 pt-4 border-t\">\r\n          <button onClick={onClose} className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 cursor-pointer\">Close</button>\r\n          <button onClick={onEdit} className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\">\r\n            <i className=\"ri-edit-line mr-2\"></i>Edit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\n","import { useState, useEffect } from 'react';\r\nimport { api } from '../../../../utils/api';\r\nimport FormField from '../../../../components/cms/FormField';\r\nimport ImageSelector from '../../../../components/cms/ImageSelector';\r\n\r\ninterface ReusableContactSection {\r\n  id?: number;\r\n  heading: string | null;\r\n  companyName: string | null;\r\n  address: string | null;\r\n  phone: string | null;\r\n  email: string | null;\r\n  imageId: number | null;\r\n  image?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n  backgroundImageId: number | null;\r\n  backgroundImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\nexport default function ReusableContactManagement() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [content, setContent] = useState<ReusableContactSection>({\r\n    heading: null,\r\n    companyName: null,\r\n    address: null,\r\n    phone: null,\r\n    email: null,\r\n    imageId: null,\r\n    backgroundImageId: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchContent();\r\n  }, []);\r\n\r\n  const fetchContent = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get<ReusableContactSection>('/reusable-contact-section');\r\n      if (response.success && response.data) {\r\n        setContent(response.data as ReusableContactSection);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching content:', error);\r\n      alert(error.message || 'Failed to load content');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const response = await api.put('/reusable-contact-section', content);\r\n      if (response.success) {\r\n        alert('Reusable Contact Section saved successfully!');\r\n        fetchContent();\r\n      }\r\n    } catch (error: any) {\r\n      alert(error.message || 'Failed to save');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900\">Reusable Contact Us Component</h2>\r\n            <p className=\"text-sm text-gray-600 mt-1\">Manage the reusable contact section used across multiple pages</p>\r\n          </div>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 cursor-pointer\"\r\n          >\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-sm\">\r\n          <i className=\"ri-loader-4-line animate-spin text-4xl text-blue-600\"></i>\r\n          <p className=\"text-gray-600 mt-2\">Loading...</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <div className=\"space-y-6\">\r\n            <FormField label=\"Heading\">\r\n              <input\r\n                type=\"text\"\r\n                value={content.heading || ''}\r\n                onChange={(e) => setContent({ ...content, heading: e.target.value || null })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"Contact Us\"\r\n              />\r\n            </FormField>\r\n\r\n            <FormField label=\"Company Name\">\r\n              <input\r\n                type=\"text\"\r\n                value={content.companyName || ''}\r\n                onChange={(e) => setContent({ ...content, companyName: e.target.value || null })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"ADONIS MEDICAL SYSTEMS PVT LTD\"\r\n              />\r\n            </FormField>\r\n\r\n            <FormField label=\"Address\">\r\n              <textarea\r\n                value={content.address || ''}\r\n                onChange={(e) => setContent({ ...content, address: e.target.value || null })}\r\n                rows={4}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                placeholder=\"E-70, PHASE- VIII, INDUSTRIAL AREA, MOHALI, 160071.\"\r\n              />\r\n            </FormField>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <FormField label=\"Phone\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={content.phone || ''}\r\n                  onChange={(e) => setContent({ ...content, phone: e.target.value || null })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"9872003273\"\r\n                />\r\n              </FormField>\r\n\r\n              <FormField label=\"Email\">\r\n                <input\r\n                  type=\"email\"\r\n                  value={content.email || ''}\r\n                  onChange={(e) => setContent({ ...content, email: e.target.value || null })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"support@adonismedical.com\"\r\n                />\r\n              </FormField>\r\n            </div>\r\n\r\n            <div className=\"border-t pt-6 space-y-6\">\r\n              <div>\r\n                <ImageSelector\r\n                  value={content.backgroundImageId}\r\n                  onChange={(id) => setContent({ ...content, backgroundImageId: id })}\r\n                  label=\"Background Image (PNG)\"\r\n                />\r\n                <p className=\"text-sm text-gray-500 mt-2\">\r\n                  <i className=\"ri-information-line mr-1\"></i>\r\n                  Upload a PNG background image for the contact section.\r\n                </p>\r\n              </div>\r\n              \r\n              <div>\r\n                <ImageSelector\r\n                  value={content.imageId}\r\n                  onChange={(id) => setContent({ ...content, imageId: id })}\r\n                  label=\"Contact Section Image\"\r\n                />\r\n                <p className=\"text-sm text-gray-500 mt-2\">\r\n                  <i className=\"ri-information-line mr-1\"></i>\r\n                  Upload an image to display on the right side of the contact section.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n","import { useState } from 'react';\n\ninterface ActivityLog {\n  id: string;\n  user: string;\n  userEmail: string;\n  action: 'create' | 'update' | 'delete' | 'restore' | 'login' | 'logout';\n  page: string;\n  section: string;\n  field?: string;\n  oldValue?: string;\n  newValue?: string;\n  timestamp: Date;\n  ipAddress: string;\n}\n\nexport default function ActivityLogsPage() {\n  const [filterAction, setFilterAction] = useState<string>('all');\n  const [filterPage, setFilterPage] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [dateRange, setDateRange] = useState({ start: '', end: '' });\n\n  // Mock data - In production, fetch from your database\n  const [logs] = useState<ActivityLog[]>([\n    {\n      id: '1',\n      user: 'Admin User',\n      userEmail: 'raghul.je@refex.co.in',\n      action: 'update',\n      page: 'Home',\n      section: 'Hero Section',\n      field: 'Title',\n      oldValue: 'Welcome to Adonis Medical',\n      newValue: 'Affordable Diagnostic Imaging Solutions',\n      timestamp: new Date('2025-01-15T10:30:00'),\n      ipAddress: '192.168.1.100'\n    },\n    {\n      id: '2',\n      user: 'Admin User',\n      userEmail: 'raghul.je@refex.co.in',\n      action: 'login',\n      page: 'Admin',\n      section: 'Authentication',\n      timestamp: new Date('2025-01-15T09:00:00'),\n      ipAddress: '192.168.1.100'\n    },\n    {\n      id: '3',\n      user: 'Editor User',\n      userEmail: 'editor@adonismedical.com',\n      action: 'create',\n      page: 'Products',\n      section: 'Product List',\n      field: 'New Product',\n      newValue: 'HF Mobile X-Ray System',\n      timestamp: new Date('2025-01-14T15:45:00'),\n      ipAddress: '192.168.1.101'\n    },\n    {\n      id: '4',\n      user: 'Admin User',\n      userEmail: 'raghul.je@refex.co.in',\n      action: 'delete',\n      page: 'Awards',\n      section: 'Awards List',\n      field: 'Award Item',\n      oldValue: 'Best Innovation Award 2023',\n      timestamp: new Date('2025-01-14T14:20:00'),\n      ipAddress: '192.168.1.100'\n    },\n    {\n      id: '5',\n      user: 'Admin User',\n      userEmail: 'raghul.je@refex.co.in',\n      action: 'restore',\n      page: 'Awards',\n      section: 'Awards List',\n      field: 'Award Item',\n      newValue: 'Best Innovation Award 2023',\n      timestamp: new Date('2025-01-14T14:25:00'),\n      ipAddress: '192.168.1.100'\n    },\n    {\n      id: '6',\n      user: 'Editor User',\n      userEmail: 'editor@adonismedical.com',\n      action: 'update',\n      page: 'About',\n      section: 'Company Overview',\n      field: 'Description',\n      oldValue: 'We are a leading manufacturer...',\n      newValue: 'Adonis Medical Systems, a professionally managed...',\n      timestamp: new Date('2025-01-13T11:30:00'),\n      ipAddress: '192.168.1.101'\n    }\n  ]);\n\n  const actionColors = {\n    create: 'bg-green-100 text-green-800',\n    update: 'bg-blue-100 text-blue-800',\n    delete: 'bg-red-100 text-red-800',\n    restore: 'bg-purple-100 text-purple-800',\n    login: 'bg-gray-100 text-gray-800',\n    logout: 'bg-gray-100 text-gray-800'\n  };\n\n  const actionIcons = {\n    create: 'ri-add-circle-line',\n    update: 'ri-edit-line',\n    delete: 'ri-delete-bin-line',\n    restore: 'ri-restart-line',\n    login: 'ri-login-box-line',\n    logout: 'ri-logout-box-line'\n  };\n\n  const filteredLogs = logs.filter(log => {\n    const matchesAction = filterAction === 'all' || log.action === filterAction;\n    const matchesPage = filterPage === 'all' || log.page === filterPage;\n    const matchesSearch = searchQuery === '' || \n      log.user.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      log.userEmail.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      log.page.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      log.section.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    return matchesAction && matchesPage && matchesSearch;\n  });\n\n  const exportLogs = () => {\n    const csv = [\n      ['Timestamp', 'User', 'Email', 'Action', 'Page', 'Section', 'Field', 'Old Value', 'New Value', 'IP Address'],\n      ...filteredLogs.map(log => [\n        log.timestamp.toISOString(),\n        log.user,\n        log.userEmail,\n        log.action,\n        log.page,\n        log.section,\n        log.field || '',\n        log.oldValue || '',\n        log.newValue || '',\n        log.ipAddress\n      ])\n    ].map(row => row.join(',')).join('\\\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `activity-logs-${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Activity Logs</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">Track all user actions and changes</p>\n          </div>\n          <button\n            onClick={exportLogs}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors cursor-pointer whitespace-nowrap\"\n          >\n            <i className=\"ri-download-line\"></i>\n            <span>Export Logs</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {/* Search */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Search</label>\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search user, email, page...\"\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n              <i className=\"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"></i>\n            </div>\n          </div>\n\n          {/* Action Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Action</label>\n            <select\n              value={filterAction}\n              onChange={(e) => setFilterAction(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer\"\n            >\n              <option value=\"all\">All Actions</option>\n              <option value=\"create\">Create</option>\n              <option value=\"update\">Update</option>\n              <option value=\"delete\">Delete</option>\n              <option value=\"restore\">Restore</option>\n              <option value=\"login\">Login</option>\n              <option value=\"logout\">Logout</option>\n            </select>\n          </div>\n\n          {/* Page Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Page</label>\n            <select\n              value={filterPage}\n              onChange={(e) => setFilterPage(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer\"\n            >\n              <option value=\"all\">All Pages</option>\n              <option value=\"Home\">Home</option>\n              <option value=\"About\">About</option>\n              <option value=\"Products\">Products</option>\n              <option value=\"Awards\">Awards</option>\n              <option value=\"Careers\">Careers</option>\n              <option value=\"Contact\">Contact</option>\n            </select>\n          </div>\n\n          {/* Date Range */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Date Range</label>\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"date\"\n                value={dateRange.start}\n                onChange={(e) => setDateRange({ ...dateRange, start: e.target.value })}\n                className=\"flex-1 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n              />\n              <input\n                type=\"date\"\n                value={dateRange.end}\n                onChange={(e) => setDateRange({ ...dateRange, end: e.target.value })}\n                className=\"flex-1 px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Logs Table */}\n      <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-50 border-b border-gray-200\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Timestamp</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">User</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Action</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Page</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Section</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Changes</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">IP Address</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredLogs.map((log) => (\n                <tr key={log.id} className=\"hover:bg-gray-50 transition-colors\">\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {log.timestamp.toLocaleString()}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-medium text-gray-900\">{log.user}</div>\n                    <div className=\"text-xs text-gray-500\">{log.userEmail}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${actionColors[log.action]}`}>\n                      <i className={`${actionIcons[log.action]} mr-1`}></i>\n                      {log.action.charAt(0).toUpperCase() + log.action.slice(1)}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{log.page}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{log.section}</td>\n                  <td className=\"px-6 py-4 text-sm text-gray-900\">\n                    {log.field && (\n                      <div className=\"space-y-1\">\n                        <div className=\"font-medium\">{log.field}</div>\n                        {log.oldValue && (\n                          <div className=\"text-xs text-red-600\">\n                            <span className=\"font-medium\">From:</span> {log.oldValue.substring(0, 50)}{log.oldValue.length > 50 ? '...' : ''}\n                          </div>\n                        )}\n                        {log.newValue && (\n                          <div className=\"text-xs text-green-600\">\n                            <span className=\"font-medium\">To:</span> {log.newValue.substring(0, 50)}{log.newValue.length > 50 ? '...' : ''}\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{log.ipAddress}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredLogs.length === 0 && (\n          <div className=\"text-center py-12\">\n            <i className=\"ri-file-list-3-line text-6xl text-gray-300 mb-4\"></i>\n            <p className=\"text-gray-500\">No activity logs found</p>\n          </div>\n        )}\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Actions</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">{logs.length}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-bar-chart-line text-2xl text-blue-600\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Updates</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                {logs.filter(l => l.action === 'update').length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-edit-line text-2xl text-green-600\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Deletions</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                {logs.filter(l => l.action === 'delete').length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-delete-bin-line text-2xl text-red-600\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Logins</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                {logs.filter(l => l.action === 'login').length}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-login-box-line text-2xl text-purple-600\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\n\ninterface DeletedItem {\n  id: string;\n  type: 'page-section' | 'product' | 'award' | 'job' | 'client' | 'document';\n  page: string;\n  section: string;\n  title: string;\n  deletedBy: string;\n  deletedAt: Date;\n  data: any;\n}\n\nexport default function RecycleBinPage() {\n  const [selectedItems, setSelectedItems] = useState<string[]>([]);\n  const [filterType, setFilterType] = useState<string>('all');\n\n  // Mock data - In production, fetch from your database\n  const [deletedItems, setDeletedItems] = useState<DeletedItem[]>([\n    {\n      id: '1',\n      type: 'award',\n      page: 'Awards',\n      section: 'Awards List',\n      title: 'Best Innovation Award 2023',\n      deletedBy: 'raghul.je@refex.co.in',\n      deletedAt: new Date('2025-01-14T14:20:00'),\n      data: {\n        year: '2023',\n        category: 'Innovation',\n        organization: 'Healthcare Excellence Awards',\n        description: 'Recognized for breakthrough innovations in medical imaging technology'\n      }\n    },\n    {\n      id: '2',\n      type: 'product',\n      page: 'Products',\n      section: 'Product List',\n      title: 'Legacy X-Ray System',\n      deletedBy: 'editor@adonismedical.com',\n      deletedAt: new Date('2025-01-13T10:15:00'),\n      data: {\n        category: 'X-Ray Systems',\n        description: 'Discontinued product line'\n      }\n    },\n    {\n      id: '3',\n      type: 'job',\n      page: 'Careers',\n      section: 'Job Openings',\n      title: 'Senior Software Engineer',\n      deletedBy: 'raghul.je@refex.co.in',\n      deletedAt: new Date('2025-01-12T16:30:00'),\n      data: {\n        department: 'Engineering',\n        location: 'Mohali, India',\n        type: 'Full-time'\n      }\n    },\n    {\n      id: '4',\n      type: 'page-section',\n      page: 'Home',\n      section: 'Testimonials',\n      title: 'Customer Testimonial - Dr. Smith',\n      deletedBy: 'editor@adonismedical.com',\n      deletedAt: new Date('2025-01-11T09:45:00'),\n      data: {\n        author: 'Dr. John Smith',\n        content: 'Excellent equipment and service...'\n      }\n    }\n  ]);\n\n  const typeIcons = {\n    'page-section': 'ri-file-text-line',\n    'product': 'ri-product-hunt-line',\n    'award': 'ri-award-line',\n    'job': 'ri-briefcase-line',\n    'client': 'ri-user-heart-line',\n    'document': 'ri-file-line'\n  };\n\n  const typeColors = {\n    'page-section': 'bg-blue-100 text-blue-800',\n    'product': 'bg-green-100 text-green-800',\n    'award': 'bg-yellow-100 text-yellow-800',\n    'job': 'bg-purple-100 text-purple-800',\n    'client': 'bg-pink-100 text-pink-800',\n    'document': 'bg-gray-100 text-gray-800'\n  };\n\n  const filteredItems = filterType === 'all' \n    ? deletedItems \n    : deletedItems.filter(item => item.type === filterType);\n\n  const handleSelectAll = () => {\n    if (selectedItems.length === filteredItems.length) {\n      setSelectedItems([]);\n    } else {\n      setSelectedItems(filteredItems.map(item => item.id));\n    }\n  };\n\n  const handleSelectItem = (id: string) => {\n    setSelectedItems(prev => \n      prev.includes(id) \n        ? prev.filter(itemId => itemId !== id)\n        : [...prev, id]\n    );\n  };\n\n  const handleRestore = (id: string) => {\n    const item = deletedItems.find(i => i.id === id);\n    if (item) {\n      alert(`Restored: ${item.title}`);\n      setDeletedItems(prev => prev.filter(i => i.id !== id));\n      setSelectedItems(prev => prev.filter(itemId => itemId !== id));\n    }\n  };\n\n  const handleRestoreSelected = () => {\n    if (selectedItems.length === 0) return;\n    \n    if (confirm(`Restore ${selectedItems.length} selected item(s)?`)) {\n      setDeletedItems(prev => prev.filter(item => !selectedItems.includes(item.id)));\n      setSelectedItems([]);\n      alert(`${selectedItems.length} item(s) restored successfully!`);\n    }\n  };\n\n  const handlePermanentDelete = (id: string) => {\n    const item = deletedItems.find(i => i.id === id);\n    if (item && confirm(`Permanently delete \"${item.title}\"? This action cannot be undone.`)) {\n      setDeletedItems(prev => prev.filter(i => i.id !== id));\n      setSelectedItems(prev => prev.filter(itemId => itemId !== id));\n      alert('Item permanently deleted');\n    }\n  };\n\n  const handleEmptyBin = () => {\n    if (deletedItems.length === 0) return;\n    \n    if (confirm(`Permanently delete all ${deletedItems.length} item(s)? This action cannot be undone.`)) {\n      setDeletedItems([]);\n      setSelectedItems([]);\n      alert('Recycle bin emptied successfully');\n    }\n  };\n\n  const getDaysAgo = (date: Date) => {\n    const days = Math.floor((new Date().getTime() - date.getTime()) / (1000 * 60 * 60 * 24));\n    if (days === 0) return 'Today';\n    if (days === 1) return 'Yesterday';\n    return `${days} days ago`;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Recycle Bin</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {deletedItems.length} deleted item(s)  Items are kept for 30 days\n            </p>\n          </div>\n          <div className=\"flex space-x-3\">\n            {selectedItems.length > 0 && (\n              <button\n                onClick={handleRestoreSelected}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-restart-line\"></i>\n                <span>Restore Selected ({selectedItems.length})</span>\n              </button>\n            )}\n            <button\n              onClick={handleEmptyBin}\n              disabled={deletedItems.length === 0}\n              className=\"flex items-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <i className=\"ri-delete-bin-line\"></i>\n              <span>Empty Bin</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow-sm p-4\">\n        <div className=\"flex items-center space-x-2 overflow-x-auto\">\n          <button\n            onClick={() => setFilterType('all')}\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n              filterType === 'all'\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            All Items ({deletedItems.length})\n          </button>\n          <button\n            onClick={() => setFilterType('page-section')}\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n              filterType === 'page-section'\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            Page Sections ({deletedItems.filter(i => i.type === 'page-section').length})\n          </button>\n          <button\n            onClick={() => setFilterType('product')}\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n              filterType === 'product'\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            Products ({deletedItems.filter(i => i.type === 'product').length})\n          </button>\n          <button\n            onClick={() => setFilterType('award')}\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n              filterType === 'award'\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            Awards ({deletedItems.filter(i => i.type === 'award').length})\n          </button>\n          <button\n            onClick={() => setFilterType('job')}\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n              filterType === 'job'\n                ? 'bg-blue-500 text-white'\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n            }`}\n          >\n            Jobs ({deletedItems.filter(i => i.type === 'job').length})\n          </button>\n        </div>\n      </div>\n\n      {/* Items List */}\n      <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n        {filteredItems.length > 0 ? (\n          <>\n            {/* Select All */}\n            <div className=\"px-6 py-3 bg-gray-50 border-b border-gray-200\">\n              <label className=\"flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  checked={selectedItems.length === filteredItems.length}\n                  onChange={handleSelectAll}\n                  className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700\">Select All</span>\n              </label>\n            </div>\n\n            {/* Items */}\n            <div className=\"divide-y divide-gray-200\">\n              {filteredItems.map((item) => (\n                <div key={item.id} className=\"px-6 py-4 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-start space-x-4\">\n                    {/* Checkbox */}\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedItems.includes(item.id)}\n                      onChange={() => handleSelectItem(item.id)}\n                      className=\"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer\"\n                    />\n\n                    {/* Icon */}\n                    <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${typeColors[item.type]}`}>\n                      <i className={`${typeIcons[item.type]} text-xl`}></i>\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <h3 className=\"text-sm font-medium text-gray-900\">{item.title}</h3>\n                          <div className=\"flex items-center space-x-2 mt-1\">\n                            <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${typeColors[item.type]}`}>\n                              {item.type.replace('-', ' ')}\n                            </span>\n                            <span className=\"text-xs text-gray-500\"></span>\n                            <span className=\"text-xs text-gray-500\">{item.page} / {item.section}</span>\n                          </div>\n                          <p className=\"text-xs text-gray-500 mt-2\">\n                            Deleted by {item.deletedBy}  {getDaysAgo(item.deletedAt)}\n                          </p>\n                        </div>\n\n                        {/* Actions */}\n                        <div className=\"flex items-center space-x-2 ml-4\">\n                          <button\n                            onClick={() => handleRestore(item.id)}\n                            className=\"flex items-center space-x-1 px-3 py-1.5 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors cursor-pointer whitespace-nowrap text-sm\"\n                          >\n                            <i className=\"ri-restart-line\"></i>\n                            <span>Restore</span>\n                          </button>\n                          <button\n                            onClick={() => handlePermanentDelete(item.id)}\n                            className=\"flex items-center space-x-1 px-3 py-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors cursor-pointer whitespace-nowrap text-sm\"\n                          >\n                            <i className=\"ri-delete-bin-line\"></i>\n                            <span>Delete</span>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </>\n        ) : (\n          <div className=\"text-center py-12\">\n            <i className=\"ri-delete-bin-line text-6xl text-gray-300 mb-4\"></i>\n            <p className=\"text-gray-500\">Recycle bin is empty</p>\n            <p className=\"text-sm text-gray-400 mt-1\">Deleted items will appear here</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\n\ninterface Version {\n  id: string;\n  page: string;\n  section: string;\n  versionNumber: number;\n  createdBy: string;\n  createdAt: Date;\n  changes: string[];\n  data: any;\n}\n\nexport default function VersionHistoryPage() {\n  const [selectedPage, setSelectedPage] = useState<string>('all');\n  const [selectedSection, setSelectedSection] = useState<string>('all');\n  const [compareMode, setCompareMode] = useState(false);\n  const [compareVersions, setCompareVersions] = useState<string[]>([]);\n\n  // Mock data - In production, fetch from your database\n  const [versions] = useState<Version[]>([\n    {\n      id: '1',\n      page: 'Home',\n      section: 'Hero Section',\n      versionNumber: 5,\n      createdBy: 'raghul.je@refex.co.in',\n      createdAt: new Date('2025-01-15T10:30:00'),\n      changes: ['Updated title text', 'Changed background image', 'Modified button color'],\n      data: {\n        title: 'Affordable Diagnostic Imaging Solutions',\n        subtitle: 'Leading manufacturer of high-quality X-ray systems',\n        backgroundImage: 'https://example.com/hero-bg.jpg'\n      }\n    },\n    {\n      id: '2',\n      page: 'Home',\n      section: 'Hero Section',\n      versionNumber: 4,\n      createdBy: 'editor@adonismedical.com',\n      createdAt: new Date('2025-01-14T15:20:00'),\n      changes: ['Updated subtitle', 'Changed overlay opacity'],\n      data: {\n        title: 'Welcome to Adonis Medical',\n        subtitle: 'Quality medical imaging solutions',\n        backgroundImage: 'https://example.com/hero-bg-old.jpg'\n      }\n    },\n    {\n      id: '3',\n      page: 'About',\n      section: 'Company Overview',\n      versionNumber: 3,\n      createdBy: 'raghul.je@refex.co.in',\n      createdAt: new Date('2025-01-13T11:45:00'),\n      changes: ['Added new paragraph', 'Updated bullet points'],\n      data: {\n        paragraphs: ['Updated company description...'],\n        bulletPoints: ['Innovation', 'Quality', 'Service']\n      }\n    },\n    {\n      id: '4',\n      page: 'Products',\n      section: 'Product List',\n      versionNumber: 8,\n      createdBy: 'editor@adonismedical.com',\n      createdAt: new Date('2025-01-12T09:15:00'),\n      changes: ['Added new product', 'Updated product images'],\n      data: {\n        products: ['HF Mobile', 'C-ARM', 'Digital Radiography']\n      }\n    }\n  ]);\n\n  const pages = ['all', ...Array.from(new Set(versions.map(v => v.page)))];\n  const sections = selectedPage === 'all' \n    ? ['all'] \n    : ['all', ...Array.from(new Set(versions.filter(v => v.page === selectedPage).map(v => v.section)))];\n\n  const filteredVersions = versions.filter(v => {\n    const matchesPage = selectedPage === 'all' || v.page === selectedPage;\n    const matchesSection = selectedSection === 'all' || v.section === selectedSection;\n    return matchesPage && matchesSection;\n  });\n\n  const handleCompareToggle = (versionId: string) => {\n    if (compareVersions.includes(versionId)) {\n      setCompareVersions(prev => prev.filter(id => id !== versionId));\n    } else if (compareVersions.length < 2) {\n      setCompareVersions(prev => [...prev, versionId]);\n    }\n  };\n\n  const handleRestore = (version: Version) => {\n    if (confirm(`Restore ${version.page} - ${version.section} to version ${version.versionNumber}?`)) {\n      alert(`Restored to version ${version.versionNumber}`);\n    }\n  };\n\n  const handleCompare = () => {\n    if (compareVersions.length === 2) {\n      alert('Opening comparison view...');\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Version History</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">View and restore previous versions of your content</p>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <label className=\"flex items-center space-x-2 cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={compareMode}\n                onChange={(e) => {\n                  setCompareMode(e.target.checked);\n                  if (!e.target.checked) setCompareVersions([]);\n                }}\n                className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer\"\n              />\n              <span className=\"text-sm font-medium text-gray-700\">Compare Mode</span>\n            </label>\n            {compareMode && compareVersions.length === 2 && (\n              <button\n                onClick={handleCompare}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                <i className=\"ri-git-compare-line\"></i>\n                <span>Compare Versions</span>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Page</label>\n            <select\n              value={selectedPage}\n              onChange={(e) => {\n                setSelectedPage(e.target.value);\n                setSelectedSection('all');\n              }}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer\"\n            >\n              {pages.map(page => (\n                <option key={page} value={page}>\n                  {page === 'all' ? 'All Pages' : page}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Section</label>\n            <select\n              value={selectedSection}\n              onChange={(e) => setSelectedSection(e.target.value)}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent cursor-pointer\"\n            >\n              {sections.map(section => (\n                <option key={section} value={section}>\n                  {section === 'all' ? 'All Sections' : section}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Version Timeline */}\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">Version Timeline</h3>\n        \n        {filteredVersions.length > 0 ? (\n          <div className=\"space-y-6\">\n            {filteredVersions.map((version, index) => (\n              <div key={version.id} className=\"relative\">\n                {/* Timeline Line */}\n                {index !== filteredVersions.length - 1 && (\n                  <div className=\"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-200\"></div>\n                )}\n\n                <div className=\"flex items-start space-x-4\">\n                  {/* Compare Checkbox */}\n                  {compareMode && (\n                    <input\n                      type=\"checkbox\"\n                      checked={compareVersions.includes(version.id)}\n                      onChange={() => handleCompareToggle(version.id)}\n                      disabled={!compareVersions.includes(version.id) && compareVersions.length >= 2}\n                      className=\"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n                    />\n                  )}\n\n                  {/* Version Badge */}\n                  <div className=\"relative z-10 flex-shrink-0 w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold\">\n                    v{version.versionNumber}\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"flex-1 bg-gray-50 rounded-lg p-4\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <h4 className=\"text-sm font-semibold text-gray-900\">\n                            {version.page} - {version.section}\n                          </h4>\n                          <span className=\"px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-medium rounded\">\n                            Version {version.versionNumber}\n                          </span>\n                        </div>\n                        \n                        <p className=\"text-xs text-gray-500 mb-3\">\n                          {version.createdAt.toLocaleString()}  by {version.createdBy}\n                        </p>\n\n                        <div className=\"space-y-1\">\n                          <p className=\"text-xs font-medium text-gray-700\">Changes:</p>\n                          <ul className=\"space-y-1\">\n                            {version.changes.map((change, idx) => (\n                              <li key={idx} className=\"text-xs text-gray-600 flex items-start\">\n                                <i className=\"ri-arrow-right-s-line text-blue-500 mt-0.5\"></i>\n                                <span>{change}</span>\n                              </li>\n                            ))}\n                          </ul>\n                        </div>\n                      </div>\n\n                      {/* Actions */}\n                      <div className=\"flex items-center space-x-2 ml-4\">\n                        <button\n                          onClick={() => alert('Opening preview...')}\n                          className=\"flex items-center space-x-1 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors cursor-pointer whitespace-nowrap text-sm\"\n                        >\n                          <i className=\"ri-eye-line\"></i>\n                          <span>Preview</span>\n                        </button>\n                        <button\n                          onClick={() => handleRestore(version)}\n                          className=\"flex items-center space-x-1 px-3 py-1.5 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors cursor-pointer whitespace-nowrap text-sm\"\n                        >\n                          <i className=\"ri-restart-line\"></i>\n                          <span>Restore</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <i className=\"ri-history-line text-6xl text-gray-300 mb-4\"></i>\n            <p className=\"text-gray-500\">No version history found</p>\n          </div>\n        )}\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Total Versions</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">{versions.length}</p>\n            </div>\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-git-branch-line text-2xl text-blue-600\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Pages Tracked</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">\n                {new Set(versions.map(v => v.page)).size}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-file-list-line text-2xl text-green-600\"></i>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600\">Latest Update</p>\n              <p className=\"text-sm font-bold text-gray-900 mt-1\">\n                {versions[0]?.createdAt.toLocaleDateString()}\n              </p>\n            </div>\n            <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\n              <i className=\"ri-time-line text-2xl text-purple-600\"></i>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AOS from 'aos';\nimport 'aos/dist/aos.css';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { getDefaultImageUrl } from '../../../utils/imageUrl';\nimport HomePageManagement from './components/HomePageManagement';\nimport HeaderFooterManagement from './components/HeaderFooterManagement';\nimport AboutPageManagement from './components/AboutPageManagement';\nimport UserManagement from './components/UserManagement';\nimport ProductsPageManagement from './components/ProductsPageManagement';\nimport AwardsPageManagement from './components/AwardsPageManagement';\nimport CareersPageManagement from './components/CareersPageManagement';\nimport ContactPageManagement from './components/ContactPageManagement';\nimport SMTPConfiguration from './components/SMTPConfiguration';\nimport SpecialtiesPageManagement from './components/SpecialtiesPageManagement';\nimport InvestorRelationsPageManagement from './components/InvestorRelationsPageManagement';\nimport ClientsPageManagement from './components/ClientsPageManagement';\nimport ManagementPageManagement from './components/ManagementPageManagement';\nimport OurPresencePageManagement from './components/OurPresencePageManagement';\nimport ProductionFacilityPageManagement from './components/ProductionFacilityPageManagement';\nimport QualityAssurancePageManagement from './components/QualityAssurancePageManagement';\nimport RequestDemoPageManagement from './components/RequestDemoPageManagement';\nimport OurProductsPageManagement from './components/OurProductsPageManagement';\nimport TermsAndConditionsManagement from './components/TermsAndConditionsManagement';\nimport PrivacyPolicyManagement from './components/PrivacyPolicyManagement';\nimport FaqsManagement from './components/FaqsManagement';\nimport ContactInfoManagement from './components/ContactInfoManagement';\nimport GlobalSettingsManagement from './components/GlobalSettingsManagement';\nimport SocialLinksManagement from './components/SocialLinksManagement';\nimport TestimonialsManagement from './components/TestimonialsManagement';\nimport ReusableContactManagement from './components/ReusableContactManagement';\nimport ActivityLogsPage from './components/ActivityLogsPage';\nimport RecycleBinPage from './components/RecycleBinPage';\nimport VersionHistoryPage from './components/VersionHistoryPage';\n\ntype MainTab = 'home' | 'header-footer' | 'about' | 'products' | 'our-products' | 'awards' | 'careers' | 'specialties' | 'investors' | 'clients' | 'management' | 'presence' | 'production' | 'quality' | 'demo' | 'contact' | 'contact-info' | 'reusable-contact' | 'terms' | 'privacy' | 'faqs' | 'global-settings' | 'social-links' | 'testimonials' | 'users' | 'smtp' | 'logs' | 'bin' | 'versions';\n\nexport default function AdminDashboardPage() {\n  const navigate = useNavigate();\n  const { user, logout } = useAuth();\n  const [activeMainTab, setActiveMainTab] = useState<MainTab>('home');\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    AOS.init({\n      duration: 600,\n      once: true,\n      easing: 'ease-out-cubic'\n    });\n  }, []);\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  const mainTabs = [\n    { id: 'home' as MainTab, label: 'Home', icon: 'ri-home-line' },\n    { id: 'header-footer' as MainTab, label: 'Header & Footer', icon: 'ri-layout-line' },\n    { id: 'about' as MainTab, label: 'About', icon: 'ri-information-line' },\n    { id: 'products' as MainTab, label: 'Products', icon: 'ri-product-hunt-line' },\n    { id: 'our-products' as MainTab, label: 'Our Products', icon: 'ri-shopping-bag-line' },\n    { id: 'awards' as MainTab, label: 'Awards', icon: 'ri-award-line' },\n    { id: 'careers' as MainTab, label: 'Careers', icon: 'ri-briefcase-line' },\n    { id: 'specialties' as MainTab, label: 'Specialties', icon: 'ri-stethoscope-line' },\n    { id: 'investors' as MainTab, label: 'Investors', icon: 'ri-line-chart-line' },\n    { id: 'clients' as MainTab, label: 'Clients', icon: 'ri-user-heart-line' },\n    { id: 'management' as MainTab, label: 'Management', icon: 'ri-team-line' },\n    { id: 'presence' as MainTab, label: 'Our Presence', icon: 'ri-map-2-line' },\n    { id: 'production' as MainTab, label: 'Production', icon: 'ri-factory-line' },\n    { id: 'quality' as MainTab, label: 'Quality', icon: 'ri-shield-check-line' },\n    { id: 'demo' as MainTab, label: 'Request Demo', icon: 'ri-calendar-check-line' },\n    { id: 'contact' as MainTab, label: 'Contact', icon: 'ri-mail-line' },\n    { id: 'contact-info' as MainTab, label: 'Contact Info', icon: 'ri-contacts-line' },\n    { id: 'reusable-contact' as MainTab, label: 'Reusable Contact', icon: 'ri-mail-send-line' },\n    { id: 'terms' as MainTab, label: 'Terms & Conditions', icon: 'ri-file-text-line' },\n    { id: 'privacy' as MainTab, label: 'Privacy Policy', icon: 'ri-shield-check-line' },\n    { id: 'faqs' as MainTab, label: 'FAQs', icon: 'ri-question-line' },\n    { id: 'global-settings' as MainTab, label: 'Global Settings', icon: 'ri-settings-3-line' },\n    { id: 'social-links' as MainTab, label: 'Social Links', icon: 'ri-share-line' },\n    { id: 'testimonials' as MainTab, label: 'Testimonials', icon: 'ri-chat-quote-line' },\n    { id: 'users' as MainTab, label: 'Users', icon: 'ri-user-settings-line' },\n    { id: 'smtp' as MainTab, label: 'SMTP', icon: 'ri-mail-settings-line' },\n    { id: 'logs' as MainTab, label: 'Activity Logs', icon: 'ri-file-list-3-line' },\n    { id: 'bin' as MainTab, label: 'Recycle Bin', icon: 'ri-delete-bin-line' },\n    { id: 'versions' as MainTab, label: 'Version History', icon: 'ri-history-line' }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-[#F5F7FA]\">\n      {/* Top Header */}\n      <div className=\"bg-white border-b border-[#E5E7EB] sticky top-0 z-50 shadow-sm\">\n        <div className=\"px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            {/* Logo & Title */}\n            <div className=\"flex items-center space-x-4\">\n              <img \n                src={getDefaultImageUrl('2024/09/logo_adonis_4x-1.svg')} \n                alt=\"Adonis Medical\" \n                className=\"h-10\"\n              />\n              <div>\n                <h1 className=\"text-xl font-bold text-[#2563EB]\">Admin Dashboard</h1>\n                <p className=\"text-xs text-[#6B7280]\">Content Management System</p>\n              </div>\n            </div>\n\n            {/* User Info & Logout */}\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-[#1F2937]\">Welcome, <span className=\"text-[#2563EB]\">{user?.email || user?.fullName || 'Admin'}</span></p>\n              </div>\n              <button\n                onClick={handleLogout}\n                className=\"flex items-center space-x-2 px-4 py-2 bg-[#EF4444] text-white rounded-lg hover:bg-[#DC2626] transition-all duration-300 whitespace-nowrap cursor-pointer\"\n              >\n                <i className=\"ri-logout-box-line\"></i>\n                <span className=\"text-sm font-medium\">Logout</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Navigation Tabs */}\n        <div className=\"px-6\">\n          <div className=\"flex items-center space-x-2 overflow-x-auto\">\n            {mainTabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveMainTab(tab.id)}\n                className={`flex items-center space-x-2 px-6 py-3 font-medium text-sm whitespace-nowrap transition-all duration-300 border-b-2 cursor-pointer ${\n                  activeMainTab === tab.id\n                    ? 'text-[#2563EB] border-[#2563EB] bg-gradient-to-b from-[#EFF6FF] to-transparent'\n                    : 'text-[#6B7280] border-transparent hover:text-[#2563EB] hover:bg-[#F9FAFB]'\n                }`}\n              >\n                <i className={`${tab.icon} text-lg`}></i>\n                <span>{tab.label}</span>\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"p-6\">\n        {activeMainTab === 'home' && <HomePageManagement />}\n        {activeMainTab === 'header-footer' && <HeaderFooterManagement />}\n        {activeMainTab === 'about' && <AboutPageManagement />}\n        {activeMainTab === 'products' && <ProductsPageManagement />}\n        {activeMainTab === 'our-products' && <OurProductsPageManagement />}\n        {activeMainTab === 'awards' && <AwardsPageManagement />}\n        {activeMainTab === 'careers' && <CareersPageManagement />}\n        {activeMainTab === 'specialties' && <SpecialtiesPageManagement />}\n        {activeMainTab === 'investors' && <InvestorRelationsPageManagement />}\n        {activeMainTab === 'clients' && <ClientsPageManagement />}\n        {activeMainTab === 'management' && <ManagementPageManagement />}\n        {activeMainTab === 'presence' && <OurPresencePageManagement />}\n        {activeMainTab === 'production' && <ProductionFacilityPageManagement />}\n        {activeMainTab === 'quality' && <QualityAssurancePageManagement />}\n        {activeMainTab === 'demo' && <RequestDemoPageManagement />}\n        {activeMainTab === 'contact' && <ContactPageManagement />}\n        {activeMainTab === 'contact-info' && <ContactInfoManagement />}\n        {activeMainTab === 'reusable-contact' && <ReusableContactManagement />}\n        {activeMainTab === 'terms' && <TermsAndConditionsManagement />}\n        {activeMainTab === 'privacy' && <PrivacyPolicyManagement />}\n        {activeMainTab === 'faqs' && <FaqsManagement />}\n        {activeMainTab === 'global-settings' && <GlobalSettingsManagement />}\n        {activeMainTab === 'social-links' && <SocialLinksManagement />}\n        {activeMainTab === 'testimonials' && <TestimonialsManagement />}\n        {activeMainTab === 'users' && <UserManagement />}\n        {activeMainTab === 'smtp' && <SMTPConfiguration />}\n        {activeMainTab === 'logs' && <ActivityLogsPage />}\n        {activeMainTab === 'bin' && <RecycleBinPage />}\n        {activeMainTab === 'versions' && <VersionHistoryPage />}\n      </div>\n    </div>\n  );\n}\n"],"file":"page-WMPSYT4B.js"}