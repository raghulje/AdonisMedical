{"version":3,"file":"TestimonialsSection-MpSCh3Mp.js","sources":["../../src/hooks/useTestimonials.ts","../../src/pages/home/components/TestimonialsSection.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { api } from '../utils/api';\r\n\r\ninterface Testimonial {\r\n  id: number;\r\n  clientName: string;\r\n  clientPosition: string | null;\r\n  clientCompany: string | null;\r\n  clientImageId: number | null;\r\n  testimonialText: string;\r\n  rating: number;\r\n  orderIndex: number;\r\n  isFeatured: boolean;\r\n  isActive: boolean;\r\n  clientImage: any | null;\r\n}\r\n\r\nexport const useTestimonials = () => {\r\n  const [testimonials, setTestimonials] = useState<Testimonial[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchTestimonials = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await api.get<Testimonial[]>('/testimonials');\r\n        if (response.success && response.data) {\r\n          setTestimonials(response.data);\r\n        }\r\n      } catch (err: any) {\r\n        setError(err.message || 'Failed to fetch testimonials');\r\n        console.error('Error fetching testimonials:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTestimonials();\r\n  }, []);\r\n\r\n  return { testimonials, loading, error };\r\n};\r\n\r\n","import { useState, useEffect, useRef } from 'react';\nimport { useTestimonials } from '../../../hooks';\nimport { getImageUrl, getDefaultImageUrl } from '../../../utils/imageUrl';\n\nconst TestimonialsSection = () => {\n  const { testimonials, loading, error } = useTestimonials();\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [isPaused, setIsPaused] = useState(false);\n  const [cardsPerView, setCardsPerView] = useState(2);\n  const carouselRef = useRef<HTMLDivElement>(null);\n\n  // Calculate card width based on viewport (1 card on mobile, 2 on desktop)\n  useEffect(() => {\n    const updateCardsPerView = () => {\n      setCardsPerView(window.innerWidth < 768 ? 1 : 2);\n    };\n    updateCardsPerView();\n    window.addEventListener('resize', updateCardsPerView);\n    return () => window.removeEventListener('resize', updateCardsPerView);\n  }, []);\n\n  // Filter and validate testimonials\n  const validTestimonials = testimonials.filter(\n    (t) => t && t.testimonialText && t.clientName && t.isActive !== false\n  );\n\n  // Duplicate testimonials for infinite loop (show 3 sets for seamless looping)\n  const duplicatedTestimonials = validTestimonials.length > 0 \n    ? [...validTestimonials, ...validTestimonials, ...validTestimonials]\n    : [];\n\n  const cardWidthPercent = cardsPerView > 0 ? 100 / cardsPerView : 100; // 100% on mobile (1 card), 50% on desktop (2 cards)\n\n  // Auto-scroll every 4 seconds\n  useEffect(() => {\n    if (loading || error || validTestimonials.length === 0 || isPaused || cardsPerView === 0) return;\n\n    const interval = setInterval(() => {\n      setCurrentIndex((prev) => {\n        const maxIndex = Math.max(0, validTestimonials.length - cardsPerView);\n        const nextIndex = prev + 1;\n        // Reset to start when we reach the end (accounting for cards per view)\n        if (nextIndex > maxIndex) {\n          return 0; // Loop back to start\n        }\n        return nextIndex;\n      });\n    }, 4000); // 4 seconds\n\n    return () => clearInterval(interval);\n  }, [validTestimonials.length, loading, error, isPaused, cardsPerView]);\n\n  const goToPrevious = () => {\n    setCurrentIndex((prev) => {\n      if (validTestimonials.length === 0) return 0;\n      return prev === 0 ? Math.max(0, validTestimonials.length - cardsPerView) : prev - 1;\n    });\n  };\n\n  const goToNext = () => {\n    setCurrentIndex((prev) => {\n      if (validTestimonials.length === 0) return 0;\n      const maxIndex = Math.max(0, validTestimonials.length - cardsPerView);\n      const next = prev + 1;\n      // If we're at the end, loop back to start\n      if (next > maxIndex) {\n        return 0; // Loop back\n      }\n      return next;\n    });\n  };\n\n  if (loading) {\n    return (\n      <section className=\"py-20 bg-gradient-to-b from-gray-50 to-white\">\n        <div className=\"max-w-7xl mx-auto px-6 lg:px-12\">\n          <div className=\"flex items-center justify-center h-64\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF6B35]\"></div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n  if (error) {\n    return (\n      <section className=\"py-20 bg-gradient-to-b from-gray-50 to-white\">\n        <div className=\"max-w-7xl mx-auto px-6 lg:px-12\">\n          <div className=\"text-red-600 text-center p-4\">\n            <p>Failed to load testimonials. Please try again later.</p>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n  if (validTestimonials.length === 0) {\n    return null;\n  }\n\n  return (\n    <section className=\"py-20 bg-gradient-to-b from-gray-50 to-white\">\n      <div className=\"max-w-7xl mx-auto px-6 lg:px-12\">\n        <div className=\"mb-12 relative\" data-aos=\"fade-up\">\n          <p className=\"text-[#7ED957] font-medium mb-2 uppercase text-sm\">Testimonial</p>\n          <h2 className=\"text-4xl md:text-5xl font-bold text-gray-900 mb-4\">Client Stories & Experiences</h2>\n          \n          {/* Navigation Arrows */}\n          {validTestimonials.length > cardsPerView && (\n            <div className=\"absolute top-0 right-0 flex gap-2\">\n              <button\n                onClick={goToPrevious}\n                onMouseEnter={() => setIsPaused(true)}\n                onMouseLeave={() => setIsPaused(false)}\n                className=\"w-10 h-10 rounded-full border-2 border-[#0066CC] bg-white hover:bg-[#0066CC] text-[#0066CC] hover:text-white transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg\"\n                aria-label=\"Previous testimonials\"\n              >\n                <i className=\"ri-arrow-left-line text-xl\"></i>\n              </button>\n              <button\n                onClick={goToNext}\n                onMouseEnter={() => setIsPaused(true)}\n                onMouseLeave={() => setIsPaused(false)}\n                className=\"w-10 h-10 rounded-full border-2 border-[#0066CC] bg-white hover:bg-[#0066CC] text-[#0066CC] hover:text-white transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg\"\n                aria-label=\"Next testimonials\"\n              >\n                <i className=\"ri-arrow-right-line text-xl\"></i>\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Carousel Container */}\n        <div \n          ref={carouselRef}\n          className=\"overflow-hidden relative\"\n          onMouseEnter={() => setIsPaused(true)}\n          onMouseLeave={() => setIsPaused(false)}\n        >\n          <div \n            className=\"flex transition-transform duration-700 ease-in-out\"\n            style={{ \n              transform: `translateX(-${currentIndex * cardWidthPercent}%)`,\n              width: `${(duplicatedTestimonials.length * 100) / cardsPerView}%` // Total width based on cards per view\n            }}\n          >\n            {duplicatedTestimonials.map((testimonial, index) => (\n              <div\n                key={`${testimonial.id}-${index}`}\n                className=\"flex-shrink-0 px-2 md:px-4\"\n                style={{ width: `${cardWidthPercent}%` }} // Each card width based on cards per view\n              >\n                <div className=\"bg-[#FF6B35] p-6 md:p-8 rounded-lg text-white h-full hover:shadow-2xl transition-all duration-300 hover:-translate-y-2\">\n                  <div className=\"mb-6\">\n                    <i className=\"ri-double-quotes-l text-5xl text-white/50\"></i>\n                  </div>\n\n                  <p className=\"text-white leading-relaxed mb-6 text-base md:text-lg italic\">\n                    \"{testimonial?.testimonialText || ''}\"\n                  </p>\n\n                  <div className=\"border-t border-white/30 pt-6 mt-6\">\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-12 h-12 md:w-16 md:h-16 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0 overflow-hidden relative border-2 border-white/30\">\n                        {testimonial?.clientImage?.filePath ? (\n                          <img\n                            src={getImageUrl(testimonial.clientImage)}\n                            alt={testimonial?.clientName || 'Client'}\n                            className=\"w-full h-full object-cover\"\n                            onError={(e) => {\n                              // Fallback to initial if image fails\n                              const target = e.target as HTMLImageElement;\n                              target.style.display = 'none';\n                              const parent = target.parentElement;\n                              if (parent) {\n                                parent.innerHTML = `\n                                  <div class=\"w-full h-full bg-white/30 flex items-center justify-center\">\n                                    <span class=\"text-white font-bold text-lg\">\n                                      ${(testimonial?.clientName || 'C').charAt(0).toUpperCase()}\n                                    </span>\n                                  </div>\n                                `;\n                              }\n                            }}\n                          />\n                        ) : (\n                          <div className=\"w-full h-full bg-white/30 flex items-center justify-center\">\n                            <span className=\"text-white font-bold text-lg\">\n                              {(testimonial?.clientName || 'C').charAt(0).toUpperCase()}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"text-base md:text-lg font-bold text-white mb-1\">{testimonial?.clientName || 'Client'}</h3>\n                        {testimonial?.clientPosition && testimonial?.clientCompany ? (\n                          <p className=\"text-sm text-white/90\">\n                            {testimonial.clientPosition}, {testimonial.clientCompany}\n                          </p>\n                        ) : testimonial?.clientCompany ? (\n                          <p className=\"text-sm text-white/90\">{testimonial.clientCompany}</p>\n                        ) : testimonial?.clientPosition ? (\n                          <p className=\"text-sm text-white/90\">{testimonial.clientPosition}</p>\n                        ) : null}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default TestimonialsSection;\n"],"names":["useTestimonials","testimonials","setTestimonials","useState","loading","setLoading","error","setError","useEffect","response","api","err","TestimonialsSection","currentIndex","setCurrentIndex","isPaused","setIsPaused","cardsPerView","setCardsPerView","carouselRef","useRef","updateCardsPerView","validTestimonials","duplicatedTestimonials","cardWidthPercent","interval","prev","maxIndex","nextIndex","goToPrevious","goToNext","next","jsx","jsxs","testimonial","index","getImageUrl","e","target","parent"],"mappings":"iGAiBO,MAAMA,EAAkB,IAAM,CACnC,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAAA,SAAwB,CAAA,CAAE,EAC5D,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAEtDK,OAAAA,EAAAA,UAAU,IAAM,EACY,SAAY,CACpC,GAAI,CACFH,EAAW,EAAI,EACf,MAAMI,EAAW,MAAMC,EAAI,IAAmB,eAAe,EACzDD,EAAS,SAAWA,EAAS,MAC/BP,EAAgBO,EAAS,IAAI,CAEjC,OAASE,EAAU,CACjBJ,EAASI,EAAI,SAAW,8BAA8B,EACtD,QAAQ,MAAM,+BAAgCA,CAAG,CACnD,QAAA,CACEN,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAAA,CAAE,EAEE,CAAE,aAAAJ,EAAc,QAAAG,EAAS,MAAAE,CAAA,CAClC,ECtCMM,EAAsB,IAAM,CAChC,KAAM,CAAE,aAAAX,EAAc,QAAAG,EAAS,MAAAE,CAAA,EAAUN,EAAA,EACnC,CAACa,EAAcC,CAAe,EAAIX,EAAAA,SAAS,CAAC,EAC5C,CAACY,EAAUC,CAAW,EAAIb,EAAAA,SAAS,EAAK,EACxC,CAACc,EAAcC,CAAe,EAAIf,EAAAA,SAAS,CAAC,EAC5CgB,EAAcC,EAAAA,OAAuB,IAAI,EAG/CZ,EAAAA,UAAU,IAAM,CACd,MAAMa,EAAqB,IAAM,CAC/BH,EAAgB,OAAO,WAAa,IAAM,EAAI,CAAC,CACjD,EACA,OAAAG,EAAA,EACA,OAAO,iBAAiB,SAAUA,CAAkB,EAC7C,IAAM,OAAO,oBAAoB,SAAUA,CAAkB,CACtE,EAAG,CAAA,CAAE,EAGL,MAAMC,EAAoBrB,EAAa,OACpC,GAAM,GAAK,EAAE,iBAAmB,EAAE,YAAc,EAAE,WAAa,EAAA,EAI5DsB,EAAyBD,EAAkB,OAAS,EACtD,CAAC,GAAGA,EAAmB,GAAGA,EAAmB,GAAGA,CAAiB,EACjE,CAAA,EAEEE,EAAmBP,EAAe,EAAI,IAAMA,EAAe,IAGjET,EAAAA,UAAU,IAAM,CACd,GAAIJ,GAAWE,GAASgB,EAAkB,SAAW,GAAKP,GAAYE,IAAiB,EAAG,OAE1F,MAAMQ,EAAW,YAAY,IAAM,CACjCX,EAAiBY,GAAS,CACxB,MAAMC,EAAW,KAAK,IAAI,EAAGL,EAAkB,OAASL,CAAY,EAC9DW,EAAYF,EAAO,EAEzB,OAAIE,EAAYD,EACP,EAEFC,CACT,CAAC,CACH,EAAG,GAAI,EAEP,MAAO,IAAM,cAAcH,CAAQ,CACrC,EAAG,CAACH,EAAkB,OAAQlB,EAASE,EAAOS,EAAUE,CAAY,CAAC,EAErE,MAAMY,EAAe,IAAM,CACzBf,EAAiBY,GACXJ,EAAkB,SAAW,EAAU,EACpCI,IAAS,EAAI,KAAK,IAAI,EAAGJ,EAAkB,OAASL,CAAY,EAAIS,EAAO,CACnF,CACH,EAEMI,EAAW,IAAM,CACrBhB,EAAiBY,GAAS,CACxB,GAAIJ,EAAkB,SAAW,EAAG,MAAO,GAC3C,MAAMK,EAAW,KAAK,IAAI,EAAGL,EAAkB,OAASL,CAAY,EAC9Dc,EAAOL,EAAO,EAEpB,OAAIK,EAAOJ,EACF,EAEFI,CACT,CAAC,CACH,EAEA,OAAI3B,QAEC,UAAA,CAAQ,UAAU,+CACjB,SAAA4B,EAAAA,IAAC,MAAA,CAAI,UAAU,kCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,iEAAA,CAAkE,EACnF,EACF,CAAA,CACF,EAIA1B,QAEC,UAAA,CAAQ,UAAU,+CACjB,SAAA0B,EAAAA,IAAC,OAAI,UAAU,kCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAAC,KAAE,SAAA,sDAAA,CAAoD,EACzD,EACF,CAAA,CACF,EAIAV,EAAkB,SAAW,EACxB,WAIN,UAAA,CAAQ,UAAU,+CACjB,SAAAW,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iBAAiB,WAAS,UACvC,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,oDAAoD,SAAA,cAAW,EAC5EA,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAoD,SAAA,+BAA4B,EAG7FV,EAAkB,OAASL,GAC1BgB,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAD,EAAAA,IAAC,SAAA,CACC,QAASH,EACT,aAAc,IAAMb,EAAY,EAAI,EACpC,aAAc,IAAMA,EAAY,EAAK,EACrC,UAAU,sMACV,aAAW,wBAEX,SAAAgB,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAAA,CAA6B,CAAA,CAAA,EAE5CA,EAAAA,IAAC,SAAA,CACC,QAASF,EACT,aAAc,IAAMd,EAAY,EAAI,EACpC,aAAc,IAAMA,EAAY,EAAK,EACrC,UAAU,sMACV,aAAW,oBAEX,SAAAgB,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAAA,CAA8B,CAAA,CAAA,CAC7C,CAAA,CACF,CAAA,EAEJ,EAGAA,EAAAA,IAAC,MAAA,CACC,IAAKb,EACL,UAAU,2BACV,aAAc,IAAMH,EAAY,EAAI,EACpC,aAAc,IAAMA,EAAY,EAAK,EAErC,SAAAgB,EAAAA,IAAC,MAAA,CACC,UAAU,qDACV,MAAO,CACL,UAAW,eAAenB,EAAeW,CAAgB,KACzD,MAAO,GAAID,EAAuB,OAAS,IAAON,CAAY,GAAA,EAG/D,SAAAM,EAAuB,IAAI,CAACW,EAAaC,IACxCH,EAAAA,IAAC,MAAA,CAEC,UAAU,6BACV,MAAO,CAAE,MAAO,GAAGR,CAAgB,GAAA,EAEnC,SAAAS,EAAAA,KAAC,MAAA,CAAI,UAAU,yHACb,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,OACb,eAAC,IAAA,CAAE,UAAU,4CAA4C,CAAA,CAC3D,EAEAC,EAAAA,KAAC,IAAA,CAAE,UAAU,8DAA8D,SAAA,CAAA,IACvEC,GAAa,iBAAmB,GAAG,GAAA,EACvC,QAEC,MAAA,CAAI,UAAU,qCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAD,MAAC,MAAA,CAAI,UAAU,sJACZ,SAAAE,GAAa,aAAa,SACzBF,EAAAA,IAAC,MAAA,CACC,IAAKI,EAAYF,EAAY,WAAW,EACxC,IAAKA,GAAa,YAAc,SAChC,UAAU,6BACV,QAAUG,GAAM,CAEd,MAAMC,EAASD,EAAE,OACjBC,EAAO,MAAM,QAAU,OACvB,MAAMC,EAASD,EAAO,cAClBC,IACFA,EAAO,UAAY;AAAA;AAAA;AAAA,yCAGVL,GAAa,YAAc,KAAK,OAAO,CAAC,EAAE,aAAa;AAAA;AAAA;AAAA,kCAKpE,CAAA,CAAA,EAGFF,EAAAA,IAAC,MAAA,CAAI,UAAU,6DACb,SAAAA,MAAC,QAAK,UAAU,+BACZ,UAAAE,GAAa,YAAc,KAAK,OAAO,CAAC,EAAE,YAAA,CAAY,CAC1D,EACF,EAEJ,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAD,MAAC,KAAA,CAAG,UAAU,iDAAkD,SAAAE,GAAa,YAAc,SAAS,EACnGA,GAAa,gBAAkBA,GAAa,cAC3CD,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAC,EAAY,eAAe,KAAGA,EAAY,aAAA,CAAA,CAC7C,EACEA,GAAa,oBACd,IAAA,CAAE,UAAU,wBAAyB,SAAAA,EAAY,aAAA,CAAc,EAC9DA,GAAa,eACfF,MAAC,IAAA,CAAE,UAAU,wBAAyB,SAAAE,EAAY,eAAe,EAC/D,IAAA,CAAA,CACN,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EA3DK,GAAGA,EAAY,EAAE,IAAIC,CAAK,EAAA,CA6DlC,CAAA,CAAA,CACH,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAEJ"}