{"version":3,"file":"productSlugs-BeYw2jYc.js","sources":["../../src/hooks/useProduct.ts","../../src/utils/productSlugs.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { api } from '../utils/api';\r\n\r\ninterface ProductImage {\r\n  id: number;\r\n  imageId: number;\r\n  orderIndex: number;\r\n  isPrimary: boolean;\r\n  image?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\ninterface ProductFeature {\r\n  id: number;\r\n  featureText: string;\r\n  orderIndex: number;\r\n}\r\n\r\ninterface ProductVariant {\r\n  id: number;\r\n  variantName: string;\r\n  orderIndex: number;\r\n  isActive: boolean;\r\n}\r\n\r\ninterface ProductPageContent {\r\n  id?: number;\r\n  title: string | null;\r\n  mainImageId: number | null;\r\n  deploymentInfo: string | null;\r\n  shortDescription: string | null;\r\n  fullDescription: string | null;\r\n  mainImage?: {\r\n    filePath: string;\r\n    altText: string;\r\n  };\r\n}\r\n\r\ninterface ProductData {\r\n  content: ProductPageContent | null;\r\n  images: ProductImage[];\r\n  features: ProductFeature[];\r\n  variants: ProductVariant[];\r\n}\r\n\r\nexport const useProduct = (productSlug: string) => {\r\n  const [data, setData] = useState<ProductData>({\r\n    content: null,\r\n    images: [],\r\n    features: [],\r\n    variants: []\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProductData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        // Fetch all data in parallel\r\n        const [contentRes, imagesRes, featuresRes, variantsRes] = await Promise.all([\r\n          api.get<ProductPageContent>(`/products/${productSlug}`).catch(() => ({ success: false, data: null })),\r\n          api.get<ProductImage[]>(`/products/${productSlug}/images`).catch(() => ({ success: false, data: [] })),\r\n          api.get<ProductFeature[]>(`/products/${productSlug}/features`).catch(() => ({ success: false, data: [] })),\r\n          api.get<ProductVariant[]>(`/products/${productSlug}/variants`).catch(() => ({ success: false, data: [] }))\r\n        ]);\r\n\r\n        setData({\r\n          content: contentRes.success && contentRes.data ? contentRes.data as ProductPageContent : null,\r\n          images: imagesRes.success && imagesRes.data ? (imagesRes.data as ProductImage[]).sort((a, b) => a.orderIndex - b.orderIndex) : [],\r\n          features: featuresRes.success && featuresRes.data ? (featuresRes.data as ProductFeature[]).sort((a, b) => a.orderIndex - b.orderIndex) : [],\r\n          variants: variantsRes.success && variantsRes.data ? (variantsRes.data as ProductVariant[]).filter(v => v.isActive).sort((a, b) => a.orderIndex - b.orderIndex) : []\r\n        });\r\n      } catch (err: any) {\r\n        setError(err.message || 'Failed to fetch product data');\r\n        console.error('Error fetching product data:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (productSlug) {\r\n      fetchProductData();\r\n    }\r\n  }, [productSlug]);\r\n\r\n  return { ...data, loading, error };\r\n};\r\n\r\n","// Map route slugs to API slugs\r\nexport const getProductApiSlug = (routeSlug: string): string => {\r\n  const slugMap: Record<string, string> = {\r\n    'hf-mobile': 'hf-mobile',\r\n    'hf-fixed': 'hf-fixed',\r\n    'fpd-c-arm': 'fpd-c-arm',\r\n    '1k1k-high-end-hf-c-arm': 'hf-c-arm-1k',\r\n    'line-frequency-x-ray-systems': 'line-frequency',\r\n    'digital-radiography': 'digital-radiography',\r\n    'dream-series-ceiling-suspended': 'dream-series'\r\n  };\r\n  return slugMap[routeSlug] || routeSlug;\r\n};\r\n\r\n// Get route slug from current pathname\r\nexport const getRouteSlugFromPath = (pathname: string): string => {\r\n  const match = pathname.match(/\\/products\\/([^/]+)/);\r\n  return match ? match[1] : '';\r\n};\r\n\r\n"],"names":["useProduct","productSlug","data","setData","useState","loading","setLoading","error","setError","useEffect","contentRes","imagesRes","featuresRes","variantsRes","api","b","v","err","getProductApiSlug","routeSlug"],"mappings":"0CA+CO,MAAMA,EAAcC,GAAwB,CACjD,KAAM,CAACC,EAAMC,CAAO,EAAIC,WAAsB,CAC5C,QAAS,KACT,OAAQ,CAAA,EACR,SAAU,CAAA,EACV,SAAU,CAAA,CAAC,CACZ,EACK,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAEtDK,OAAAA,EAAAA,UAAU,IAAM,CA4BVR,IA3BqB,SAAY,CACnC,GAAI,CACFK,EAAW,EAAI,EACfE,EAAS,IAAI,EAGb,KAAM,CAACE,EAAYC,EAAWC,EAAaC,CAAW,EAAI,MAAM,QAAQ,IAAI,CAC1EC,EAAI,IAAwB,aAAab,CAAW,EAAE,EAAE,MAAM,KAAO,CAAE,QAAS,GAAO,KAAM,MAAO,EACpGa,EAAI,IAAoB,aAAab,CAAW,SAAS,EAAE,MAAM,KAAO,CAAE,QAAS,GAAO,KAAM,CAAA,GAAK,EACrGa,EAAI,IAAsB,aAAab,CAAW,WAAW,EAAE,MAAM,KAAO,CAAE,QAAS,GAAO,KAAM,CAAA,GAAK,EACzGa,EAAI,IAAsB,aAAab,CAAW,WAAW,EAAE,MAAM,KAAO,CAAE,QAAS,GAAO,KAAM,CAAA,GAAK,CAAA,CAC1G,EAEDE,EAAQ,CACN,QAASO,EAAW,SAAWA,EAAW,KAAOA,EAAW,KAA6B,KACzF,OAAQC,EAAU,SAAWA,EAAU,KAAQA,EAAU,KAAwB,KAAK,CAAC,EAAGI,IAAM,EAAE,WAAaA,EAAE,UAAU,EAAI,CAAA,EAC/H,SAAUH,EAAY,SAAWA,EAAY,KAAQA,EAAY,KAA0B,KAAK,CAAC,EAAGG,IAAM,EAAE,WAAaA,EAAE,UAAU,EAAI,CAAA,EACzI,SAAUF,EAAY,SAAWA,EAAY,KAAQA,EAAY,KAA0B,OAAOG,GAAKA,EAAE,QAAQ,EAAE,KAAK,CAAC,EAAGD,IAAM,EAAE,WAAaA,EAAE,UAAU,EAAI,CAAA,CAAC,CACnK,CACH,OAASE,EAAU,CACjBT,EAASS,EAAI,SAAW,8BAA8B,EACtD,QAAQ,MAAM,+BAAgCA,CAAG,CACnD,QAAA,CACEX,EAAW,EAAK,CAClB,CACF,GAGE,CAEJ,EAAG,CAACL,CAAW,CAAC,EAET,CAAE,GAAGC,EAAM,QAAAG,EAAS,MAAAE,CAAA,CAC7B,EC1FaW,EAAqBC,IACQ,CACtC,YAAa,YACb,WAAY,WACZ,YAAa,YACb,yBAA0B,cAC1B,+BAAgC,iBAChC,sBAAuB,sBACvB,iCAAkC,cAAA,GAErBA,CAAS,GAAKA"}