import{r,a as p,j as e}from"./index-BxtNdXkz.js";import{a as y}from"./imageUrl-BzcOWJ-M.js";const T=()=>{const[u,o]=r.useState(null),[c,h]=r.useState([]),[d,x]=r.useState(!0),[l,s]=r.useState(null);return r.useEffect(()=>{(async()=>{try{x(!0),s(null);const[i,a]=await Promise.all([p.get("/home-products-section"),p.get("/home-products-cards")]);if(i.success&&i.data&&o(i.data),a.success&&a.data){const n=a.data.filter(m=>m.isActive).sort((m,w)=>m.orderIndex-w.orderIndex);h(n)}}catch(i){s(i.message||"Failed to fetch products data"),console.error("Error fetching products:",i)}finally{x(!1)}})()},[]),{section:u,cards:c,loading:d,error:l}},C=()=>{const[u,o]=r.useState([]),[c,h]=r.useState(!0),[d,x]=r.useState(null);return r.useEffect(()=>{(async()=>{try{h(!0);const s=await p.get("/testimonials");s.success&&s.data&&o(s.data)}catch(s){x(s.message||"Failed to fetch testimonials"),console.error("Error fetching testimonials:",s)}finally{h(!1)}})()},[]),{testimonials:u,loading:c,error:d}},S=()=>{const{testimonials:u,loading:o,error:c}=C(),[h,d]=r.useState(0),[x,l]=r.useState(!1),[s,v]=r.useState(2),i=r.useRef(null);r.useEffect(()=>{const t=()=>{v(window.innerWidth<768?1:2)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const a=u.filter(t=>t&&t.testimonialText&&t.clientName&&t.isActive!==!1),n=a.length>0?[...a,...a,...a]:[],m=n.length>0?100/n.length:100;r.useEffect(()=>{if(o||c||a.length===0||x||s===0)return;const t=setInterval(()=>{d(f=>{Math.max(0,a.length-s);const g=f+1;return g>n.length-s?(f+1)%n.length:g})},4e3);return()=>clearInterval(t)},[a.length,n.length,o,c,x,s]);const w=()=>{d(t=>n.length===0?0:t===0?n.length-1:t-1)},N=()=>{d(t=>n.length===0?0:(t+1)%n.length)};return o?e.jsx("section",{className:"py-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF6B35]"})})})}):c?e.jsx("section",{className:"py-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:e.jsx("div",{className:"text-red-600 text-center p-4",children:e.jsx("p",{children:"Failed to load testimonials. Please try again later."})})})}):a.length===0?null:e.jsx("section",{className:"py-8 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-12",children:[e.jsxs("div",{className:"mb-12 relative","data-aos":"fade-up",children:[e.jsx("p",{className:"text-[#7DC244] font-medium mb-2 uppercase text-sm",children:"Testimonial"}),e.jsx("h2",{className:"text-4xl md:text-5xl font-medium text-gray-900 mb-4",children:"Client Stories & Experiences"}),a.length>s&&e.jsxs("div",{className:"absolute top-0 right-0 flex gap-2",children:[e.jsx("button",{onClick:w,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"w-10 h-10 rounded-full border-2 border-[#2879B6] bg-white hover:bg-[#2879B6] text-[#2879B6] hover:text-white transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg","aria-label":"Previous testimonials",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsx("button",{onClick:N,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"w-10 h-10 rounded-full border-2 border-[#2879B6] bg-white hover:bg-[#2879B6] text-[#2879B6] hover:text-white transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg","aria-label":"Next testimonials",children:e.jsx("i",{className:"ri-arrow-right-line text-xl"})})]})]}),e.jsx("div",{ref:i,className:"overflow-hidden relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:e.jsx("div",{className:"flex transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${h*m}%)`,width:`${n.length*100/s}%`},children:n.map((t,f)=>e.jsx("div",{className:"flex-shrink-0 px-2 md:px-4",style:{width:`${m}%`},children:e.jsxs("div",{className:"bg-[#FF6B35] p-3 rounded-lg text-white h-full hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:[e.jsx("div",{className:"mb-6",children:e.jsx("i",{className:"ri-double-quotes-l text-5xl text-white/50"})}),e.jsxs("p",{className:"text-white leading-relaxed mb-6 text-sm md:text-base italic",children:['"',t?.testimonialText||"",'"']}),e.jsx("div",{className:"border-t border-white/30 pt-6 mt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-full bg-white/20 flex items-center justify-center flex-shrink-0 overflow-hidden relative border-2 border-white/30",children:t?.clientImage?.filePath?e.jsx("img",{src:y(t.clientImage),alt:t?.clientName||"Client",className:"w-full h-full object-cover",onError:g=>{const j=g.target;j.style.display="none";const b=j.parentElement;b&&(b.innerHTML=`
                                  <div class="w-full h-full bg-white/30 flex items-center justify-center">
                                    <span class="text-white font-bold text-lg">
                                      ${(t?.clientName||"C").charAt(0).toUpperCase()}
                                    </span>
                                  </div>
                                `)}}):e.jsx("div",{className:"w-full h-full bg-white/30 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:(t?.clientName||"C").charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm md:text-base font-bold text-white mb-1",children:t?.clientName||"Client"}),t?.clientPosition&&t?.clientCompany?e.jsxs("p",{className:"text-xs md:text-sm text-white/90",children:[t.clientPosition,", ",t.clientCompany]}):t?.clientCompany?e.jsx("p",{className:"text-xs md:text-sm text-white/90",children:t.clientCompany}):t?.clientPosition?e.jsx("p",{className:"text-xs md:text-sm text-white/90",children:t.clientPosition}):null]})]})})]})},`${t.id}-${f}`))})})]})})};export{S as T,T as u};
//# sourceMappingURL=TestimonialsSection-3iNY9MyA.js.map
